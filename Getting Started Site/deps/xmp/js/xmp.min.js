/* ==========================================================
* xmp.min.js 3.1.4, build 438
* ==========================================================
* Copyright 2019 XMPie, LTD.
* ========================================================== */

var muCreateXMVersion = "3.1.4";
var muCreateXMBuild = 438;


//Because we place all block in $(document).ready function we needed to expose these global variables outside xmpControllerDriver, xmpResourceDriver
var xmpControllerDriver;
var xmpResourceDriver;


function waitForScriptLoad(attemptNumber) {
  if (attemptNumber > 5)
  {
    console.log('jQuery couldnt be found, please add the script to your html file');
    return;
  }
  attemptNumber++;
  if (typeof jQuery == 'undefined')
  {
    console.log('Attempt number ' + attemptNumber + ': jQuery couldnt be found, try again in 1 second');
    setTimeout(function() {waitForScriptLoad(attemptNumber)},1000);
  }
  else
  {
    console.log('jQuery was found, start XMPL app');
    loadXmplGeneralScript();
  }

}


function loadXmplGeneralScript()
{

  $(document).ready(function()
  {
    if (typeof jQuery != 'undefined')
    {
      console.log('jQuery version: ' + jQuery.fn.jquery);

      // Min jQuery Version 1.10.2
      var jQueryVersion = jQuery.fn.jquery.split('.');
      if (!(
        Number(jQueryVersion[0]) > 1 ||
        Number(jQueryVersion[0]) === 1 && (
          Number(jQueryVersion[1]) > 10 || Number(jQueryVersion[1]) === 10 && Number(jQueryVersion[2]) >= 2
        )
      )) {
        console.log('Please note jQuery version ' + jQuery.fn.jquery + ' is not supported for this XMPL version');
      }
    }
/*
 AngularJS v1.3.0-beta.3
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/

/*!
 * Platform.js v1.0.0 <http://mths.be/platform>
 * Copyright 2010-2014 John-David Dalton <http://allyoucanleet.com/>
 * Available under MIT license <http://mths.be/mit>
 */

function createAsyncReplacement(element,attrs){var elementDimensions={width:element.width(),height:element.height()};element.hide();var $imgAlternative=$(document.createElement("div"));$imgAlternative.addClass(attrs.xmpAsyncBusyClass||"xmp-busy"),element.after($imgAlternative),void 0!=attrs.xmpAdaptProgressSize&&elementDimensions.width>0&&elementDimensions.height>0&&($imgAlternative.width(elementDimensions.width),$imgAlternative.height(elementDimensions.height))}function destroyAsyncReplacement(element){element.next().remove(),element.show()}function toBoolean(value){return value=!(!value||0===value.length)&&!("0"==value||"false"==value)}function waitForRecipientSourceWithAdorAttribute(xmpResource,inScope,inAttributeValue,inCallback){var adorIdentity=getADORIdentityFromAttribute(xmpResource,inAttributeValue);if(adorIdentity.isRecipient)var unregister=inScope.$watch("xmp.recipientReady",function(value){value&&(unregister(),inScope.xmp.recipientID&&inCallback.call(null,adorIdentity.isRecipient,adorIdentity.adorName,inScope.xmp.r[adorIdentity.adorName]))});else if(Object.keys(referredRecipientADORs).length>0)var unregister=inScope.$watch("xmp.referredID",function(value){value&&(unregister(),inCallback.call(null,adorIdentity.isRecipient,adorIdentity.adorName,inScope.xmp.referredRecipient[adorIdentity.adorName]))})}function getADORIdentityFromAttribute(xmpResource,inAttributeValue){var recipientADORs={},referredRecipientADORs={};xmpResource.populateRecipientADORsInExpression(inAttributeValue,recipientADORs,referredRecipientADORs);var isRecipient=Object.keys(recipientADORs).length>0;return{isRecipient:isRecipient,adorName:isRecipient?Object.keys(recipientADORs)[0]:Object.keys(referredRecipientADORs)[0]}}function isolateSuccessFailureProperties($scope){$scope.failureTrackAction=null,$scope.failureJSAction=null,$scope.failureNGAction=null,$scope.failureNGAction=null,$scope.failureURL=null,$scope.successEmail=null,$scope.successTrackAction=null,$scope.successJSAction=null,$scope.successNGAction=null,$scope.successURL=null}function isActionContainer(iElement,iAttrs){return iElement.is("FORM")||"XMPPersonalizedPage"==iAttrs.ngController||"XMPAnonymousPage"==iAttrs.ngController}function activateScopePropertyForFormOrButton(scope,iElement,iAttrs,inAttributeName,inPropertyName){isActionContainer(iElement,iAttrs)?iAttrs.$observe(inAttributeName,function(value){value&&(scope[inPropertyName]=value)}):iElement.on("click."+inAttributeName,function(){scope[inPropertyName]=iAttrs[inAttributeName]})}function toTitleCase(inString){return 0==inString.length?inString:inString.charAt(0).toUpperCase()+inString.substring(1).toLowerCase()}function getDefaultTrackingElementName(inJElement){var result;switch(inJElement[0].tagName.toLowerCase()){case"a":result="Link";break;case"input":var type=inJElement[0].type;if(type)switch(type.toLowerCase()){case"button":case"submit":case"reset":result="Button";break;case"image":result="Image Button";break;case"checkbox":result="Checkbox";break;case"radio":result="Radio Button";break;default:result="Textbox"}break;case"select":case"option":result="Dropdown";break;case"textarea":result="Textarea";break;case"img":result="Image";break;case"p":result="Paragraph";break;case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":result="Header";break;case"table":result="Table";break;case"tr":result="Table Row";break;case"td":result="Table Cell";break;case"iframe":result="IFrame";break;default:result=toTitleCase(inJElement[0].tagName)}return result}function getDefaultTrackingEventType(inJElement){return"a"==inJElement[0].tagName.toLowerCase()?"Navigated":"Performed Action"}function getHTMLEventForTrackingForElement(inJElement){var result;switch(inJElement[0].tagName.toLowerCase()){case"a":result="mouseup";break;case"input":var type=inJElement[0].type,isclick=!1;if(type)switch(type.toLowerCase()){case"image":case"submit":case"button":case"reset":isclick=!0;break;default:isclick=!1}result=isclick?"mousedown":"change";break;case"select":case"option":result="change";break;default:result="mousedown"}return result}function runFBActionIfInit(inAppID,inAction){window.fbAsyncInit?inAction():(window.fbAsyncInit=function(){FB.init({appId:inAppID,xfbml:!0,version:"v2.0"}),inAction()},function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];d.getElementById(id)||(js=d.createElement(s),js.id=id,js.src="//connect.facebook.net/en_US/sdk.js",fjs.parentNode.insertBefore(js,fjs))}(document,"script","facebook-jssdk"))}function isServerAssetExpression(inItem){return"server:"==inItem.substring(0,7)}function loadAsync(scope,inElement,inAttributes,controller,xmpResource,$window){createAsyncReplacement(inElement,inAttributes),runAsyncGet(xmpResource,$window,scope,scope.asyncRecipientADORs,scope.asyncReferredRecipientADORs,function(){destroyAsyncReplacement(inElement)})}function loadAsyncAdor(scope,inElement,inAttributes,controller,xmpResource,$window){runAsyncGet(xmpResource,$window,scope,scope.asyncRecipientADORs,scope.asyncReferredRecipientADORs)}function runAsyncGet(xmpResource,$window,scope,inRecipientADORsSet,inReferredRecipientADORsSet,onSuccessCB){function getResolvedAdorsForAdorsList(inIsRecipient,adorsList){var targetQueryDict=inIsRecipient?scope.defaultAdorsForResolve:scope.defaultAdorsForReferredResolve,result=[];return adorsList.forEach(function(inADOR){targetQueryDict[inADOR]&&result.push(inADOR)}),result}var recipientADORsFields=Object.keys(inRecipientADORsSet),referredRecipientADORsFields=Object.keys(inReferredRecipientADORsSet),asyncJobs={};scope.xmpReady(function(){var recipientRequestsDescriptors=[{adorsList:recipientADORsFields,objectName:"r",recipientID:scope.xmp.recipientID},{adorsList:referredRecipientADORsFields,objectName:"referredRecipent",recipientID:scope.xmp.referredID}],totalJobs=0==recipientRequestsDescriptors[0].adorsList.length?0:1+recipientRequestsDescriptors[1].adorsList.length==0?0:1;recipientRequestsDescriptors.forEach(function(inParameters){0!=inParameters.adorsList.length&&inParameters.recipientID&&(xmpResource.debug("runAsyncGet: starting async query. recipient id =",inParameters.recipientID,"adors=",inParameters.adorsList),setupLoadStatus(scope.xmp,inParameters.objectName,inParameters.adorsList,eADORsLoading),xmpResource.getRecipientADORs(inParameters.recipientID,{adors:inParameters.adorsList,resolved:getResolvedAdorsForAdorsList("r"==inParameters.objectName,inParameters.adorsList),async:!0}).$promise.then(function(result){asyncJobs[result.jobID]={keys:inParameters.adorsList,target:inParameters.objectName,initStatus:result.status,initValues:result.values},Object.keys(asyncJobs).length==totalJobs&&scope.trackAsyncJobs(asyncJobs,onSuccessCB)}))})})}function stringOfStatus(inStatus){return kPDFOnDemandStatuses[inStatus+1]}function getRecipientADORName(xmpResource,inExpression){var dictRecipient={},dictReferred={};return xmpResource.populateRecipientADORsInExpression(inExpression,dictRecipient,dictReferred),Object.keys(dictRecipient)[0]}function getServerAssetExpression(inItem){return inItem.substring(7)}function isLoginError(inHTTPError){return"POST"==inHTTPError.config.method&&inHTTPError.config.url.match(/\/login$/)}function isRecipientGetError(inHTTPError){return"GET"==inHTTPError.config.method&&inHTTPError.config.url.match(/\/resource\/[^/]*\/recipients\/[^/]*$/)}function isRecipientUpdateError(inHTTPError){return"PUT"==inHTTPError.config.method&&inHTTPError.config.url.match(/\/resource\/[^/]*\/recipients\/[^/]*$/)}function isRecipientCreateError(inHTTPError){return"POST"==inHTTPError.config.method&&inHTTPError.config.url.match(/\/resource\/[^/]*\/recipients$/)}function getSpecificErrorDetails(inHTTPError){return isRecipientGetError(inHTTPError)?"Cannot get recipient data. The most probable reason is that the recipient ID is not available in the database (check the page URL for the recipient ID), or that the server is not responsive (down)":isLoginError(inHTTPError)?"Cannot login to XMPL server. The most probable reason is that the server is not responsive (down)":isRecipientUpdateError(inHTTPError)?"Cannot update recipient data. The most probable reason is that the recipient ID is not available in the database (check the page URL for the recipient ID), or that the server is not responsive (down)":isRecipientCreateError(inHTTPError)?"Cannot create a new recipient. The most probable reason is that the server is not responsive (down)":""}function changeLocation($scope,$location,url,forceReload){$scope=$scope||angular.element(document).scope(),forceReload||$scope.$$phase?window.location=url:($location.path(url),$scope.$apply())}function initAsyncConfig($scope,$injector){try{var asyncConfig=$injector.get("appConfig")();void 0!==asyncConfig.asyncAttempts&&($scope.asyncAttempts=asyncConfig.asyncAttempts),void 0!==asyncConfig.asyncWaitTime&&($scope.asyncWaitTime=asyncConfig.asyncWaitTime)}catch(e){}}function personalizedViewController($scope,$location,$window,$injector,$cookies,$parse,xmpResource,declareADORsCB,setupDefaultErrorPageCB){function saveADORsOnLoad(scope,xmpResoruce){xmpResource.adorsToSetOnLoad&&0!=Object.keys(xmpResource.adorsToSetOnLoad).length&&(xmpResource.debug("saveADORsOnLoad: saving adors on page load, adors:",xmpResource.adorsToSetOnLoad),xmpResource.saveRecipientADORs(scope.xmp.recipientID,xmpResource.adorsToSetOnLoad),xmpResource.adorsToSetOnLoad=null)}commonControllersSetup($scope,$location,$window,$injector,$cookies,$parse,xmpResource,declareADORsCB,setupDefaultErrorPageCB);var loginResult,defaultADORs=Object.keys($scope.defaultAdorsForGet),withADORsRetrieve=defaultADORs.length>0;withADORsRetrieve?(setupLoadStatus($scope.xmp,"r",defaultADORs,eADORsLoading),xmpResource.debug("personalizedViewController: running login+retrieve. service token cookie =",$cookies.xmpServiceToken,"recipient id cookie =",$cookies.xmpRecipientID,"recipient fields =",defaultADORs),loginResult=xmpResource.getRecipientADORs(null,{adors:defaultADORs,resolved:Object.keys($scope.defaultAdorsForResolve),login:{cached:{serviceToken:$cookies.xmpServiceToken,recipientID:$cookies.xmpRecipientID}}})):(xmpResource.debug("personalizedViewController: running login only (no retrieve). service token cookie =",$cookies.xmpServiceToken,"recipient id cookie =",$cookies.xmpRecipientID),loginResult=xmpResource.login($cookies.xmpServiceToken,$cookies.xmpRecipientID,!0)),loginResult.$promise.then(function(result){if(withADORsRetrieve){$scope.xmp.recipientID=result.login.recipientID;var resultAnalysis=analyzeGetADORSResponse(result.result,"r");$scope.xmp.r=result.result,setupLoadStatus($scope.xmp,"r",resultAnalysis.readyADORs,eADORsLoaded),$scope.formDefaultAdors&&$.each($scope.formDefaultAdors,function(key,value){void 0==$scope.xmp.r[key]||""!=$scope.xmp.r[key]&&null!=$scope.xmp.r[key]||($scope.xmp.r[key]=value)}),$scope.trackAsyncJobs(resultAnalysis.asyncJobs)}else $scope.xmp.recipientID=result.recipientID,$scope.xmp.r={};xmpResource.debug("personalizedViewController: success in login/load. Recipient ID is ",$scope.xmp.recipientID),recipientReady($scope),setCookie("xmpServiceToken",xmpResource.access.serviceToken,9999),setCookie("xmpRecipientID",$scope.xmp.recipientID,9999),referredRecipientSetup($scope,$location,$cookies,xmpResource),$window.setTimeout(function(){saveADORsOnLoad($scope,xmpResource)},0)},function(reason){setupLoadStatus($scope.xmp,"r",defaultADORs,eADORsFailed),recipientError($scope,reason),referredRecipientError($scope)})}function createDefaultErrorNode($element,$compile,$scope){var $newNode=$(document.createElement("div")).addClass("xmp-default-error-node");$element.append($newNode),$compile($newNode)($scope)}function setCookie(cname,cvalue,exdays){var d=new Date;d.setTime(d.getTime()+24*exdays*60*60*1e3);var expires="expires="+d.toUTCString();document.cookie=cname+"="+cvalue+"; "+expires}function getCookie(name){var value="; "+document.cookie,parts=value.split("; "+name+"=");if(2==parts.length)return parts.pop().split(";").shift()}function getFailureCBForRecipientSubmit($location,$parse,scope,xmpResource,inPostActionParameters){return function(reason){inPostActionParameters.failureTrackAction&&(xmpResource.debug("onRecipientSubmitSuccess: tracking on failure"),trackSimpleAction(scope,xmpResource,inPostActionParameters.failureTrackAction,inPostActionParameters.failureURL)),inPostActionParameters.failureJSAction&&(xmpResource.debug("onRecipientSubmitSuccess: running global javascript command on success:",inPostActionParameters.failureJSAction),eval(inPostActionParameters.failureJSAction)),inPostActionParameters.failureNGAction&&(xmpResource.debug("onRecipientSubmitSuccess: running scope method on failure:",inPostActionParameters.failureNGAction),$parse(inPostActionParameters.failureNGAction)(scope)),inPostActionParameters.failureURL?(xmpResource.debug("onRecipientSubmitSuccess: redirecting to another URL on failure:",inPostActionParameters.failureURL),changeLocation(scope,$location,inPostActionParameters.failureURL)):scope.showDefaultFailurePage&&scope.transitToFailureView(reason)}}function onRecipientSubmitSuccess($window,$location,$parse,xmpResource,scope,inPostActionParameters,inEmailRecipientID,inDoneCB){$window.setTimeout(function(){inPostActionParameters.successEmail&&(xmpResource.debug("onRecipientSubmitSuccess: sending success email"),sendEmailorTrigger(xmpResource,scope,inPostActionParameters.successEmail,inEmailRecipientID||scope.xmp.recipientID,inPostActionParameters.successURL)),inPostActionParameters.successEmailTrigger&&(xmpResource.debug("onRecipientSubmitSuccess: sending success trigger email"),sendEmailorTrigger(xmpResource,scope,inPostActionParameters.successEmailTrigger,inEmailRecipientID||scope.xmp.recipientID,inPostActionParameters.successURL)),inPostActionParameters.successTrackAction&&(xmpResource.debug("onRecipientSubmitSuccess: tracking on success"),trackSimpleAction(scope,xmpResource,inPostActionParameters.successTrackAction,inPostActionParameters.successURL)),inPostActionParameters.successJSAction&&(xmpResource.debug("onRecipientSubmitSuccess: running global javascript command on success:",inPostActionParameters.successJSAction),eval(inPostActionParameters.successJSAction)),inPostActionParameters.successNGAction&&(xmpResource.debug("onRecipientSubmitSuccess: running scope method on success:",inPostActionParameters.successNGAction),$parse(inPostActionParameters.successNGAction)(scope)),inPostActionParameters.successURL&&(xmpResource.debug("onRecipientSubmitSuccess: redirecting to another URL on success:",inPostActionParameters.successURL),changeLocation(scope,$location,inPostActionParameters.successURL,!0)),inDoneCB&&(xmpResource.debug("onRecipientSubmitSuccess: running callback on success"),inDoneCB())},0)}function setupLoadStatus(inXMPObject,inMember,inAdorsList,inStatus){inXMPObject.status[inMember]||(inXMPObject.status[inMember]={});var target=inXMPObject.status[inMember];inAdorsList.forEach(function(inADOR){target[inADOR]=inStatus}),inStatus!=eADORsFailed||inXMPObject.status.adorfailure||(inXMPObject.status.adorfailure=!0)}function sendEmailorTrigger(xmpResource,scope,inEmailReference,inRecipientID,inSync){inEmailReference.id.split(",").forEach(function(inEmailID){var touchpointID,customizations,emailConfig=xmpResource.emails?xmpResource.emails[inEmailID]:null;emailConfig?(touchpointID=emailConfig.touchpoint,customizations=emailConfig.customizations):(touchpointID=inEmailID,customizations=inEmailReference.customizations),xmpResource.debug("sendEmailorTrigger: sending email. touchpoint ID = ",touchpointID,"customizations = ",customizations),xmpResource.sendEmailorTrigger(touchpointID,{sync:inSync,recipientID:inRecipientID,customizations:customizations},null,function(reason){scope.transitToFailureView(reason)})})}function trackSimpleAction(scope,xmpResource,inAction,inSync){scope.trackingPageName?xmpResource.trackEvent(inAction,{sync:inSync,recipientID:scope.xmp.recipientID,properties:xmpResource.addDefaultTrackingParameters({PageName:scope.trackingPageName,ActionName:inAction})}):xmpResource.error("trackSimpleAction: cannot track. tracking page name was not assigned ")}function recipientReady($scope){$scope.xmp.recipientReady=!0,broadcastIfReady($scope)}function recipientError($scope,reason){$scope.xmp.recipientReady=!0,$scope.xmp.recipientFailed=!0,$scope.xmp.recipientFailureReason=reason,broadcastIfReady($scope)}function analyzeGetADORSResponse(result,inTarget){var readyADORs=[],asyncJobs={};for(var ador in result)result[ador]&&result[ador].uImage?(asyncJobs[result[ador].jobID]||(asyncJobs[result[ador].jobID]={keys:[],target:inTarget}),asyncJobs[result[ador].jobID].keys.push(ador),result[ador]=null):readyADORs.push(ador);return{readyADORs:readyADORs,asyncJobs:asyncJobs}}function referredRecipientSetup($scope,$location,$cookies,xmpResource){if($scope.xmp.referredID=$cookies.xmpReferredID,$scope.xmp.referredID){var referredDefaultADORs=Object.keys(xmpResource.defaultAdorsForReferredGet);if(referredDefaultADORs.length>0){xmpResource.debug("referredRecipientSetup: retrieving referred recipient data. id = ",$scope.xmp.referredID," fields = ",referredDefaultADORs),setupLoadStatus($scope.xmp,"referredRecipient",referredDefaultADORs,eADORsLoading);var result=xmpResource.getRecipientADORs($scope.xmp.referredID,{adors:referredDefaultADORs,resolved:xmpResource.defaultAdorsForReferredResolve});result.$promise.then(function(){var resultAnalysis=analyzeGetADORSResponse(result,"referredRecipient");$scope.xmp.referredRecipient=result,setupLoadStatus($scope.xmp,"referredRecipient",resultAnalysis.readyADORs,eADORsLoaded),$scope.trackAsyncJobs(resultAnalysis.asyncJobs),$scope.xmp.referredRecipientReady=!0,broadcastIfReady($scope)},function(reason){$scope.xmp.referredRecipient={},setupLoadStatus($scope.xmp,"referredRecipient",referredDefaultADORs,eADORsFailed),referredRecipientError($scope,reason)})}else $scope.xmp.referredRecipient={},$scope.xmp.referredRecipientReady=!0,broadcastIfReady($scope)}else $scope.xmp.referredRecipient={},$scope.xmp.referredRecipientReady=!0,broadcastIfReady($scope);$scope.defaultAdorsForReferredGet=xmpResource.defaultAdorsForReferredGet,$scope.defaultAdorsForReferredResolve=xmpResource.defaultAdorsForReferredResolve,xmpResource.defaultAdorsForReferredGet=null,xmpResource.defaultAdorsForReferredResolve=null}function referredRecipientError($scope,reason){$scope.xmp.referredRecipientReady=!0,$scope.xmp.referredRecipientFailed=!0,$scope.xmp.referredRecipientFailureReason=reason,broadcastIfReady($scope)}function broadcastIfReady($scope){$scope.xmp.referredRecipientReady&&$scope.xmp.recipientReady&&($scope.xmp.ready=!0,$scope.$root.$broadcast("xmpReady"),$scope.xmpResource.debug("broadcastIfReady: ready"))}function commonControllersSetup($scope,$location,$window,$injector,$cookies,$parse,xmpResource,declareADORsCB,setupDefaultErrorPageCB){$scope.xmpResource=xmpResource,xmpResource.createDefaultRetrieveDictionaries(),xmpResource.trackOnPageLoad&&($scope.successTrackAction="Page Visit"),$scope.showDefaultFailurePage=!xmpResource.turnOffDefaultErrorPage,$scope.showDefaultFailurePage&&setupDefaultErrorPageCB(),$scope.xmpReady=function(cb){$scope.xmp&&$scope.xmp.ready?cb.call(null):$scope.$on("xmpReady",function(){cb.call(null)})},$scope.xmp?(xmpResource.debug("commonControllersSetup: sharing xmp object with higher level scope"),$scope.xmp.status?$scope.xmp.status.adorFailure=!1:$scope.xmp.status={adorfailure:!1}):(xmpResource.debug("commonControllersSetup: creating independent xmp object"),$scope.xmp={status:{adorfailure:!1}}),declareADORsCB.call(),$scope.trackingPageName=xmpResource.trackingPageName,$scope.xmpReady(function(){$scope.xmp.recipientFailed||$scope.xmp.referredRecipientFailed?(getFailureCBForRecipientSubmit($location,$parse,$scope,xmpResource,$scope)($scope.xmp.recipientFailureReason||$scope.xmp.referredRecipientFailureReason),xmpResource.error("commonControllersSetup: initial load failed")):(xmpResource.debug("commonControllersSetup: initial load succesful"),onRecipientSubmitSuccess($window,$location,$parse,xmpResource,$scope,$scope))}),xmpResource.turnOffDefaultErrorPage=null,xmpResource.trackOnPageLoad=null,xmpResource.trackingPageName=null,$scope.defaultAdorsForGet=xmpResource.defaultAdorsForGet,$scope.defaultAdorsForResolve=xmpResource.defaultAdorsForResolve,xmpResource.defaultAdorsForGet=null,xmpResource.defaultAdorsForResolve=null,$scope.transitToFailureView=function(reason){void 0===$("body").attr("xmp-prevent-default-error-handle")&&(xmpResource.debug("running default transition to error view",reason),$scope.xmp.errorReason=reason)},$scope.updateAdorsForFields=function(inFields,inPostActionParameters){if(inFields){var savedADORs={};for(var key in inFields)savedADORs[key]=$scope.xmp.r[key];xmpResource.debug("updateAdorsForFields: updating adors for recipient. adors =",savedADORs);var getADORs=Object.keys($scope.defaultAdorsForGet);setupLoadStatus($scope.xmp,"r",getADORs,eADORsLoading);var resolvedADORs=Object.keys($scope.defaultAdorsForResolve);xmpResource.saveRecipientADORs($scope.xmp.recipientID,savedADORs,{retrieveADORs:getADORs.length>0?getADORs:void 0,resolvedADORs:resolvedADORs.length>0?resolvedADORs:void 0}).$promise.then(function(result){xmpResource.debug("updateAdorsForFields: success in updating adors");var resultAnalysis=analyzeGetADORSResponse(result,"r");resultAnalysis.readyADORs.forEach(function(key){$scope.xmp.r[key]=result[key]}),setupLoadStatus($scope.xmp,"r",resultAnalysis.readyADORs,eADORsLoaded),$scope.trackAsyncJobs(resultAnalysis.asyncJobs),$scope.$broadcast("xmpRecipientUpdate"),onRecipientSubmitSuccess($window,$location,$parse,xmpResource,$scope,inPostActionParameters)},getFailureCBForRecipientSubmit($location,$parse,$scope,xmpResource,inPostActionParameters))}},$scope.submitSign=function(useername,password){xmpResource.signin($scope.xmp.recipientID,useername,password)},$scope.submitSignOut=function(){xmpResource.signOut($scope.xmp.recipientID)},$scope.sendEmailorTriggerToRecipient=function(inEmailReference){sendEmailorTrigger(xmpResource,$scope,inEmailReference,$scope.xmp.recipientID)},$scope.sendEmailorTriggerToReferredRecipient=function(inEmailReference){sendEmailorTrigger(xmpResource,$scope,inEmailReference,$scope.xmp.referredID)},$scope.addReferredRecipientForFields=function(inFields,inActionParameters,inExtraADORsForRetrieve){if(inFields){var savedADORs={};for(var key in inFields)savedADORs[key]=inActionParameters.xmp.referredRecipient[key];var referredDefaultADORs=Object.keys($scope.defaultAdorsForReferredGet),referredDefaultADORsResolved=Object.keys($scope.defaultAdorsForReferredResolve);inExtraADORsForRetrieve&&inExtraADORsForRetrieve.forEach(function(key){referredDefaultADORs.push(key)}),setupLoadStatus($scope.xmp,"referredRecipient",referredDefaultADORs,eADORsLoading),xmpResource.debug("addReferredRecipientForFields: adding referred recipient. saved data =",savedADORs,". data to retrieve = ",referredDefaultADORs),xmpResource.addRecipient({adors:savedADORs,retrieveADORs:referredDefaultADORs,resolvedADORs:referredDefaultADORsResolved}).$promise.then(function(result){$scope.xmp.referredID=result.recipientID;var resultAnalysis=analyzeGetADORSResponse(result.values,"referredRecipient");resultAnalysis.readyADORs.forEach(function(key){$scope.xmp.referredRecipient[key]=result.values[key]}),setupLoadStatus($scope.xmp,"referredRecipient",resultAnalysis.readyADORs,eADORsLoaded),$scope.trackAsyncJobs(resultAnalysis.asyncJobs),$cookies.xmpReferredID=$scope.xmp.referredID,delete inActionParameters.xmp,xmpResource.debug("addReferredRecipientForFields: success in adding referred recipient. referred recipient id = ",$scope.xmp.referredID),onRecipientSubmitSuccess($window,$location,$parse,xmpResource,$scope,inActionParameters,$scope.xmp.referredID,function(){inActionParameters.resetXMP()})},getFailureCBForRecipientSubmit($location,$parse,$scope,xmpResource,inActionParameters))}},$scope.getXmp=function(){return $scope.xmp},$scope.getRecipientData=function(){return $scope.xmp.r},$scope.getReferredRecipientData=function(){return $scope.xmp.referredRecipient},$scope.getRecipientID=function(){return $scope.xmp.recipientID},$scope.getReferredRecipientID=function(){return $scope.xmp.referredID},$scope.asyncWaitTime=1500,$scope.asyncAttempts=100,initAsyncConfig($scope,$injector),$scope.trackAsyncJobs=function(asyncJobs,onDoneCB){function asyncWait(inAllJobs,inJobID,inRetriesCount){xmpResource.debug("trackAsyncJobs,asyncWait: job with id =",inJobID,"still in progress, current retry count is",inRetriesCount),xmpResource.getRecipientQueryStatus({jobID:inJobID}).$promise.then(function(result){result.status==eJobInProgress?inRetriesCount==$scope.asyncAttempts?(asyncJobDone(inAllJobs,inJobID,eJobFailed),xmpResource.error("trackAsyncJobs,asyncWait: retry timeout reached. failing")):$window.setTimeout(function(){asyncWait(inAllJobs,inJobID,inRetriesCount+1)},$scope.asyncWaitTime):asyncJobDone(inAllJobs,inJobID,result.status,result.values)})}function asyncJobDone(inAllJobs,inJobID,inStatus,inValues){var targetDictName=inAllJobs[inJobID].target;if(inStatus==eJobDone){if(xmpResource.debug("trackAsyncJobs,asyncJobDone: finished query succesfuly"),1==Object.keys(inValues).length&&1==inAllJobs[inJobID].keys.length&&Object.keys(inValues)[0]!=inAllJobs[inJobID].keys[0])$scope.xmp[targetDictName][inAllJobs[inJobID].keys[0]]=inValues[Object.keys(inValues)[0]];else for(var v in inValues)$scope.xmp[targetDictName][v]=inValues[v];setupLoadStatus($scope.xmp,targetDictName,inAllJobs[inJobID].keys,eADORsLoaded)}else setupLoadStatus($scope.xmp,targetDictName,inAllJobs[inJobID].keys,eADORsFailed),xmpResource.error("trackAsyncJobs,asyncJobDone: failued to finish query");inAllJobs[inJobID].status=!0;var allResolved=!0;for(var job in inAllJobs)allResolved=allResolved&&inAllJobs[job].status;allResolved&&onDoneCB&&onDoneCB(inAllJobs)}if(0==Object.keys(asyncJobs).length)return void(onDoneCB&&onDoneCB());for(var asyncJobID in asyncJobs)asyncJobs[asyncJobID].status=!1;for(var asyncJobID in asyncJobs)void 0!==asyncJobs.initStatus&&asyncJobs.initStatus!=eJobInProgress?asyncJobDone(asyncJobs,asyncJobID,asyncJobs.initStatus,asyncJobs.initValues):asyncWait(asyncJobs,asyncJobID,0)}}function anonymousViewController($scope,$location,$window,$injector,$cookies,$parse,xmpResource,adorDeclareCB,setupDefaultErrorPageCB){commonControllersSetup($scope,$location,$window,$injector,$cookies,$parse,xmpResource,adorDeclareCB,setupDefaultErrorPageCB),$scope.xmp.recipientID=null,$scope.xmp.r={},$scope.setRecipientID=function(inRecipientID){var defaultADORs=Object.keys($scope.defaultAdorsForGet);0!=defaultADORs.length&&(setupLoadStatus($scope.xmp,"r",defaultADORs,eADORsLoading),xmpResource.getRecipientADORs(inRecipientID,{adors:defaultADORs,resolved:Object.keys($scope.defaultAdorsForResolve)}).$promise.then(function(result){$scope.xmp.recipientID=inRecipientID;var resultAnalysis=analyzeGetADORSResponse(result,"r");$scope.xmp.r=result,setupLoadStatus($scope.xmp,"r",resultAnalysis.readyADORs,eADORsLoaded),$scope.trackAsyncJobs(resultAnalysis.asyncJobs),setCookie("xmpRecipientID",$scope.xmp.recipientID,9999)},function(reason){setupLoadStatus($scope.xmp,"r",defaultADORs,eADORsFailed)}))},$scope.rememberRecipient=function(){$cookies.xmpRecipientID&&""!=$cookies.xmpRecipientID&&$scope.setRecipientID($cookies.xmpRecipientID)},$scope.forgetRecipient=function(){var d=new Date(1970,1,1),expires="expires="+d.toUTCString();document.cookie="xmpRecipientID=;"+expires,$scope.xmp.recipientID=null},xmpResource.debug("anonymousViewController: running login only (no retrieve). service token cookie =",$cookies.xmpServiceToken,"recipient id cookie =",$cookies.xmpRecipientID),xmpResource.login($cookies.xmpServiceToken,null,!1).$promise.then(function(result){$cookies.xmpServiceToken=xmpResource.access.serviceToken,recipientReady($scope),referredRecipientSetup($scope,$location,$cookies,xmpResource),$cookies.xmpRecipientID&&$scope.xmp.shouldRememberRecipient&&$scope.setRecipientID($cookies.xmpRecipientID),$scope.formDefaultAdors&&$.each($scope.formDefaultAdors,function(key,value){$scope.xmp.r[key]=value})},function(reason){recipientError($scope,reason),referredRecipientError($scope)}),$scope.addRecipientForFields=function(inFields,inActionParameters,inExtraADORsForRetrieve){if(inFields){var savedADORs={};for(var key in inFields)savedADORs[key]=inActionParameters.xmp.r[key];var getADORs=[];if($scope.defaultAdorsForGet)for(var key in $scope.defaultAdorsForGet)getADORs.push(key);inExtraADORsForRetrieve&&inExtraADORsForRetrieve.forEach(function(key){getADORs.push(key)}),setupLoadStatus($scope.xmp,"r",getADORs,eADORsLoading);var resolvedADORs=[];$scope.defaultAdorsForResolve&&(resolvedADORs=Object.keys($scope.defaultAdorsForResolve)),xmpResource.debug("addRecipientForFields: adding recipient [registration]. saved data =",savedADORs,". data to retrieve = ",getADORs),xmpResource.addRecipient({adors:savedADORs,retrieveADORs:getADORs,resolvedADORs:resolvedADORs}).$promise.then(function(result){console.log("inActionParameters.hasAutoSignIn="+inActionParameters.hasAutoSignIn),inActionParameters.hasAutoSignIn&&setCookie("xmpSecurityToken",result.securityToken,9999),$scope.xmp.recipientID=result.recipientID;var resultAnalysis=analyzeGetADORSResponse(result.values,"r");resultAnalysis.readyADORs.forEach(function(key){$scope.xmp.r[key]=result.values[key]}),setupLoadStatus($scope.xmp,"r",resultAnalysis.readyADORs,eADORsLoaded),$scope.trackAsyncJobs(resultAnalysis.asyncJobs),$cookies.xmpRecipientID=$scope.xmp.recipientID,$scope.xmp.shouldRememberRecipient?setCookie("xmpRecipientID",$scope.xmp.recipientID,9999):setCookie("xmpRecipientID",$scope.xmp.recipientID,.01),$cookies.xmpRecipientID&&""!=$cookies.xmpRecipientID&&$scope.setRecipientID($cookies.xmpRecipientID),delete inActionParameters.xmp,xmpResource.debug("addRecipientForFields: success in adding recipient [registration]. recipient id = ",$scope.xmp.recipientID),onRecipientSubmitSuccess($window,$location,$parse,xmpResource,$scope,inActionParameters)},getFailureCBForRecipientSubmit($location,$parse,$scope,xmpResource,inActionParameters))}}}function XmpResource($resource,$http,$location,$log,inOptions){var self=this;inOptions&&["access","timeout","debugEnabled","dontCacheGets"].forEach(function(inValue){void 0!==inOptions[inValue]&&(self[inValue]=inOptions[inValue])}),this.access||(this.access={}),this.resourceConfig=void 0!==this.timeout?{timeout:this.timeout}:null,this.$resource=$resource,this.$http=$http,this.$location=$location,this.$log=$log}function accessURL(self,inOptions){return inOptions&&inOptions.access?inOptions.access.url?inOptions.access.url:inOptions.access.URL?inOptions.access.URL:self.access.url:self.access.url?self.access.url:self.access.URL}function serviceToken(self,inOptions){return inOptions&&inOptions.access&&inOptions.access.serviceToken?inOptions.access.serviceToken:self.access.serviceToken}function accessToken(self,inOptions){return document.logCB&&document.logCB("accessToken in xmp.js: self.access.accessToken="+self.access.accessToken),inOptions&&inOptions.access&&inOptions.access.accessToken?inOptions.access.accessToken:self.access.accessToken}function resourceToken(self,inOptions){var st=serviceToken(self,inOptions),ret=accessToken(self,inOptions);return st&&st.length>0&&st!=ret&&!document.logCB?ret+"_"+st:ret}function GetCircleTokenEncrypted(){return"undefined"!=typeof CircleTokenEncrypted?(document.logCB&&document.logCB("xmp.js: CircleTokenEncrypted="+CircleTokenEncrypted),CircleTokenEncrypted):(document.logCB&&document.logCB("xmp.js: CircleTokenEncrypted=NULL"),"")}function isTest(self,inOptions){return inOptions&&void 0!==inOptions.test?inOptions.test:self.$location.search().isTest||self.test}function addOptionalLogin(self,inLogin,inParameters){inLogin&&(inParameters.login=!0,inParameters.siteURL=self.$location.absUrl(),inParameters.isTest=isTest(self),
inParameters.cachedServiceToken=inLogin.cached?inLogin.cached.serviceToken:null,inParameters.cachedRecipientID=inLogin.cached?inLogin.cached.recipientID:null)}function fetchURL(self,inURL,inRunWhenFetched,inRunWhenFailed){var req=self.$http.get(inURL,self.resourceConfig);return inRunWhenFetched&&req.success(inRunWhenFetched),inRunWhenFailed&&req.error(inRunWhenFailed),req}function noOp(){}function attributesExcludeCollection(inAttributes){return void 0!==inAttributes.xmpAsync||void 0!==inAttributes["xmp-async"]||void 0!==inAttributes["data-xmp-async"]||void 0!==inAttributes.xmpExcludeLoad||void 0!==inAttributes["xmp-exclude-load"]||void 0!==inAttributes["data-xmp-exclude-load"]}function attributeCanBeCollected(inAttributeName){return"string"==typeof inAttributeName&&inAttributeName.length>0&&"$"!=inAttributeName.charAt(0)&&"xmpLoadAsyncAdor"!=inAttributeName&&"xmp-load-async-ador"!=inAttributeName&&"data-xmp-load-async-ador"!=inAttributeName}function canDebugExternal(){"undefined"!=typeof uCreateXMGlobal&&uCreateXMGlobal.logDebugFromExternalLibrary}function htmlAttrsToPlainKeyValue(inAttrs){var result={};return $.each(inAttrs,function(i,attrib){result[attrib.name]=attrib.value}),result}function shouldExcludeReferredSearch(inAttributes){return!!inAttributes&&(void 0!==inAttributes.xmpRefer||void 0!==inAttributes["xmp-refer"]||void 0!==inAttributes["data-xmp-refer"]||void 0!==inAttributes.xmpReferForm||void 0!==inAttributes["xmp-refer-form"]||void 0!==inAttributes["data-xmp-refer-form"])}function init(self,inDoLogin,inDecipherRecipientID){self.xmpResource=getResource(self,"xmpResource"),inDoLogin&&(self.$cookies=getResource(self,"$cookies")),copyRelevantPrototype(self),inDoLogin?self.xmpResource.login(self.$cookies.xmpServiceToken,self.$cookies.xmpRecipientID,inDecipherRecipientID).$promise.then(function(value){self.recipientID=value.recipientID,setCookie("xmpServiceToken",value.serviceToken,9999),setCookie("xmpRecipientID",value.recipientID,9999),markReady(self)}):markReady(self)}function markReady(self){self.isReady=!0,$(self).trigger("xmpResourceDriverXMPL::ready")}function getResource(self,inName){return self.injector.get(inName)}function isFunction(functionToCheck){var getType={};return functionToCheck&&"[object Function]"===getType.toString.call(functionToCheck)}function copyRelevantPrototype(self){var proto=Object.getPrototypeOf(self.xmpResource);for(var key in proto)if(proto.hasOwnProperty(key)&&isFunction(proto[key])){var obj={key:key};self[key]=function(){return self.xmpResource[this.key].apply(self.xmpResource,arguments)}.bind(obj)}}!function(Q,T,s){"use strict";function C(b){return function(){var c,a=arguments[0],a="["+(b?b+":":"")+a+"] http://errors.angularjs.org/1.3.0-beta.3/"+(b?b+"/":"")+a;for(c=1;c<arguments.length;c++)a=a+(1==c?"?":"&")+"p"+(c-1)+"="+encodeURIComponent("function"==typeof arguments[c]?arguments[c].toString().replace(/ \{[\s\S]*$/,""):void 0===arguments[c]?"undefined":"string"!=typeof arguments[c]?JSON.stringify(arguments[c]):arguments[c]);return Error(a)}}function cb(b){if(null==b||Ba(b))return!1;var a=b.length;return!(1!==b.nodeType||!a)||(A(b)||J(b)||0===a||"number"==typeof a&&0<a&&a-1 in b)}function r(b,a,c){var d;if(b)if(F(b))for(d in b)"prototype"==d||"length"==d||"name"==d||b.hasOwnProperty&&!b.hasOwnProperty(d)||a.call(c,b[d],d);else if(b.forEach&&b.forEach!==r)b.forEach(a,c);else if(cb(b))for(d=0;d<b.length;d++)a.call(c,b[d],d);else for(d in b)b.hasOwnProperty(d)&&a.call(c,b[d],d);return b}function Sb(b){var c,a=[];for(c in b)b.hasOwnProperty(c)&&a.push(c);return a.sort()}function Zc(b,a,c){for(var d=Sb(b),e=0;e<d.length;e++)a.call(c,b[d[e]],d[e]);return d}function Tb(b){return function(a,c){b(c,a)}}function db(){for(var a,b=ia.length;b;){if(b--,57==(a=ia[b].charCodeAt(0)))return ia[b]="A",ia.join("");if(90!=a)return ia[b]=String.fromCharCode(a+1),ia.join("");ia[b]="0"}return ia.unshift("0"),ia.join("")}function Ub(b,a){a?b.$$hashKey=a:delete b.$$hashKey}function t(b){var a=b.$$hashKey;return r(arguments,function(a){a!==b&&r(a,function(a,c){b[c]=a})}),Ub(b,a),b}function P(b){return parseInt(b,10)}function Vb(b,a){return t(new(t(function(){},{prototype:b})),a)}function z(){}function Ca(b){return b}function Y(b){return function(){return b}}function D(b){return void 0===b}function w(b){return void 0!==b}function W(b){return null!=b&&"object"==typeof b}function A(b){return"string"==typeof b}function zb(b){return"number"==typeof b}function oa(b){return"[object Date]"===ua.call(b)}function J(b){return"[object Array]"===ua.call(b)}function F(b){return"function"==typeof b}function eb(b){return"[object RegExp]"===ua.call(b)}function Ba(b){return b&&b.document&&b.location&&b.alert&&b.setInterval}function $c(b){return!(!b||!(b.nodeName||b.prop&&b.attr&&b.find))}function ad(b,a,c){var d=[];return r(b,function(b,f,h){d.push(a.call(c,b,f,h))}),d}function fb(b,a){if(b.indexOf)return b.indexOf(a);for(var c=0;c<b.length;c++)if(a===b[c])return c;return-1}function Da(b,a){var c=fb(b,a);return 0<=c&&b.splice(c,1),a}function $(b,a){if(Ba(b)||b&&b.$evalAsync&&b.$watch)throw Na("cpws");if(a){if(b===a)throw Na("cpi");if(J(b))for(var c=a.length=0;c<b.length;c++)a.push($(b[c]));else{c=a.$$hashKey,r(a,function(b,c){delete a[c]});for(var d in b)a[d]=$(b[d]);Ub(a,c)}}else(a=b)&&(J(b)?a=$(b,[]):oa(b)?a=new Date(b.getTime()):eb(b)?a=RegExp(b.source):W(b)&&(a=$(b,{})));return a}function Wb(b,a){a=a||{};for(var c in b)!b.hasOwnProperty(c)||"$"===c.charAt(0)&&"$"===c.charAt(1)||(a[c]=b[c]);return a}function va(b,a){if(b===a)return!0;if(null===b||null===a)return!1;if(b!==b&&a!==a)return!0;var d,c=typeof b;if(c==typeof a&&"object"==c){if(!J(b)){if(oa(b))return oa(a)&&b.getTime()==a.getTime();if(eb(b)&&eb(a))return b.toString()==a.toString();if(b&&b.$evalAsync&&b.$watch||a&&a.$evalAsync&&a.$watch||Ba(b)||Ba(a)||J(a))return!1;c={};for(d in b)if("$"!==d.charAt(0)&&!F(b[d])){if(!va(b[d],a[d]))return!1;c[d]=!0}for(d in a)if(!c.hasOwnProperty(d)&&"$"!==d.charAt(0)&&a[d]!==s&&!F(a[d]))return!1;return!0}if(!J(a))return!1;if((c=b.length)==a.length){for(d=0;d<c;d++)if(!va(b[d],a[d]))return!1;return!0}}return!1}function Xb(){return T.securityPolicy&&T.securityPolicy.isActive||T.querySelector&&!(!T.querySelector("[ng-csp]")&&!T.querySelector("[data-ng-csp]"))}function gb(b,a){var c=2<arguments.length?wa.call(arguments,2):[];return!F(a)||a instanceof RegExp?a:c.length?function(){return arguments.length?a.apply(b,c.concat(wa.call(arguments,0))):a.apply(b,c)}:function(){return arguments.length?a.apply(b,arguments):a.call(b)}}function bd(b,a){var c=a;return"string"==typeof b&&"$"===b.charAt(0)?c=s:Ba(a)?c="$WINDOW":a&&T===a?c="$DOCUMENT":a&&a.$evalAsync&&a.$watch&&(c="$SCOPE"),c}function pa(b,a){return void 0===b?s:JSON.stringify(b,bd,a?"  ":null)}function Yb(b){return A(b)?JSON.parse(b):b}function Oa(b){return"function"==typeof b?b=!0:b&&0!==b.length?(b=O(""+b),b=!("f"==b||"0"==b||"false"==b||"no"==b||"n"==b||"[]"==b)):b=!1,b}function fa(b){b=v(b).clone();try{b.empty()}catch(a){}var c=v("<div>").append(b).html();try{return 3===b[0].nodeType?O(c):c.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(a,b){return"<"+O(b)})}catch(d){return O(c)}}function Zb(b){try{return decodeURIComponent(b)}catch(a){}}function $b(b){var c,d,a={};return r((b||"").split("&"),function(b){b&&(c=b.split("="),d=Zb(c[0]),w(d)&&(b=!w(c[1])||Zb(c[1]),a[d]?J(a[d])?a[d].push(b):a[d]=[a[d],b]:a[d]=b))}),a}function ac(b){var a=[];return r(b,function(b,d){J(b)?r(b,function(b){a.push(xa(d,!0)+(!0===b?"":"="+xa(b,!0)))}):a.push(xa(d,!0)+(!0===b?"":"="+xa(b,!0)))}),a.length?a.join("&"):""}function Ab(b){return xa(b,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function xa(b,a){return encodeURIComponent(b).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,a?"%20":"+")}function cd(b,a){function c(a){a&&d.push(a)}var e,f,d=[b],h=["ng:app","ng-app","x-ng-app","data-ng-app"],g=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/;r(h,function(a){h[a]=!0,c(T.getElementById(a)),a=a.replace(":","\\:"),b.querySelectorAll&&(r(b.querySelectorAll("."+a),c),r(b.querySelectorAll("."+a+"\\:"),c),r(b.querySelectorAll("["+a+"]"),c))}),r(d,function(a){if(!e){var b=g.exec(" "+a.className+" ");b?(e=a,f=(b[2]||"").replace(/\s+/g,",")):r(a.attributes,function(b){!e&&h[b.name]&&(e=a,f=b.value)})}}),e&&a(e,f?[f]:[])}function bc(b,a){var c=function(){if(b=v(b),b.injector()){var c=b[0]===T?"document":fa(b);throw Na("btstrpd",c)}return a=a||[],a.unshift(["$provide",function(a){a.value("$rootElement",b)}]),a.unshift("ng"),c=cc(a),c.invoke(["$rootScope","$rootElement","$compile","$injector","$animate",function(a,b,c,d,e){a.$apply(function(){b.data("$injector",d),c(b)(a)})}]),c},d=/^NG_DEFER_BOOTSTRAP!/;if(Q&&!d.test(Q.name))return c();Q.name=Q.name.replace(d,""),Pa.resumeBootstrap=function(b){r(b,function(b){a.push(b)}),c()}}function hb(b,a){return a=a||"_",b.replace(dd,function(b,d){return(d?a:"")+b.toLowerCase()})}function Bb(b,a,c){if(!b)throw Na("areq",a||"?",c||"required");return b}function Qa(b,a,c){return c&&J(b)&&(b=b[b.length-1]),Bb(F(b),a,"not a function, got "+(b&&"object"==typeof b?b.constructor.name||"Object":typeof b)),b}function ya(b,a){if("hasOwnProperty"===b)throw Na("badname",a)}function dc(b,a,c){if(!a)return b;a=a.split(".");for(var d,e=b,f=a.length,h=0;h<f;h++)d=a[h],b&&(b=(e=b)[d]);return!c&&F(b)?gb(e,b):b}function Cb(b){var a=b[0];if(b=b[b.length-1],a===b)return v(a);var c=[a];do{if(!(a=a.nextSibling))break;c.push(a)}while(a!==b);return v(c)}function ed(b){var a=C("$injector"),c=C("ng");return b=b.angular||(b.angular={}),b.$$minErr=b.$$minErr||C,b.module||(b.module=function(){var b={};return function(e,f,h){if("hasOwnProperty"===e)throw c("badname","module");return f&&b.hasOwnProperty(e)&&(b[e]=null),b[e]||(b[e]=function(){function b(a,d,e){return function(){return c[e||"push"]([a,d,arguments]),n}}if(!f)throw a("nomod",e);var c=[],d=[],l=b("$injector","invoke"),n={_invokeQueue:c,_runBlocks:d,requires:f,name:e,provider:b("$provide","provider"),factory:b("$provide","factory"),service:b("$provide","service"),value:b("$provide","value"),constant:b("$provide","constant","unshift"),animation:b("$animateProvider","register"),filter:b("$filterProvider","register"),controller:b("$controllerProvider","register"),directive:b("$compileProvider","directive"),config:l,run:function(a){return d.push(a),this}};return h&&l(h),n}())}}())}function Sa(b){return b.replace(oe,function(a,b,d,e){return e?d.toUpperCase():d}).replace(pe,"Moz$1")}function Eb(b,a,c,d){function e(b){var k,l,n,q,p,u,e=c&&b?[this.filter(b)]:[this],m=a;if(!d||null!=b)for(;e.length;)for(k=e.shift(),l=0,n=k.length;l<n;l++)for(q=v(k[l]),m?q.triggerHandler("$destroy"):m=!m,p=0,q=(u=q.children()).length;p<q;p++)e.push(Fa(u[p]));return f.apply(this,arguments)}var f=Fa.fn[b],f=f.$original||f;e.$original=f,Fa.fn[b]=e}function N(b){if(b instanceof N)return b;if(A(b)&&(b=aa(b)),!(this instanceof N)){if(A(b)&&"<"!=b.charAt(0))throw Fb("nosel");return new N(b)}if(A(b)){var a=T.createElement("div");a.innerHTML="<div>&#160;</div>"+b,a.removeChild(a.firstChild),Gb(this,a.childNodes),v(T.createDocumentFragment()).append(this)}else Gb(this,b)}function Hb(b){return b.cloneNode(!0)}function Ga(b){jc(b);var a=0;for(b=b.childNodes||[];a<b.length;a++)Ga(b[a])}function kc(b,a,c,d){if(w(d))throw Fb("offargs");var e=ja(b,"events");ja(b,"handle")&&(D(a)?r(e,function(a,c){Ta(b,c,a),delete e[c]}):r(a.split(" "),function(a){D(c)?(Ta(b,a,e[a]),delete e[a]):Da(e[a]||[],c)}))}function jc(b,a){var c=b[ib],d=Ua[c];d&&(a?delete Ua[c].data[a]:(d.handle&&(d.events.$destroy&&d.handle({},"$destroy"),kc(b)),delete Ua[c],b[ib]=s))}function ja(b,a,c){var d=b[ib],d=Ua[d||-1];if(!w(c))return d&&d[a];d||(b[ib]=d=++qe,d=Ua[d]={}),d[a]=c}function lc(b,a,c){var d=ja(b,"data"),e=w(c),f=!e&&w(a),h=f&&!W(a);if(d||h||ja(b,"data",d={}),e)d[a]=c;else{if(!f)return d;if(h)return d&&d[a];t(d,a)}}function Ib(b,a){return!!b.getAttribute&&-1<(" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+a+" ")}function jb(b,a){a&&b.setAttribute&&r(a.split(" "),function(a){b.setAttribute("class",aa((" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+aa(a)+" "," ")))})}function kb(b,a){if(a&&b.setAttribute){var c=(" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");r(a.split(" "),function(a){a=aa(a),-1===c.indexOf(" "+a+" ")&&(c+=a+" ")}),b.setAttribute("class",aa(c))}}function Gb(b,a){if(a){a=a.nodeName||!w(a.length)||Ba(a)?[a]:a;for(var c=0;c<a.length;c++)b.push(a[c])}}function mc(b,a){return lb(b,"$"+(a||"ngController")+"Controller")}function lb(b,a,c){for(b=v(b),9==b[0].nodeType&&(b=b.find("html")),a=J(a)?a:[a];b.length;){for(var d=b[0],e=0,f=a.length;e<f;e++)if((c=b.data(a[e]))!==s)return c;b=v(d.parentNode||11===d.nodeType&&d.host)}}function nc(b){for(var a=0,c=b.childNodes;a<c.length;a++)Ga(c[a]);for(;b.firstChild;)b.removeChild(b.firstChild)}function oc(b,a){var c=mb[a.toLowerCase()];return c&&pc[b.nodeName]&&c}function re(b,a){var c=function(c,e){if(c.preventDefault||(c.preventDefault=function(){c.returnValue=!1}),c.stopPropagation||(c.stopPropagation=function(){c.cancelBubble=!0}),c.target||(c.target=c.srcElement||T),D(c.defaultPrevented)){var f=c.preventDefault;c.preventDefault=function(){c.defaultPrevented=!0,f.call(c)},c.defaultPrevented=!1}c.isDefaultPrevented=function(){return c.defaultPrevented||!1===c.returnValue},r(Wb(a[e||c.type]||[]),function(a){a.call(b,c)}),8>=V?(c.preventDefault=null,c.stopPropagation=null,c.isDefaultPrevented=null):(delete c.preventDefault,delete c.stopPropagation,delete c.isDefaultPrevented)};return c.elem=b,c}function Ha(b){var c,a=typeof b;return"object"==a&&null!==b?"function"==typeof(c=b.$$hashKey)?c=b.$$hashKey():c===s&&(c=b.$$hashKey=db()):c=b,a+":"+c}function Va(b){r(b,this.put,this)}function qc(b){var a,c;return"function"==typeof b?(a=b.$inject)||(a=[],b.length&&(c=b.toString().replace(se,""),c=c.match(te),r(c[1].split(ue),function(b){b.replace(ve,function(b,c,d){a.push(d)})})),b.$inject=a):J(b)?(c=b.length-1,Qa(b[c],"fn"),a=b.slice(0,c)):Qa(b,"fn",!0),a}function cc(b){function a(a){return function(b,c){if(!W(b))return a(b,c);r(b,Tb(a))}}function c(a,b){if(ya(a,"service"),(F(b)||J(b))&&(b=n.instantiate(b)),!b.$get)throw Wa("pget",a);return l[a+g]=b}function d(a,b){return c(a,{$get:b})}function e(a){var c,d,f,g,b=[];return r(a,function(a){if(!k.get(a)){k.put(a,!0);try{if(A(a))for(c=Ra(a),b=b.concat(e(c.requires)).concat(c._runBlocks),d=c._invokeQueue,f=0,g=d.length;f<g;f++){var h=d[f],m=n.get(h[0]);m[h[1]].apply(m,h[2])}else F(a)?b.push(n.invoke(a)):J(a)?b.push(n.invoke(a)):Qa(a,"module")}catch(l){throw J(a)&&(a=a[a.length-1]),l.message&&l.stack&&-1==l.stack.indexOf(l.message)&&(l=l.message+"\n"+l.stack),Wa("modulerr",a,l.stack||l.message||l)}}}),b}function f(a,b){function c(d){if(a.hasOwnProperty(d)){if(a[d]===h)throw Wa("cdep",m.join(" <- "));return a[d]}try{return m.unshift(d),a[d]=h,a[d]=b(d)}catch(e){throw a[d]===h&&delete a[d],e}finally{m.shift()}}function d(a,b,e){var h,m,k,f=[],g=qc(a);for(m=0,h=g.length;m<h;m++){if("string"!=typeof(k=g[m]))throw Wa("itkn",k);f.push(e&&e.hasOwnProperty(k)?e[k]:c(k))}return a.$inject||(a=a[h]),a.apply(b,f)}return{invoke:d,instantiate:function(a,b){var e,c=function(){};return c.prototype=(J(a)?a[a.length-1]:a).prototype,c=new c,e=d(a,c,b),W(e)||F(e)?e:c},get:c,annotate:qc,has:function(b){return l.hasOwnProperty(b+g)||a.hasOwnProperty(b)}}}var h={},g="Provider",m=[],k=new Va,l={$provide:{provider:a(c),factory:a(d),service:a(function(a,b){return d(a,["$injector",function(a){return a.instantiate(b)}])}),value:a(function(a,b){return d(a,Y(b))}),constant:a(function(a,b){ya(a,"constant"),l[a]=b,q[a]=b}),decorator:function(a,b){var c=n.get(a+g),d=c.$get;c.$get=function(){var a=p.invoke(d,c);return p.invoke(b,null,{$delegate:a})}}}},n=l.$injector=f(l,function(){throw Wa("unpr",m.join(" <- "))}),q={},p=q.$injector=f(q,function(a){return a=n.get(a+g),p.invoke(a.$get,a)});return r(e(b),function(a){p.invoke(a||z)}),p}function Rd(){var b=!0;this.disableAutoScrolling=function(){b=!1},this.$get=["$window","$location","$rootScope",function(a,c,d){function e(a){var b=null;return r(a,function(a){b||"a"!==O(a.nodeName)||(b=a)}),b}function f(){var d,b=c.hash();b?(d=h.getElementById(b))?d.scrollIntoView():(d=e(h.getElementsByName(b)))?d.scrollIntoView():"top"===b&&a.scrollTo(0,0):a.scrollTo(0,0)}var h=a.document;return b&&d.$watch(function(){return c.hash()},function(){d.$evalAsync(f)}),f}]}function ne(){this.$get=["$$rAF","$timeout",function(b,a){return b.supported?function(a){return b(a)}:function(b){return a(b,0,!1)}}]}function we(b,a,c,d){function e(a){try{a.apply(null,wa.call(arguments,1))}finally{if(0===--u)for(;I.length;)try{I.pop()()}catch(b){c.error(b)}}}function f(a,b){!function nb(){r(E,function(a){a()}),y=b(nb,a)}()}function h(){x=null,H!=g.url()&&(H=g.url(),r(ba,function(a){a(g.url())}))}var g=this,m=a[0],k=b.location,l=b.history,n=b.setTimeout,q=b.clearTimeout,p={};g.isMock=!1;var u=0,I=[];g.$$completeOutstandingRequest=e,g.$$incOutstandingRequestCount=function(){u++},g.notifyWhenNoOutstandingRequests=function(a){r(E,function(a){a()}),0===u?a():I.push(a)};var y,E=[];g.addPollFn=function(a){return D(y)&&f(100,n),E.push(a),a};var H=k.href,K=a.find("base"),x=null;g.url=function(a,c){return k!==b.location&&(k=b.location),l!==b.history&&(l=b.history),a?H!=a?(H=a,d.history?c?l.replaceState(null,"",a):(l.pushState(null,"",a),K.attr("href",K.attr("href"))):(x=a,c?k.replace(a):k.href=a),g):void 0:x||k.href.replace(/%27/g,"'")};var ba=[],R=!1;g.onUrlChange=function(a){return R||(d.history&&v(b).on("popstate",h),d.hashchange?v(b).on("hashchange",h):g.addPollFn(h),R=!0),ba.push(a),a},g.baseHref=function(){var a=K.attr("href");return a?a.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var M={},Z="",U=g.baseHref();g.cookies=function(a,b){var d,e,f,g;if(!a){if(m.cookie!==Z)for(Z=m.cookie,d=Z.split("; "),M={},f=0;f<d.length;f++)e=d[f],0<(g=e.indexOf("="))&&(a=unescape(e.substring(0,g)),M[a]===s&&(M[a]=unescape(e.substring(g+1))));return M}b===s?m.cookie=escape(a)+"=;path="+U+";expires=Thu, 01 Jan 1970 00:00:00 GMT":A(b)&&4096<(d=(m.cookie=escape(a)+"="+escape(b)+";path="+U).length+1)&&c.warn("Cookie '"+a+"' possibly not set or overflowed because it was too large ("+d+" > 4096 bytes)!")},g.defer=function(a,b){var c;return u++,c=n(function(){delete p[c],e(a)},b||0),p[c]=!0,c},g.defer.cancel=function(a){return!!p[a]&&(delete p[a],q(a),e(z),!0)}}function Td(){this.$get=["$window","$log","$sniffer","$document",function(b,a,c,d){return new we(b,d,a,c)}]}function Ud(){this.$get=function(){function b(b,d){function e(a){a!=n&&(q?q==a&&(q=a.n):q=a,f(a.n,a.p),f(a,n),n=a,n.n=null)}function f(a,b){a!=b&&(a&&(a.p=b),b&&(b.n=a))}if(b in a)throw C("$cacheFactory")("iid",b);var h=0,g=t({},d,{id:b}),m={},k=d&&d.capacity||Number.MAX_VALUE,l={},n=null,q=null;return a[b]={put:function(a,b){if(k<Number.MAX_VALUE){e(l[a]||(l[a]={key:a}))}if(!D(b))return a in m||h++,m[a]=b,h>k&&this.remove(q.key),b},get:function(a){if(k<Number.MAX_VALUE){var b=l[a];if(!b)return;e(b)}return m[a]},remove:function(a){if(k<Number.MAX_VALUE){var b=l[a];if(!b)return;b==n&&(n=b.p),b==q&&(q=b.n),f(b.n,b.p),delete l[a]}delete m[a],h--},removeAll:function(){m={},h=0,l={},n=q=null},destroy:function(){l=g=m=null,delete a[b]},info:function(){return t({},g,{size:h})}}}var a={};return b.info=function(){var b={};return r(a,function(a,e){b[e]=a.info()}),b},b.get=function(b){return a[b]},b}}function je(){this.$get=["$cacheFactory",function(b){return b("templates")}]}function ec(b,a){var c={},d="Directive",e=/^\s*directive\:\s*([\d\w\-_]+)\s+(.*)$/,f=/(([\d\w\-_]+)(?:\:([^;]+))?;?)/,h=/^<\s*(tr|th|td|thead|tbody|tfoot)(\s+[^>]*)?>/i,g=/^(on[a-z]+|formaction)$/;this.directive=function k(a,e){return ya(a,"directive"),A(a)?(Bb(e,"directiveFactory"),c.hasOwnProperty(a)||(c[a]=[],b.factory(a+d,["$injector","$exceptionHandler",function(b,d){var e=[];return r(c[a],function(c,f){try{var g=b.invoke(c);F(g)?g={compile:Y(g)}:!g.compile&&g.link&&(g.compile=Y(g.link)),g.priority=g.priority||0,g.index=f,g.name=g.name||a,g.require=g.require||g.controller&&g.name,g.restrict=g.restrict||"A",e.push(g)}catch(h){d(h)}}),e}])),c[a].push(e)):r(a,Tb(k)),this},this.aHrefSanitizationWhitelist=function(b){return w(b)?(a.aHrefSanitizationWhitelist(b),this):a.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(b){return w(b)?(a.imgSrcSanitizationWhitelist(b),this):a.imgSrcSanitizationWhitelist()},this.$get=["$injector","$interpolate","$exceptionHandler","$http","$templateCache","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(a,b,n,q,p,u,I,E,y,H,K,x){function ba(a,b,c,d,e){a instanceof v||(a=v(a)),r(a,function(b,c){3==b.nodeType&&b.nodeValue.match(/\S+/)&&(a[c]=v(b).wrap("<span></span>").parent()[0])});var f=M(a,b,a,c,d,e);return R(a,"ng-scope"),function(b,c,d){Bb(b,"scope");var e=c?Ia.clone.call(a):a;r(d,function(a,b){e.data("$"+b+"Controller",a)}),d=0;for(var g=e.length;d<g;d++){var h=e[d].nodeType;1!==h&&9!==h||e.eq(d).data("$scope",b)}return c&&c(e,b),f&&f(b,e,e),e}}function R(a,b){try{a.addClass(b)}catch(c){}}function M(a,b,c,d,e,f){function g(a,c,d,e){var f,k,l,n,p,q,u;f=c.length;var ca=Array(f);for(p=0;p<f;p++)ca[p]=c[p];for(u=p=0,q=h.length;p<q;u++)k=ca[u],c=h[p++],f=h[p++],l=v(k),c?(c.scope?(n=a.$new(),l.data("$scope",n)):n=a,(l=c.transclude)||!e&&b?c(f,n,k,d,Z(a,l||b)):c(f,n,k,d,e)):f&&f(a,k.childNodes,s,e)}for(var k,l,n,p,h=[],q=0;q<a.length;q++)k=new Jb,l=U(a[q],[],k,0===q?d:s,e),(f=l.length?Xa(l,a[q],k,b,c,null,[],[],f):null)&&f.scope&&R(v(a[q]),"ng-scope"),k=f&&f.terminal||!(n=a[q].childNodes)||!n.length?null:M(n,f?f.transclude:b),h.push(f,k),p=p||f||k,f=null;return p?g:null}function Z(a,b){return function(c,d,e){var f=!1;return c||(c=a.$new(),f=c.$$transcluded=!0),d=b(c,d,e),f&&d.on("$destroy",gb(c,c.$destroy)),d}}function U(a,b,c,d,g){var k,h=c.$attr;switch(a.nodeType){case 1:w(b,ka(Ja(a).toLowerCase()),"E",d,g);var l,n,p;k=a.attributes;for(var q=0,u=k&&k.length;q<u;q++){var I=!1,E=!1;if(l=k[q],!V||8<=V||l.specified){n=l.name,p=ka(n),la.test(p)&&(n=hb(p.substr(6),"-"));p===p.replace(/(Start|End)$/,"")+"Start"&&(I=n,E=n.substr(0,n.length-5)+"end",n=n.substr(0,n.length-6)),p=ka(n.toLowerCase()),h[p]=n,c[p]=l=aa(l.value),oc(a,p)&&(c[p]=!0),ga(a,b,l,p),w(b,p,"A",d,g,I,E)}}if(a=a.className,A(a)&&""!==a)for(;k=f.exec(a);)p=ka(k[2]),w(b,p,"C",d,g)&&(c[p]=aa(k[3])),a=a.substr(k.index+k[0].length);break;case 3:N(b,a.nodeValue);break;case 8:try{(k=e.exec(a.nodeValue))&&(p=ka(k[1]),w(b,p,"M",d,g)&&(c[p]=aa(k[2])))}catch(x){}}return b.sort(C),b}function B(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b))do{if(!a)throw ha("uterdir",b,c);1==a.nodeType&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--),d.push(a),a=a.nextSibling}while(0<e);else d.push(a);return v(d)}function za(a,b,c){return function(d,e,f,g,h){return e=B(e[0],b,c),a(d,e,f,g,h)}}function Xa(a,c,d,e,f,g,h,k,p){function q(a,b,c,d){a&&(c&&(a=za(a,c,d)),a.require=G.require,(M===G||G.$$isolateScope)&&(a=rc(a,{isolateScope:!0})),h.push(a)),b&&(c&&(b=za(b,c,d)),b.require=G.require,(M===G||G.$$isolateScope)&&(b=rc(b,{isolateScope:!0})),k.push(b))}function E(a,b,c){var d,e="data",f=!1;if(A(a)){for(;"^"==(d=a.charAt(0))||"?"==d;)a=a.substr(1),"^"==d&&(e="inheritedData"),f=f||"?"==d;if(d=null,c&&"data"===e&&(d=c[a]),!(d=d||b[e]("$"+a+"Controller"))&&!f)throw ha("ctreq",a,ga)}else J(a)&&(d=[],r(a,function(a){d.push(E(a,b,c))}));return d}function H(a,e,f,g,p){function q(a,b){var c;return 2>arguments.length&&(b=a,a=s),Ka&&(c=za),p(a,b,c)}var x,ca,y,B,ba,U,w,za={};if(x=c===f?d:Wb(d,new Jb(v(f),d.$attr)),ca=x.$$element,M){var xe=/^\s*([@=&])(\??)\s*(\w*)\s*$/;g=v(f),U=e.$new(!0),Z&&Z===M.$$originalDirective?g.data("$isolateScope",U):g.data("$isolateScopeNoTemplate",U),R(g,"ng-isolate-scope"),r(M.scope,function(a,c){var h,k,n,p,d=a.match(xe)||[],f=d[3]||c,g="?"==d[2],d=d[1];switch(U.$$isolateBindings[c]=d+f,d){case"@":x.$observe(f,function(a){U[c]=a}),x.$$observers[f].$$scope=e,x[f]&&(U[c]=b(x[f])(e));break;case"=":if(g&&!x[f])break;k=u(x[f]),p=k.literal?va:function(a,b){return a===b},n=k.assign||function(){throw h=U[c]=k(e),ha("nonassign",x[f],M.name)},h=U[c]=k(e),U.$watch(function(){var a=k(e);return p(a,U[c])||(p(a,h)?n(e,a=U[c]):U[c]=a),h=a},null,k.literal);break;case"&":k=u(x[f]),U[c]=function(a){return k(e,a)};break;default:throw ha("iscp",M.name,c,a)}})}for(w=p&&q,K&&r(K,function(a){var c,b={$scope:a===M||a.$$isolateScope?U:e,$element:ca,$attrs:x,$transclude:w};ba=a.controller,"@"==ba&&(ba=x[a.name]),c=I(ba,b),za[a.name]=c,Ka||ca.data("$"+a.name+"Controller",c),a.controllerAs&&(b.$scope[a.controllerAs]=c)}),g=0,y=h.length;g<y;g++)try{(B=h[g])(B.isolateScope?U:e,ca,x,B.require&&E(B.require,ca,za),w)}catch(t){n(t,fa(ca))}for(g=e,M&&(M.template||null===M.templateUrl)&&(g=U),a&&a(g,f.childNodes,s,p),g=k.length-1;0<=g;g--)try{(B=k[g])(B.isolateScope?U:e,ca,x,B.require&&E(B.require,ca,za),w)}catch(L){n(L,fa(ca))}}p=p||{};for(var y,G,ga,t,N,x=-Number.MAX_VALUE,K=p.controllerDirectives,M=p.newIsolateScopeDirective,Z=p.templateDirective,w=p.nonTlbTranscludeDirective,Xa=!1,Ka=p.hasElementTranscludeDirective,L=d.$$element=v(c),C=e,la=0,P=a.length;la<P;la++){G=a[la];var S=G.$$start,V=G.$$end;if(S&&(L=B(c,S,V)),t=s,x>G.priority)break;if((t=G.scope)&&(y=y||G,G.templateUrl||(Q("new/isolated scope",M,G,L),W(t)&&(M=G))),ga=G.name,!G.templateUrl&&G.controller&&(t=G.controller,K=K||{},Q("'"+ga+"' controller",K[ga],G,L),K[ga]=G),(t=G.transclude)&&(Xa=!0,G.$$tlb||(Q("transclusion",w,G,L),w=G),"element"==t?(Ka=!0,x=G.priority,t=B(c,S,V),L=d.$$element=v(T.createComment(" "+ga+": "+d[ga]+" ")),c=L[0],ob(f,v(wa.call(t,0)),c),C=ba(t,e,x,g&&g.name,{nonTlbTranscludeDirective:w})):(t=v(Hb(c)).contents(),L.empty(),C=ba(t,e))),G.template)if(Q("template",Z,G,L),Z=G,t=F(G.template)?G.template(L,d):G.template,t=sc(t),G.replace){if(g=G,t=D(t),c=t[0],1!=t.length||1!==c.nodeType)throw ha("tplrt",ga,"");ob(f,L,c),P={$attr:{}},t=U(c,[],P);var X=a.splice(la+1,a.length-(la+1));M&&nb(t),a=a.concat(t).concat(X),z(d,P),P=a.length}else L.html(t);if(G.templateUrl)Q("template",Z,G,L),Z=G,G.replace&&(g=G),H=O(a.splice(la,a.length-la),L,d,f,C,h,k,{controllerDirectives:K,newIsolateScopeDirective:M,templateDirective:Z,nonTlbTranscludeDirective:w}),P=a.length;else if(G.compile)try{N=G.compile(L,d,C),F(N)?q(null,N,S,V):N&&q(N.pre,N.post,S,V)}catch(Y){n(Y,fa(L))}G.terminal&&(H.terminal=!0,x=Math.max(x,G.priority))}return H.scope=y&&!0===y.scope,H.transclude=Xa&&C,p.hasElementTranscludeDirective=Ka,H}function nb(a){for(var b=0,c=a.length;b<c;b++)a[b]=Vb(a[b],{$$isolateScope:!0})}function w(b,e,f,g,h,l,p){if(e===h)return null;if(h=null,c.hasOwnProperty(e)){var q;e=a.get(e+d);for(var u=0,I=e.length;u<I;u++)try{q=e[u],(g===s||g>q.priority)&&-1!=q.restrict.indexOf(f)&&(l&&(q=Vb(q,{$$start:l,$$end:p})),b.push(q),h=q)}catch(x){n(x)}}return h}function z(a,b){var c=b.$attr,d=a.$attr,e=a.$$element;r(a,function(d,e){"$"!=e.charAt(0)&&(b[e]&&(d+=("style"===e?";":" ")+b[e]),a.$set(e,d,!0,c[e]))}),r(b,function(b,f){"class"==f?(R(e,b),a.class=(a.class?a.class+" ":"")+b):"style"==f?(e.attr("style",e.attr("style")+";"+b),a.style=(a.style?a.style+";":"")+b):"$"==f.charAt(0)||a.hasOwnProperty(f)||(a[f]=b,d[f]=c[f])})}function D(a){var b;return a=aa(a),(b=h.exec(a))?(b=b[1].toLowerCase(),a=v("<table>"+a+"</table>"),/(thead|tbody|tfoot)/.test(b)?a.children(b):(a=a.children("tbody"),"tr"===b?a.children("tr"):a.children("tr").contents())):v("<div>"+a+"</div>").contents()}function O(a,b,c,d,e,f,g,h){var l,n,k=[],u=b[0],I=a.shift(),x=t({},I,{templateUrl:null,transclude:null,replace:null,$$originalDirective:I}),E=F(I.templateUrl)?I.templateUrl(b,c):I.templateUrl;return b.empty(),q.get(H.getTrustedResourceUrl(E),{cache:p}).success(function(p){var q,H;if(p=sc(p),I.replace){if(p=D(p),q=p[0],1!=p.length||1!==q.nodeType)throw ha("tplrt",I.name,E);p={$attr:{}},ob(d,b,q);var y=U(q,[],p);W(I.scope)&&nb(y),a=y.concat(a),z(c,p)}else q=u,b.html(p);for(a.unshift(x),l=Xa(a,q,c,e,b,I,f,g,h),r(d,function(a,c){a==q&&(d[c]=b[0])}),n=M(b[0].childNodes,e);k.length;){p=k.shift(),H=k.shift();var B=k.shift(),K=k.shift(),y=b[0];if(H!==u){var ba=H.className;h.hasElementTranscludeDirective&&I.replace||(y=Hb(q)),ob(B,v(H),y),R(v(y),ba)}H=l.transclude?Z(p,l.transclude):K,l(n,p,y,d,H)}k=null}).error(function(a,b,c,d){throw ha("tpload",d.url)}),function(a,b,c,d,e){k?(k.push(b),k.push(c),k.push(d),k.push(e)):l(n,b,c,d,e)}}function C(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function Q(a,b,c,d){if(b)throw ha("multidir",b.name,c.name,a,fa(d))}function N(a,c){var d=b(c,!0);d&&a.push({priority:0,compile:Y(function(a,b){var c=b.parent(),e=c.data("$binding")||[];e.push(d),R(c.data("$binding",e),"ng-binding"),a.$watch(d,function(a){b[0].nodeValue=a})})})}function Ka(a,b){if("srcdoc"==b)return H.HTML;var c=Ja(a);return"xlinkHref"==b||"FORM"==c&&"action"==b||"IMG"!=c&&("src"==b||"ngSrc"==b)?H.RESOURCE_URL:void 0}function ga(a,c,d,e){var f=b(d,!0);if(f){if("multiple"===e&&"SELECT"===Ja(a))throw ha("selmulti",fa(a));c.push({priority:100,compile:function(){return{pre:function(c,d,h){if(d=h.$$observers||(h.$$observers={}),g.test(e))throw ha("nodomevents");(f=b(h[e],!0,Ka(a,e)))&&(h[e]=f(c),(d[e]||(d[e]=[])).$$inter=!0,(h.$$observers&&h.$$observers[e].$$scope||c).$watch(f,function(a,b){"class"===e&&a!=b?h.$updateClass(a,b):h.$set(e,a)}))}}}})}}function ob(a,b,c){var g,h,d=b[0],e=b.length,f=d.parentNode;if(a)for(g=0,h=a.length;g<h;g++)if(a[g]==d){a[g++]=c,h=g+e-1;for(var k=a.length;g<k;g++,h++)h<k?a[g]=a[h]:delete a[g];a.length-=e-1;break}for(f&&f.replaceChild(c,d),a=T.createDocumentFragment(),a.appendChild(d),c[v.expando]=d[v.expando],d=1,e=b.length;d<e;d++)f=b[d],v(f).remove(),a.appendChild(f),delete b[d];b[0]=c,b.length=1}function rc(a,b){return t(function(){return a.apply(null,arguments)},a,b)}var Jb=function(a,b){this.$$element=a,this.$attr=b||{}};Jb.prototype={$normalize:ka,$addClass:function(a){a&&0<a.length&&K.addClass(this.$$element,a)},$removeClass:function(a){a&&0<a.length&&K.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=tc(a,b),d=tc(b,a);0===c.length?K.removeClass(this.$$element,d):0===d.length?K.addClass(this.$$element,c):K.setClass(this.$$element,c,d)},$set:function(a,b,c,d){var e=oc(this.$$element[0],a);e&&(this.$$element.prop(a,b),d=e),this[a]=b,d?this.$attr[a]=d:(d=this.$attr[a])||(this.$attr[a]=d=hb(a,"-")),e=Ja(this.$$element),("A"===e&&"href"===a||"IMG"===e&&"src"===a)&&(this[a]=b=x(b,"src"===a)),!1!==c&&(null===b||b===s?this.$$element.removeAttr(d):this.$$element.attr(d,b)),(c=this.$$observers)&&r(c[a],function(a){try{a(b)}catch(c){n(c)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers={}),e=d[a]||(d[a]=[]);return e.push(b),E.$evalAsync(function(){e.$$inter||b(c[a])}),function(){Da(e,b)}}};var P=b.startSymbol(),S=b.endSymbol(),sc="{{"==P||"}}"==S?Ca:function(a){return a.replace(/\{\{/g,P).replace(/}}/g,S)},la=/^ngAttr[A-Z]/;return ba}]}function ka(b){return Sa(b.replace(ye,""))}function tc(b,a){var c="",d=b.split(/\s+/),e=a.split(/\s+/),f=0;a:for(;f<d.length;f++){for(var h=d[f],g=0;g<e.length;g++)if(h==e[g])continue a;c+=(0<c.length?" ":"")+h}return c}function Vd(){var b={},a=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(a,d){ya(a,"controller"),W(a)?t(b,a):b[a]=d},this.$get=["$injector","$window",function(c,d){return function(e,f){var h,g,m;if(A(e)&&(h=e.match(a),g=h[1],m=h[3],e=b.hasOwnProperty(g)?b[g]:dc(f.$scope,g,!0)||dc(d,g,!0),Qa(e,g,!0)),h=c.instantiate(e,f),m){if(!f||"object"!=typeof f.$scope)throw C("$controller")("noscp",g||e.name,m);f.$scope[m]=h}return h}}]}function Wd(){this.$get=["$window",function(b){return v(b.document)}]}function Xd(){this.$get=["$log",function(b){return function(a,c){b.error.apply(b,arguments)}}]}function uc(b){var c,d,e,a={};return b?(r(b.split("\n"),function(b){e=b.indexOf(":"),c=O(aa(b.substr(0,e))),
d=aa(b.substr(e+1)),c&&(a[c]=a[c]?a[c]+", "+d:d)}),a):a}function vc(b){var a=W(b)?b:s;return function(c){return a||(a=uc(b)),c?a[O(c)]||null:a}}function wc(b,a,c){return F(c)?c(b,a):(r(c,function(c){b=c(b,a)}),b)}function $d(){var b=/^\s*(\[|\{[^\{])/,a=/[\}\]]\s*$/,c=/^\)\]\}',?\n/,d={"Content-Type":"application/json;charset=utf-8"},e=this.defaults={transformResponse:[function(d){return A(d)&&(d=d.replace(c,""),b.test(d)&&a.test(d)&&(d=Yb(d))),d}],transformRequest:[function(a){return W(a)&&"[object File]"!==ua.call(a)&&"[object Blob]"!==ua.call(a)?pa(a):a}],headers:{common:{Accept:"application/json, text/plain, */*"},post:$(d),put:$(d),patch:$(d)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},f=this.interceptors=[],h=this.responseInterceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(a,b,c,d,n,q){function p(a){function c(a){var b=t({},a,{data:wc(a.data,a.headers,d.transformResponse)});return 200<=a.status&&300>a.status?b:n.reject(b)}var d={method:"get",transformRequest:e.transformRequest,transformResponse:e.transformResponse},f=function(a){function b(a){var c;r(a,function(b,d){F(b)&&(c=b(),null!=c?a[d]=c:delete a[d])})}var f,g,c=e.headers,d=t({},a.headers),c=t({},c.common,c[O(a.method)]);b(c),b(d);a:for(f in c){a=O(f);for(g in d)if(O(g)===a)continue a;d[f]=c[f]}return d}(a);t(d,a),d.headers=f,d.method=Ea(d.method),(a=Kb(d.url)?b.cookies()[d.xsrfCookieName||e.xsrfCookieName]:s)&&(f[d.xsrfHeaderName||e.xsrfHeaderName]=a);var g=[function(a){f=a.headers;var b=wc(a.data,vc(f),a.transformRequest);return D(a.data)&&r(f,function(a,b){"content-type"===O(b)&&delete f[b]}),D(a.withCredentials)&&!D(e.withCredentials)&&(a.withCredentials=e.withCredentials),u(a,b,f).then(c,c)},s],h=n.when(d);for(r(y,function(a){(a.request||a.requestError)&&g.unshift(a.request,a.requestError),(a.response||a.responseError)&&g.push(a.response,a.responseError)});g.length;){a=g.shift();var k=g.shift(),h=h.then(a,k)}return h.success=function(a){return h.then(function(b){a(b.data,b.status,b.headers,d)}),h},h.error=function(a){return h.then(null,function(b){a(b.data,b.status,b.headers,d)}),h},h}function u(b,c,f){function h(a,b,c){y&&(200<=a&&300>a?y.put(s,[a,b,uc(c)]):y.remove(s)),k(b,a,c),d.$$phase||d.$apply()}function k(a,c,d){c=Math.max(c,0),(200<=c&&300>c?q.resolve:q.reject)({data:a,status:c,headers:vc(d),config:b})}function m(){var a=fb(p.pendingRequests,b);-1!==a&&p.pendingRequests.splice(a,1)}var y,r,q=n.defer(),u=q.promise,s=I(b.url,b.params);if(p.pendingRequests.push(b),u.then(m,m),(b.cache||e.cache)&&!1!==b.cache&&"GET"==b.method&&(y=W(b.cache)?b.cache:W(e.cache)?e.cache:E),y)if(r=y.get(s),w(r)){if(r.then)return r.then(m,m),r;J(r)?k(r[1],r[0],$(r[2])):k(r,200,{})}else y.put(s,u);return D(r)&&a(b.method,s,c,h,f,b.timeout,b.withCredentials,b.responseType),u}function I(a,b){if(!b)return a;var c=[];return Zc(b,function(a,b){null===a||D(a)||(J(a)||(a=[a]),r(a,function(a){W(a)&&(a=pa(a)),c.push(xa(b)+"="+xa(a))}))}),0<c.length&&(a+=(-1==a.indexOf("?")?"?":"&")+c.join("&")),a}var E=c("$http"),y=[];return r(f,function(a){y.unshift(A(a)?q.get(a):q.invoke(a))}),r(h,function(a,b){var c=A(a)?q.get(a):q.invoke(a);y.splice(b,0,{response:function(a){return c(n.when(a))},responseError:function(a){return c(n.reject(a))}})}),p.pendingRequests=[],function(a){r(arguments,function(a){p[a]=function(b,c){return p(t(c||{},{method:a,url:b}))}})}("get","delete","head","jsonp"),function(a){r(arguments,function(a){p[a]=function(b,c,d){return p(t(d||{},{method:a,url:b,data:c}))}})}("post","put"),p.defaults=e,p}]}function ze(b){if(8>=V&&(!b.match(/^(get|post|head|put|delete|options)$/i)||!Q.XMLHttpRequest))return new Q.ActiveXObject("Microsoft.XMLHTTP");if(Q.XMLHttpRequest)return new Q.XMLHttpRequest;throw C("$httpBackend")("noxhr")}function ae(){this.$get=["$browser","$window","$document",function(b,a,c){return Ae(b,ze,b.defer,a.angular.callbacks,c[0])}]}function Ae(b,a,c,d,e){function f(a,b,c){var f=e.createElement("script"),h=null;return f.type="text/javascript",f.src=a,f.async=!0,h=function(a){Ta(f,"load",h),Ta(f,"error",h),e.body.removeChild(f),f=null;var g=-1,u="unknown";a&&("load"!==a.type||d[b].called||(a={type:"error"}),u=a.type,g="error"===a.type?404:200),c&&c(g,u)},pb(f,"load",h),pb(f,"error",h),e.body.appendChild(f),h}var h=-1;return function(e,m,k,l,n,q,p,u){function I(){y=h,K&&K(),x&&x.abort()}function E(a,d,e,f){R&&c.cancel(R),K=x=null,0===d&&(d=e?200:"file"==qa(m).protocol?404:0),a(1223==d?204:d,e,f),b.$$completeOutstandingRequest(z)}var y;if(b.$$incOutstandingRequestCount(),m=m||b.url(),"jsonp"==O(e)){var H="_"+(d.counter++).toString(36);d[H]=function(a){d[H].data=a,d[H].called=!0};var K=f(m.replace("JSON_CALLBACK","angular.callbacks."+H),H,function(a,b){E(l,a,d[H].data,""),d[H]=z})}else{var x=a(e);if(x.open(e,m,!0),r(n,function(a,b){w(a)&&x.setRequestHeader(b,a)}),x.onreadystatechange=function(){if(x&&4==x.readyState){var a=null,b=null;y!==h&&(a=x.getAllResponseHeaders(),b="response"in x?x.response:x.responseText),E(l,y||x.status,b,a)}},p&&(x.withCredentials=!0),u)try{x.responseType=u}catch(s){if("json"!==u)throw s}x.send(k||null)}if(0<q)var R=c(I,q);else q&&q.then&&q.then(I)}}function Yd(){var b="{{",a="}}";this.startSymbol=function(a){return a?(b=a,this):b},this.endSymbol=function(b){return b?(a=b,this):a},this.$get=["$parse","$exceptionHandler","$sce",function(c,d,e){function f(f,k,l){for(var n,q,p=0,u=[],I=f.length,E=!1,y=[];p<I;)-1!=(n=f.indexOf(b,p))&&-1!=(q=f.indexOf(a,n+h))?(p!=n&&u.push(f.substring(p,n)),u.push(p=c(E=f.substring(n+h,q))),p.exp=E,p=q+g,E=!0):(p!=I&&u.push(f.substring(p)),p=I);if((I=u.length)||(u.push(""),I=1),l&&1<u.length)throw xc("noconcat",f);if(!k||E)return y.length=I,p=function(a){try{for(var g,b=0,c=I;b<c;b++)"function"==typeof(g=u[b])&&(g=g(a),g=l?e.getTrusted(l,g):e.valueOf(g),null===g||D(g)?g="":"string"!=typeof g&&(g=pa(g))),y[b]=g;return y.join("")}catch(h){a=xc("interr",f,h.toString()),d(a)}},p.exp=f,p.parts=u,p}var h=b.length,g=a.length;return f.startSymbol=function(){return b},f.endSymbol=function(){return a},f}]}function Zd(){this.$get=["$rootScope","$window","$q",function(b,a,c){function d(d,h,g,m){var k=a.setInterval,l=a.clearInterval,n=c.defer(),q=n.promise,p=0,u=w(m)&&!m;return g=w(g)?g:0,q.then(null,null,d),q.$$intervalId=k(function(){n.notify(p++),0<g&&p>=g&&(n.resolve(p),l(q.$$intervalId),delete e[q.$$intervalId]),u||b.$apply()},h),e[q.$$intervalId]=n,q}var e={};return d.cancel=function(a){return!!(a&&a.$$intervalId in e)&&(e[a.$$intervalId].reject("canceled"),clearInterval(a.$$intervalId),delete e[a.$$intervalId],!0)},d}]}function hd(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"¤",posSuf:"",negPre:"(¤",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January February March April May June July August September October November December".split(" "),SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a",short:"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(b){return 1===b?"one":"other"}}}}function yc(b){b=b.split("/");for(var a=b.length;a--;)b[a]=Ab(b[a]);return b.join("/")}function zc(b,a,c){b=qa(b,c),a.$$protocol=b.protocol,a.$$host=b.hostname,a.$$port=P(b.port)||Be[b.protocol]||null}function Ac(b,a,c){var d="/"!==b.charAt(0);d&&(b="/"+b),b=qa(b,c),a.$$path=decodeURIComponent(d&&"/"===b.pathname.charAt(0)?b.pathname.substring(1):b.pathname),a.$$search=$b(b.search),a.$$hash=decodeURIComponent(b.hash),a.$$path&&"/"!=a.$$path.charAt(0)&&(a.$$path="/"+a.$$path)}function ma(b,a){if(0===a.indexOf(b))return a.substr(b.length)}function Ya(b){var a=b.indexOf("#");return-1==a?b:b.substr(0,a)}function Lb(b){return b.substr(0,Ya(b).lastIndexOf("/")+1)}function Bc(b,a){this.$$html5=!0,a=a||"";var c=Lb(b);zc(b,this,b),this.$$parse=function(a){var e=ma(c,a);if(!A(e))throw Mb("ipthprfx",a,c);Ac(e,this,b),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var a=ac(this.$$search),b=this.$$hash?"#"+Ab(this.$$hash):"";this.$$url=yc(this.$$path)+(a?"?"+a:"")+b,this.$$absUrl=c+this.$$url.substr(1)},this.$$rewrite=function(d){var e;return(e=ma(b,d))!==s?(d=e,(e=ma(a,e))!==s?c+(ma("/",e)||e):b+d):(e=ma(c,d))!==s?c+e:c==d+"/"?c:void 0}}function Nb(b,a){var c=Lb(b);zc(b,this,b),this.$$parse=function(d){var e=ma(b,d)||ma(c,d),e="#"==e.charAt(0)?ma(a,e):this.$$html5?e:"";if(!A(e))throw Mb("ihshprfx",d,a);Ac(e,this,b),d=this.$$path;var f=/^\/?.*?:(\/.*)/;0===e.indexOf(b)&&(e=e.replace(b,"")),f.exec(e)||(d=(e=f.exec(d))?e[1]:d),this.$$path=d,this.$$compose()},this.$$compose=function(){var c=ac(this.$$search),e=this.$$hash?"#"+Ab(this.$$hash):"";this.$$url=yc(this.$$path)+(c?"?"+c:"")+e,this.$$absUrl=b+(this.$$url?a+this.$$url:"")},this.$$rewrite=function(a){if(Ya(b)==Ya(a))return a}}function Cc(b,a){this.$$html5=!0,Nb.apply(this,arguments);var c=Lb(b);this.$$rewrite=function(d){var e;return b==Ya(d)?d:(e=ma(c,d))?b+a+e:c===d+"/"?c:void 0}}function qb(b){return function(){return this[b]}}function Dc(b,a){return function(c){return D(c)?this[b]:(this[b]=a(c),this.$$compose(),this)}}function be(){var b="",a=!1;this.hashPrefix=function(a){return w(a)?(b=a,this):b},this.html5Mode=function(b){return w(b)?(a=b,this):a},this.$get=["$rootScope","$browser","$sniffer","$rootElement",function(c,d,e,f){function h(a){c.$broadcast("$locationChangeSuccess",g.absUrl(),a)}var g,m=d.baseHref(),k=d.url();a?(m=k.substring(0,k.indexOf("/",k.indexOf("//")+2))+(m||"/"),e=e.history?Bc:Cc):(m=Ya(k),e=Nb),g=new e(m,"#"+b),g.$$parse(g.$$rewrite(k)),f.on("click",function(a){if(!a.ctrlKey&&!a.metaKey&&2!=a.which){for(var b=v(a.target);"a"!==O(b[0].nodeName);)if(b[0]===f[0]||!(b=b.parent())[0])return;var e=b.prop("href");W(e)&&"[object SVGAnimatedString]"===e.toString()&&(e=qa(e.animVal).href);var h=g.$$rewrite(e);e&&!b.attr("target")&&h&&!a.isDefaultPrevented()&&(a.preventDefault(),h!=d.url()&&(g.$$parse(h),c.$apply(),Q.angular["ff-684208-preventDefault"]=!0))}}),g.absUrl()!=k&&d.url(g.absUrl(),!0),d.onUrlChange(function(a){g.absUrl()!=a&&(c.$evalAsync(function(){var b=g.absUrl();g.$$parse(a),c.$broadcast("$locationChangeStart",a,b).defaultPrevented?(g.$$parse(b),d.url(b)):h(b)}),c.$$phase||c.$digest())});var l=0;return c.$watch(function(){var a=d.url(),b=g.$$replace;return l&&a==g.absUrl()||(l++,c.$evalAsync(function(){c.$broadcast("$locationChangeStart",g.absUrl(),a).defaultPrevented?g.$$parse(a):(d.url(g.absUrl(),b),h(a))})),g.$$replace=!1,l}),g}]}function ce(){var b=!0,a=this;this.debugEnabled=function(a){return w(a)?(b=a,this):b},this.$get=["$window",function(c){function d(a){return a instanceof Error&&(a.stack?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line)),a}function e(a){var b=c.console||{},e=b[a]||b.log||z;a=!1;try{a=!!e.apply}catch(m){}return a?function(){var a=[];return r(arguments,function(b){a.push(d(b))}),e.apply(b,a)}:function(a,b){e(a,null==b?"":b)}}return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:function(){var c=e("debug");return function(){b&&c.apply(a,arguments)}}()}}]}function da(b,a){if("constructor"===b)throw Aa("isecfld",a);return b}function Za(b,a){if(b){if(b.constructor===b)throw Aa("isecfn",a);if(b.document&&b.location&&b.alert&&b.setInterval)throw Aa("isecwindow",a);if(b.children&&(b.nodeName||b.prop&&b.attr&&b.find))throw Aa("isecdom",a)}return b}function rb(b,a,c,d,e){e=e||{},a=a.split(".");for(var f,h=0;1<a.length;h++){f=da(a.shift(),d);var g=b[f];g||(g={},b[f]=g),b=g,b.then&&e.unwrapPromises&&(ra(d),"$$v"in b||function(a){a.then(function(b){a.$$v=b})}(b),b.$$v===s&&(b.$$v={}),b=b.$$v)}return f=da(a.shift(),d),b[f]=c}function Ec(b,a,c,d,e,f,h){return da(b,f),da(a,f),da(c,f),da(d,f),da(e,f),h.unwrapPromises?function(g,h){var l,k=h&&h.hasOwnProperty(b)?h:g;return null==k?k:((k=k[b])&&k.then&&(ra(f),"$$v"in k||(l=k,l.$$v=s,l.then(function(a){l.$$v=a})),k=k.$$v),a?null==k?s:((k=k[a])&&k.then&&(ra(f),"$$v"in k||(l=k,l.$$v=s,l.then(function(a){l.$$v=a})),k=k.$$v),c?null==k?s:((k=k[c])&&k.then&&(ra(f),"$$v"in k||(l=k,l.$$v=s,l.then(function(a){l.$$v=a})),k=k.$$v),d?null==k?s:((k=k[d])&&k.then&&(ra(f),"$$v"in k||(l=k,l.$$v=s,l.then(function(a){l.$$v=a})),k=k.$$v),e?null==k?s:((k=k[e])&&k.then&&(ra(f),"$$v"in k||(l=k,l.$$v=s,l.then(function(a){l.$$v=a})),k=k.$$v),k):k):k):k):k)}:function(f,h){var k=h&&h.hasOwnProperty(b)?h:f;return null==k?k:(k=k[b],a?null==k?s:(k=k[a],c?null==k?s:(k=k[c],d?null==k?s:(k=k[d],e?null==k?s:k=k[e]:k):k):k):k)}}function Ce(b,a){return da(b,a),function(a,d){return null==a?s:(d&&d.hasOwnProperty(b)?d:a)[b]}}function De(b,a,c){return da(b,c),da(a,c),function(c,e){return null==c?s:(c=(e&&e.hasOwnProperty(b)?e:c)[b],null==c?s:c[a])}}function Fc(b,a,c){if(Ob.hasOwnProperty(b))return Ob[b];var f,d=b.split("."),e=d.length;if(a.unwrapPromises||1!==e)if(a.unwrapPromises||2!==e)if(a.csp)f=6>e?Ec(d[0],d[1],d[2],d[3],d[4],c,a):function(b,f){var h,g=0;do{h=Ec(d[g++],d[g++],d[g++],d[g++],d[g++],c,a)(b,f),f=s,b=h}while(g<e);return h};else{var h="var p;\n";r(d,function(b,d){da(b,c),h+="if(s == null) return undefined;\ns="+(d?"s":'((k&&k.hasOwnProperty("'+b+'"))?k:s)')+'["'+b+'"];\n'+(a.unwrapPromises?'if (s && s.then) {\n pw("'+c.replace(/(["\r\n])/g,"\\$1")+'");\n if (!("$$v" in s)) {\n p=s;\n p.$$v = undefined;\n p.then(function(v) {p.$$v=v;});\n}\n s=s.$$v\n}\n':"")});var h=h+"return s;",g=new Function("s","k","pw",h);g.toString=Y(h),f=a.unwrapPromises?function(a,b){return g(a,b,ra)}:g}else f=De(d[0],d[1],c);else f=Ce(d[0],c);return"hasOwnProperty"!==b&&(Ob[b]=f),f}function de(){var b={},a={csp:!1,unwrapPromises:!1,logPromiseWarnings:!0};this.unwrapPromises=function(b){return w(b)?(a.unwrapPromises=!!b,this):a.unwrapPromises},this.logPromiseWarnings=function(b){return w(b)?(a.logPromiseWarnings=b,this):a.logPromiseWarnings},this.$get=["$filter","$sniffer","$log",function(c,d,e){return a.csp=d.csp,ra=function(b){a.logPromiseWarnings&&!Gc.hasOwnProperty(b)&&(Gc[b]=!0,e.warn("[$parse] Promise found in the expression `"+b+"`. Automatic unwrapping of promises in Angular expressions is deprecated."))},function(d){var e;switch(typeof d){case"string":return b.hasOwnProperty(d)?b[d]:(e=new Pb(a),e=new $a(e,c,a).parse(d,!1),"hasOwnProperty"!==d&&(b[d]=e),e);case"function":return d;default:return z}}}]}function fe(){this.$get=["$rootScope","$exceptionHandler",function(b,a){return Ee(function(a){b.$evalAsync(a)},a)}]}function Ee(b,a){function c(a){return a}function d(a){return h(a)}var e=function(){var k,l,h=[];return l={resolve:function(a){if(h){var c=h;h=s,k=f(a),c.length&&b(function(){for(var a,b=0,d=c.length;b<d;b++)a=c[b],k.then(a[0],a[1],a[2])})}},reject:function(a){l.resolve(g(a))},notify:function(a){if(h){var c=h;h.length&&b(function(){for(var b,d=0,e=c.length;d<e;d++)b=c[d],b[2](a)})}},promise:{then:function(b,f,g){var l=e(),I=function(d){try{l.resolve((F(b)?b:c)(d))}catch(e){l.reject(e),a(e)}},E=function(b){try{l.resolve((F(f)?f:d)(b))}catch(c){l.reject(c),a(c)}},y=function(b){try{l.notify((F(g)?g:c)(b))}catch(d){a(d)}};return h?h.push([I,E,y]):k.then(I,E,y),l.promise},catch:function(a){return this.then(null,a)},finally:function(a){function b(a,c){var d=e();return c?d.resolve(a):d.reject(a),d.promise}function d(e,f){var g=null;try{g=(a||c)()}catch(h){return b(h,!1)}return g&&F(g.then)?g.then(function(){return b(e,f)},function(a){return b(a,!1)}):b(e,f)}return this.then(function(a){return d(a,!0)},function(a){return d(a,!1)})}}}},f=function(a){return a&&F(a.then)?a:{then:function(c){var d=e();return b(function(){d.resolve(c(a))}),d.promise}}},h=function(a){var b=e();return b.reject(a),b.promise},g=function(c){return{then:function(f,g){var h=e();return b(function(){try{h.resolve((F(g)?g:d)(c))}catch(b){h.reject(b),a(b)}}),h.promise}}};return{defer:e,reject:h,when:function(g,k,l,n){var p,q=e(),u=function(b){try{return(F(k)?k:c)(b)}catch(d){return a(d),h(d)}},I=function(b){try{return(F(l)?l:d)(b)}catch(c){return a(c),h(c)}},E=function(b){try{return(F(n)?n:c)(b)}catch(d){a(d)}};return b(function(){f(g).then(function(a){p||(p=!0,q.resolve(f(a).then(u,I,E)))},function(a){p||(p=!0,q.resolve(I(a)))},function(a){p||q.notify(E(a))})}),q.promise},all:function(a){var b=e(),c=0,d=J(a)?[]:{};return r(a,function(a,e){c++,f(a).then(function(a){d.hasOwnProperty(e)||(d[e]=a,--c||b.resolve(d))},function(a){d.hasOwnProperty(e)||b.reject(a)})}),0===c&&b.resolve(d),b.promise}}}function me(){this.$get=["$window","$timeout",function(b,a){var c=b.requestAnimationFrame||b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame,d=b.cancelAnimationFrame||b.webkitCancelAnimationFrame||b.mozCancelAnimationFrame||b.webkitCancelRequestAnimationFrame,e=!!c,f=e?function(a){var b=c(a);return function(){d(b)}}:function(b){var c=a(b,16.66,!1);return function(){a.cancel(c)}};return f.supported=e,f}]}function ee(){var b=10,a=C("$rootScope"),c=null;this.digestTtl=function(a){return arguments.length&&(b=a),b},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(d,e,f,h){function g(){this.$id=db(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.this=this.$root=this,this.$$destroyed=!1,this.$$asyncQueue=[],this.$$postDigestQueue=[],this.$$listeners={},this.$$listenerCount={},this.$$isolateBindings={}}function m(b){if(q.$$phase)throw a("inprog",q.$$phase);q.$$phase=b}function k(a,b){var c=f(a);return Qa(c,b),c}function l(a,b,c){do{a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c]}while(a=a.$parent)}function n(){}g.prototype={constructor:g,$new:function(a){return a?(a=new g,a.$root=this.$root,a.$$asyncQueue=this.$$asyncQueue,a.$$postDigestQueue=this.$$postDigestQueue):(a=function(){},a.prototype=this,a=new a,a.$id=db()),a.this=a,a.$$listeners={},a.$$listenerCount={},a.$parent=this,a.$$watchers=a.$$nextSibling=a.$$childHead=a.$$childTail=null,a.$$prevSibling=this.$$childTail,this.$$childHead?this.$$childTail=this.$$childTail.$$nextSibling=a:this.$$childHead=this.$$childTail=a,a},$watch:function(a,b,d){var e=k(a,"watch"),f=this.$$watchers,g={fn:b,last:n,get:e,exp:a,eq:!!d};if(c=null,!F(b)){var h=k(b||z,"listener");g.fn=function(a,b,c){h(c)}}if("string"==typeof a&&e.constant){var m=g.fn;g.fn=function(a,b,c){m.call(this,a,b,c),Da(f,g)}}return f||(f=this.$$watchers=[]),f.unshift(g),function(){Da(f,g),c=null}},$watchCollection:function(a,b){var d,e,g,c=this,h=1<b.length,k=0,m=f(a),l=[],n={},q=!0,r=0;return this.$watch(function(){d=m(c);var a,b;if(W(d))if(cb(d))for(e!==l&&(e=l,r=e.length=0,k++),a=d.length,r!==a&&(k++,e.length=r=a),b=0;b<a;b++)e[b]!==e[b]&&d[b]!==d[b]||e[b]===d[b]||(k++,e[b]=d[b]);else{e!==n&&(e=n={},r=0,k++),a=0;for(b in d)d.hasOwnProperty(b)&&(a++,e.hasOwnProperty(b)?e[b]!==d[b]&&(k++,e[b]=d[b]):(r++,e[b]=d[b],k++));if(r>a)for(b in k++,e)e.hasOwnProperty(b)&&!d.hasOwnProperty(b)&&(r--,delete e[b])}else e!==d&&(e=d,k++);return k},function(){if(q?(q=!1,b(d,d,c)):b(d,g,c),h)if(W(d))if(cb(d)){g=Array(d.length);for(var a=0;a<d.length;a++)g[a]=d[a]}else for(a in g={},d)Hc.call(d,a)&&(g[a]=d[a]);else g=d})},$digest:function(){var d,f,g,h,r,x,R,w,t,B,k=this.$$asyncQueue,l=this.$$postDigestQueue,s=b,M=[];m("$digest"),c=null;do{for(x=!1,R=this;k.length;){try{B=k.shift(),B.scope.$eval(B.expression)}catch(v){q.$$phase=null,e(v)}c=null}a:do{if(h=R.$$watchers)for(r=h.length;r--;)try{if(d=h[r])if((f=d.get(R))===(g=d.last)||(d.eq?va(f,g):"number"==typeof f&&"number"==typeof g&&isNaN(f)&&isNaN(g))){if(d===c){x=!1;break a}}else x=!0,c=d,d.last=d.eq?$(f):f,d.fn(f,g===n?f:g,R),5>s&&(w=4-s,M[w]||(M[w]=[]),t=F(d.exp)?"fn: "+(d.exp.name||d.exp.toString()):d.exp,t+="; newVal: "+pa(f)+"; oldVal: "+pa(g),M[w].push(t))}catch(A){q.$$phase=null,e(A)}if(!(h=R.$$childHead||R!==this&&R.$$nextSibling))for(;R!==this&&!(h=R.$$nextSibling);)R=R.$parent}while(R=h);if((x||k.length)&&!s--)throw q.$$phase=null,a("infdig",b,pa(M))}while(x||k.length);for(q.$$phase=null;l.length;)try{l.shift()()}catch(z){e(z)}},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this!==q&&(r(this.$$listenerCount,gb(null,l,this)),a.$$childHead==this&&(a.$$childHead=this.$$nextSibling),a.$$childTail==this&&(a.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null)}},$eval:function(a,b){return f(a)(this,b)},$evalAsync:function(a){q.$$phase||q.$$asyncQueue.length||h.defer(function(){q.$$asyncQueue.length&&q.$digest()}),this.$$asyncQueue.push({scope:this,expression:a})},$$postDigest:function(a){this.$$postDigestQueue.push(a)},$apply:function(a){try{return m("$apply"),this.$eval(a)}catch(b){e(b)}finally{q.$$phase=null;try{q.$digest()}catch(c){throw e(c),c}}},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=c=[]),c.push(b);var d=this;do{d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++}while(d=d.$parent);var e=this;return function(){c[fb(c,b)]=null,l(e,1,a)}},$emit:function(a,b){var d,l,m,c=[],f=this,g=!1,h={name:a,targetScope:f,stopPropagation:function(){g=!0},preventDefault:function(){h.defaultPrevented=!0},defaultPrevented:!1},k=[h].concat(wa.call(arguments,1));do{for(d=f.$$listeners[a]||c,h.currentScope=f,l=0,m=d.length;l<m;l++)if(d[l])try{d[l].apply(null,k)}catch(n){e(n)}else d.splice(l,1),l--,m--;if(g)break;f=f.$parent}while(f);return h},$broadcast:function(a,b){for(var h,k,c=this,d=this,f={name:a,targetScope:this,preventDefault:function(){f.defaultPrevented=!0},defaultPrevented:!1},g=[f].concat(wa.call(arguments,1));c=d;){for(f.currentScope=c,d=c.$$listeners[a]||[],h=0,k=d.length;h<k;h++)if(d[h])try{d[h].apply(null,g)}catch(l){e(l)}else d.splice(h,1),h--,k--;if(!(d=c.$$listenerCount[a]&&c.$$childHead||c!==this&&c.$$nextSibling))for(;c!==this&&!(d=c.$$nextSibling);)c=c.$parent}return f}};var q=new g;return q}]}function id(){var b=/^\s*(https?|ftp|mailto|tel|file):/,a=/^\s*(https?|ftp|file|blob):|data:image\//;this.aHrefSanitizationWhitelist=function(a){return w(a)?(b=a,this):b},this.imgSrcSanitizationWhitelist=function(b){return w(b)?(a=b,this):a},this.$get=function(){return function(c,d){var f,e=d?a:b;return V&&!(8<=V)||""===(f=qa(c).href)||f.match(e)?c:"unsafe:"+f}}}function Fe(b){if("self"===b)return b;if(A(b)){if(-1<b.indexOf("***"))throw sa("iwcard",b);return b=b.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08").replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),RegExp("^"+b+"$")}if(eb(b))return RegExp("^"+b.source+"$");throw sa("imatcher")}function Ic(b){var a=[];return w(b)&&r(b,function(b){a.push(Fe(b))}),a}function he(){this.SCE_CONTEXTS=ea;var b=["self"],a=[];this.resourceUrlWhitelist=function(a){return arguments.length&&(b=Ic(a)),b},this.resourceUrlBlacklist=function(b){return arguments.length&&(a=Ic(b)),a},this.$get=["$injector",function(c){function d(a){var b=function(a){this.$$unwrapTrustedValue=function(){return a}};return a&&(b.prototype=new a),b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},b}var e=function(a){throw sa("unsafe")};c.has("$sanitize")&&(e=c.get("$sanitize"));var f=d(),h={};return h[ea.HTML]=d(f),h[ea.CSS]=d(f),h[ea.URL]=d(f),h[ea.JS]=d(f),h[ea.RESOURCE_URL]=d(h[ea.URL]),{trustAs:function(a,b){var c=h.hasOwnProperty(a)?h[a]:null;if(!c)throw sa("icontext",a,b);if(null===b||b===s||""===b)return b;if("string"!=typeof b)throw sa("itype",a);return new c(b)},getTrusted:function(c,d){if(null===d||d===s||""===d)return d;var f=h.hasOwnProperty(c)?h[c]:null;if(f&&d instanceof f)return d.$$unwrapTrustedValue();if(c===ea.RESOURCE_URL){var l,n,f=qa(d.toString()),q=!1;for(l=0,n=b.length;l<n;l++)if("self"===b[l]?Kb(f):b[l].exec(f.href)){q=!0;break}if(q)for(l=0,n=a.length;l<n;l++)if("self"===a[l]?Kb(f):a[l].exec(f.href)){q=!1;break}if(q)return d;throw sa("insecurl",d.toString())}if(c===ea.HTML)return e(d);throw sa("unsafe")},valueOf:function(a){return a instanceof f?a.$$unwrapTrustedValue():a}}}]}function ge(){var b=!0;this.enabled=function(a){return arguments.length&&(b=!!a),b},this.$get=["$parse","$sniffer","$sceDelegate",function(a,c,d){if(b&&c.msie&&8>c.msieDocumentMode)throw sa("iequirks");var e=$(ea);e.isEnabled=function(){return b},e.trustAs=d.trustAs,e.getTrusted=d.getTrusted,e.valueOf=d.valueOf,b||(e.trustAs=e.getTrusted=function(a,b){return b},e.valueOf=Ca),e.parseAs=function(b,c){var d=a(c);return d.literal&&d.constant?d:function(a,c){return e.getTrusted(b,d(a,c))}};var f=e.parseAs,h=e.getTrusted,g=e.trustAs;return r(ea,function(a,b){var c=O(b);e[Sa("parse_as_"+c)]=function(b){return f(a,b)},e[Sa("get_trusted_"+c)]=function(b){return h(a,b)},e[Sa("trust_as_"+c)]=function(b){return g(a,b)}}),e}]}function ie(){this.$get=["$window","$document",function(b,a){var g,c={},d=P((/android (\d+)/.exec(O((b.navigator||{}).userAgent))||[])[1]),e=/Boxee/i.test((b.navigator||{}).userAgent),f=a[0]||{},h=f.documentMode,m=/^(Moz|webkit|O|ms)(?=[A-Z])/,k=f.body&&f.body.style,l=!1,n=!1;if(k){for(var q in k)if(l=m.exec(q)){g=l[0],g=g.substr(0,1).toUpperCase()+g.substr(1);break}g||(g="WebkitOpacity"in k&&"webkit"),l=!!("transition"in k||g+"Transition"in k),n=!!("animation"in k||g+"Animation"in k),!d||l&&n||(l=A(f.body.style.webkitTransition),n=A(f.body.style.webkitAnimation))}return{history:!(!b.history||!b.history.pushState||4>d||e),hashchange:"onhashchange"in b&&(!h||7<h),hasEvent:function(a){if("input"==a&&9==V)return!1;if(D(c[a])){var b=f.createElement("div");c[a]="on"+a in b}return c[a]},csp:Xb(),vendorPrefix:g,transitions:l,animations:n,android:d,msie:V,msieDocumentMode:h}}]}function ke(){this.$get=["$rootScope","$browser","$q","$exceptionHandler",function(b,a,c,d){function e(e,g,m){var k=c.defer(),l=k.promise,n=w(m)&&!m;return g=a.defer(function(){try{k.resolve(e())}catch(a){k.reject(a),d(a)}finally{delete f[l.$$timeoutId]}n||b.$apply()},g),l.$$timeoutId=g,f[g]=k,l}var f={};return e.cancel=function(b){return!!(b&&b.$$timeoutId in f)&&(f[b.$$timeoutId].reject("canceled"),delete f[b.$$timeoutId],a.defer.cancel(b.$$timeoutId))},e}]}function qa(b,a){var c=b;return V&&(S.setAttribute("href",c),c=S.href),S.setAttribute("href",c),{href:S.href,protocol:S.protocol?S.protocol.replace(/:$/,""):"",host:S.host,search:S.search?S.search.replace(/^\?/,""):"",hash:S.hash?S.hash.replace(/^#/,""):"",hostname:S.hostname,port:S.port,pathname:"/"===S.pathname.charAt(0)?S.pathname:"/"+S.pathname}}function Kb(b){return b=A(b)?qa(b):b,b.protocol===Jc.protocol&&b.host===Jc.host}function le(){this.$get=Y(Q)}function ic(b){function a(d,e){if(W(d)){var f={};return r(d,function(b,c){f[c]=a(c,b)}),f}return b.factory(d+c,e)}var c="Filter";this.register=a,this.$get=["$injector",function(a){return function(b){return a.get(b+c)}}],a("currency",Kc),a("date",Lc),a("filter",Ge),a("json",He),a("limitTo",Ie),a("lowercase",Je),a("number",Mc),a("orderBy",Nc),a("uppercase",Ke)}function Ge(){return function(b,a,c){if(!J(b))return b;var d=typeof c,e=[];e.check=function(a){for(var b=0;b<e.length;b++)if(!e[b](a))return!1;return!0},"function"!==d&&(c="boolean"===d&&c?function(a,b){return Pa.equals(a,b)}:function(a,b){if(a&&b&&"object"==typeof a&&"object"==typeof b){for(var d in a)if("$"!==d.charAt(0)&&Hc.call(a,d)&&c(a[d],b[d]))return!0;return!1}return b=(""+b).toLowerCase(),-1<(""+a).toLowerCase().indexOf(b)});var f=function(a,b){if("string"==typeof b&&"!"===b.charAt(0))return!f(a,b.substr(1));switch(typeof a){case"boolean":case"number":case"string":return c(a,b);case"object":switch(typeof b){case"object":return c(a,b);default:for(var d in a)if("$"!==d.charAt(0)&&f(a[d],b))return!0}return!1;case"array":for(d=0;d<a.length;d++)if(f(a[d],b))return!0;return!1;default:return!1}};switch(typeof a){case"boolean":case"number":case"string":a={$:a};case"object":for(var h in a)!function(b){void 0!==a[b]&&e.push(function(c){return f("$"==b?c:c&&c[b],a[b])})}(h);break;case"function":e.push(a);break;default:return b}for(d=[],h=0;h<b.length;h++){var g=b[h];e.check(g)&&d.push(g)}return d}}function Kc(b){var a=b.NUMBER_FORMATS;return function(b,d){return D(d)&&(d=a.CURRENCY_SYM),Oc(b,a.PATTERNS[1],a.GROUP_SEP,a.DECIMAL_SEP,2).replace(/\u00A4/g,d)}}function Mc(b){var a=b.NUMBER_FORMATS;return function(b,d){return Oc(b,a.PATTERNS[0],a.GROUP_SEP,a.DECIMAL_SEP,d)}}function Oc(b,a,c,d,e){if(null==b||!isFinite(b)||W(b))return"";var f=0>b;b=Math.abs(b);var h=b+"",g="",m=[],k=!1;if(-1!==h.indexOf("e")){var l=h.match(/([\d\.]+)e(-?)(\d+)/);l&&"-"==l[2]&&l[3]>e+1?h="0":(g=h,k=!0)}if(k)0<e&&-1<b&&1>b&&(g=b.toFixed(e));else{h=(h.split(Pc)[1]||"").length,D(e)&&(e=Math.min(Math.max(a.minFrac,h),a.maxFrac)),h=Math.pow(10,e),b=Math.round(b*h)/h,b=(""+b).split(Pc),h=b[0],b=b[1]||"";var l=0,n=a.lgSize,q=a.gSize;if(h.length>=n+q)for(l=h.length-n,k=0;k<l;k++)0==(l-k)%q&&0!==k&&(g+=c),g+=h.charAt(k);for(k=l;k<h.length;k++)0==(h.length-k)%n&&0!==k&&(g+=c),g+=h.charAt(k);for(;b.length<e;)b+="0";e&&"0"!==e&&(g+=d+b.substr(0,e))}return m.push(f?a.negPre:a.posPre),m.push(g),m.push(f?a.negSuf:a.posSuf),m.join("")}function sb(b,a,c){var d="";for(0>b&&(d="-",b=-b),b=""+b;b.length<a;)b="0"+b;return c&&(b=b.substr(b.length-a)),d+b}function X(b,a,c,d){return c=c||0,function(e){return e=e["get"+b](),(0<c||e>-c)&&(e+=c),0===e&&-12==c&&(e=12),sb(e,a,d)}}function tb(b,a){return function(c,d){var e=c["get"+b]();return d[Ea(a?"SHORT"+b:b)][e]}}function Qc(b){var a=new Date(b,0,1).getDay();return new Date(b,0,(4>=a?5:12)-a)}function Rc(b){return function(a){var c=Qc(a.getFullYear());return a=+new Date(a.getFullYear(),a.getMonth(),a.getDate()+(4-a.getDay()))-+c,a=1+Math.round(a/6048e5),sb(a,b)}}function Lc(b){function a(a){var b;if(b=a.match(c)){a=new Date(0);var f=0,h=0,g=b[8]?a.setUTCFullYear:a.setFullYear,m=b[8]?a.setUTCHours:a.setHours;b[9]&&(f=P(b[9]+b[10]),h=P(b[9]+b[11])),g.call(a,P(b[1]),P(b[2])-1,P(b[3])),f=P(b[4]||0)-f,h=P(b[5]||0)-h,g=P(b[6]||0),b=Math.round(1e3*parseFloat("0."+(b[7]||0))),m.call(a,f,h,g,b)}return a}var c=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,e){var g,m,f="",h=[];if(e=e||"mediumDate",e=b.DATETIME_FORMATS[e]||e,A(c)&&(c=Le.test(c)?P(c):a(c)),zb(c)&&(c=new Date(c)),!oa(c))return c;for(;e;)(m=Me.exec(e))?(h=h.concat(wa.call(m,1)),e=h.pop()):(h.push(e),e=null);return r(h,function(a){g=Ne[a],f+=g?g(c,b.DATETIME_FORMATS):a.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),f}}function He(){return function(b){return pa(b,!0)}}function Ie(){return function(b,a){if(!J(b)&&!A(b))return b;if(a=P(a),A(b))return a?0<=a?b.slice(0,a):b.slice(a,b.length):"";var d,e,c=[];for(a>b.length?a=b.length:a<-b.length&&(a=-b.length),0<a?(d=0,e=a):(d=b.length+a,e=b.length);d<e;d++)c.push(b[d]);return c}}function Nc(b){return function(a,c,d){function e(a,b){return Oa(b)?function(b,c){return a(c,b)}:a}function f(a,b){var c=typeof a,d=typeof b;return c==d?("string"==c&&(a=a.toLowerCase(),b=b.toLowerCase()),a===b?0:a<b?-1:1):c<d?-1:1}if(!J(a)||!c)return a;c=J(c)?c:[c],c=ad(c,function(a){var c=!1,d=a||Ca;if(A(a)&&("+"!=a.charAt(0)&&"-"!=a.charAt(0)||(c="-"==a.charAt(0),a=a.substring(1)),d=b(a),d.constant)){var g=d();return e(function(a,b){return f(a[g],b[g])},c)}return e(function(a,b){return f(d(a),d(b))},c)});for(var h=[],g=0;g<a.length;g++)h.push(a[g]);return h.sort(e(function(a,b){for(var d=0;d<c.length;d++){var e=c[d](a,b);if(0!==e)return e}return 0},d))}}
function ta(b){return F(b)&&(b={link:b}),b.restrict=b.restrict||"AC",Y(b)}function Sc(b,a,c,d){function e(a,c){c=c?"-"+hb(c,"-"):"",d.removeClass(b,(a?ub:vb)+c),d.addClass(b,(a?vb:ub)+c)}var f=this,h=b.parent().controller("form")||wb,g=0,m=f.$error={},k=[];f.$name=a.name||a.ngForm,f.$dirty=!1,f.$pristine=!0,f.$valid=!0,f.$invalid=!1,h.$addControl(f),b.addClass(La),e(!0),f.$addControl=function(a){ya(a.$name,"input"),k.push(a),a.$name&&(f[a.$name]=a)},f.$removeControl=function(a){a.$name&&f[a.$name]===a&&delete f[a.$name],r(m,function(b,c){f.$setValidity(c,!0,a)}),Da(k,a)},f.$setValidity=function(a,b,c){var d=m[a];if(b)d&&(Da(d,c),d.length||(g--,g||(e(b),f.$valid=!0,f.$invalid=!1),m[a]=!1,e(!0,a),h.$setValidity(a,!0,f)));else{if(g||e(b),d){if(-1!=fb(d,c))return}else m[a]=d=[],g++,e(!1,a),h.$setValidity(a,!1,f);d.push(c),f.$valid=!1,f.$invalid=!0}},f.$setDirty=function(){d.removeClass(b,La),d.addClass(b,xb),f.$dirty=!0,f.$pristine=!1,h.$setDirty()},f.$setPristine=function(){d.removeClass(b,xb),d.addClass(b,La),f.$dirty=!1,f.$pristine=!0,r(k,function(a){a.$setPristine()})}}function na(b,a,c,d){return b.$setValidity(a,c),c?d:s}function Oe(b,a,c){var d=c.prop("validity");W(d)&&(c=function(c){if(b.$error[a]||!(d.badInput||d.customError||d.typeMismatch)||d.valueMissing)return c;b.$setValidity(a,!1)},b.$parsers.push(c),b.$formatters.push(c))}function ab(b,a,c,d,e,f){var h=a.prop("validity");if(!e.android){var g=!1;a.on("compositionstart",function(a){g=!0}),a.on("compositionend",function(){g=!1,m()})}var m=function(){if(!g){var e=a.val();Oa(c.ngTrim||"T")&&(e=aa(e)),(d.$viewValue!==e||h&&""===e&&!h.valueMissing)&&(b.$$phase?d.$setViewValue(e):b.$apply(function(){d.$setViewValue(e)}))}};if(e.hasEvent("input"))a.on("input",m);else{var k,l=function(){k||(k=f.defer(function(){m(),k=null}))};a.on("keydown",function(a){91===(a=a.keyCode)||15<a&&19>a||37<=a&&40>=a||l()}),e.hasEvent("paste")&&a.on("paste cut",l)}a.on("change",m),d.$render=function(){a.val(d.$isEmpty(d.$viewValue)?"":d.$viewValue)};var n=c.ngPattern;if(n&&((e=n.match(/^\/(.*)\/([gim]*)$/))?(n=RegExp(e[1],e[2]),e=function(a){return na(d,"pattern",d.$isEmpty(a)||n.test(a),a)}):e=function(c){var e=b.$eval(n);if(!e||!e.test)throw C("ngPattern")("noregexp",n,e,fa(a));return na(d,"pattern",d.$isEmpty(c)||e.test(c),c)},d.$formatters.push(e),d.$parsers.push(e)),c.ngMinlength){var q=P(c.ngMinlength);e=function(a){return na(d,"minlength",d.$isEmpty(a)||a.length>=q,a)},d.$parsers.push(e),d.$formatters.push(e)}if(c.ngMaxlength){var p=P(c.ngMaxlength);e=function(a){return na(d,"maxlength",d.$isEmpty(a)||a.length<=p,a)},d.$parsers.push(e),d.$formatters.push(e)}}function yb(b,a){return function(c){var d;return oa(c)?c:A(c)&&(b.lastIndex=0,c=b.exec(c))?(c.shift(),d={yyyy:0,MM:1,dd:1,HH:0,mm:0},r(c,function(b,c){c<a.length&&(d[a[c]]=+b)}),new Date(d.yyyy,d.MM-1,d.dd,d.HH,d.mm)):NaN}}function bb(b,a,c,d){return function(e,f,h,g,m,k,l){ab(e,f,h,g,m,k),g.$parsers.push(function(d){return g.$isEmpty(d)?(g.$setValidity(b,!0),null):a.test(d)?(g.$setValidity(b,!0),c(d)):(g.$setValidity(b,!1),s)}),g.$formatters.push(function(a){return oa(a)?l("date")(a,d):""}),h.min&&(e=function(a){var b=g.$isEmpty(a)||c(a)>=c(h.min);return g.$setValidity("min",b),b?a:s},g.$parsers.push(e),g.$formatters.push(e)),h.max&&(e=function(a){var b=g.$isEmpty(a)||c(a)<=c(h.max);return g.$setValidity("max",b),b?a:s},g.$parsers.push(e),g.$formatters.push(e))}}function Qb(b,a){return b="ngClass"+b,function(){return{restrict:"AC",link:function(c,d,e){function f(b){if(!0===a||c.$index%2===a){var d=h(b||"");g?va(b,g)||e.$updateClass(d,h(g)):e.$addClass(d)}g=$(b)}function h(a){if(J(a))return a.join(" ");if(W(a)){var b=[];return r(a,function(a,c){a&&b.push(c)}),b.join(" ")}return a}var g;c.$watch(e[b],f,!0),e.$observe("class",function(a){f(c.$eval(e[b]))}),"ngClass"!==b&&c.$watch("$index",function(d,f){var g=1&d;if(g!==f&1){var n=h(c.$eval(e[b]));g===a?e.$addClass(n):e.$removeClass(n)}})}}}}var V,v,Fa,Ra,Ja,O=function(b){return A(b)?b.toLowerCase():b},Hc=Object.prototype.hasOwnProperty,Ea=function(b){return A(b)?b.toUpperCase():b},wa=[].slice,Pe=[].push,ua=Object.prototype.toString,Na=C("ng"),Pa=Q.angular||(Q.angular={}),ia=["0","0","0"];V=P((/msie (\d+)/.exec(O(navigator.userAgent))||[])[1]),isNaN(V)&&(V=P((/trident\/.*; rv:(\d+)/.exec(O(navigator.userAgent))||[])[1])),z.$inject=[],Ca.$inject=[];var aa=function(){return String.prototype.trim?function(b){return A(b)?b.trim():b}:function(b){return A(b)?b.replace(/^\s\s*/,"").replace(/\s\s*$/,""):b}}();Ja=9>V?function(b){return b=b.nodeName?b:b[0],b.scopeName&&"HTML"!=b.scopeName?Ea(b.scopeName+":"+b.nodeName):b.nodeName}:function(b){return b.nodeName?b.nodeName:b[0].nodeName};var dd=/[A-Z]/g,gd={full:"1.3.0-beta.3",major:1,minor:3,dot:0,codeName:"emotional-waffles"},Ua=N.cache={},ib=N.expando="ng-"+(new Date).getTime(),qe=1,pb=Q.document.addEventListener?function(b,a,c){b.addEventListener(a,c,!1)}:function(b,a,c){b.attachEvent("on"+a,c)},Ta=Q.document.removeEventListener?function(b,a,c){b.removeEventListener(a,c,!1)}:function(b,a,c){b.detachEvent("on"+a,c)};N._data=function(b){return this.cache[b[this.expando]]||{}};var oe=/([\:\-\_]+(.))/g,pe=/^moz([A-Z])/,Fb=C("jqLite"),Ia=N.prototype={ready:function(b){function a(){c||(c=!0,b())}var c=!1;"complete"===T.readyState?setTimeout(a):(this.on("DOMContentLoaded",a),N(Q).on("load",a))},toString:function(){var b=[];return r(this,function(a){b.push(""+a)}),"["+b.join(", ")+"]"},eq:function(b){return v(0<=b?this[b]:this[this.length+b])},length:0,push:Pe,sort:[].sort,splice:[].splice},mb={};r("multiple selected checked disabled readOnly required open".split(" "),function(b){mb[O(b)]=b});var pc={};r("input select option textarea button form details".split(" "),function(b){pc[Ea(b)]=!0}),r({data:lc,inheritedData:lb,scope:function(b){return v(b).data("$scope")||lb(b.parentNode||b,["$isolateScope","$scope"])},isolateScope:function(b){return v(b).data("$isolateScope")||v(b).data("$isolateScopeNoTemplate")},controller:mc,injector:function(b){return lb(b,"$injector")},removeAttr:function(b,a){b.removeAttribute(a)},hasClass:Ib,css:function(b,a,c){if(a=Sa(a),!w(c)){var d;return 8>=V&&""===(d=b.currentStyle&&b.currentStyle[a])&&(d="auto"),d=d||b.style[a],8>=V&&(d=""===d?s:d),d}b.style[a]=c},attr:function(b,a,c){var d=O(a);if(mb[d]){if(!w(c))return b[a]||(b.attributes.getNamedItem(a)||z).specified?d:s;c?(b[a]=!0,b.setAttribute(a,d)):(b[a]=!1,b.removeAttribute(d))}else if(w(c))b.setAttribute(a,c);else if(b.getAttribute)return b=b.getAttribute(a,2),null===b?s:b},prop:function(b,a,c){if(!w(c))return b[a];b[a]=c},text:function(){function b(b,d){var e=a[b.nodeType];if(D(d))return e?b[e]:"";b[e]=d}var a=[];return 9>V?(a[1]="innerText",a[3]="nodeValue"):a[1]=a[3]="textContent",b.$dv="",b}(),val:function(b,a){if(D(a)){if("SELECT"===Ja(b)&&b.multiple){var c=[];return r(b.options,function(a){a.selected&&c.push(a.value||a.text)}),0===c.length?null:c}return b.value}b.value=a},html:function(b,a){if(D(a))return b.innerHTML;for(var c=0,d=b.childNodes;c<d.length;c++)Ga(d[c]);b.innerHTML=a},empty:nc},function(b,a){N.prototype[a]=function(a,d){var e,f;if(b!==nc&&(2==b.length&&b!==Ib&&b!==mc?a:d)===s){if(W(a)){for(e=0;e<this.length;e++)if(b===lc)b(this[e],a);else for(f in a)b(this[e],f,a[f]);return this}e=b.$dv,f=e===s?Math.min(this.length,1):this.length;for(var h=0;h<f;h++){var g=b(this[h],a,d);e=e?e+g:g}return e}for(e=0;e<this.length;e++)b(this[e],a,d);return this}}),r({removeData:jc,dealoc:Ga,on:function a(c,d,e,f){if(w(f))throw Fb("onargs");var h=ja(c,"events"),g=ja(c,"handle");h||ja(c,"events",h={}),g||ja(c,"handle",g=re(c,h)),r(d.split(" "),function(d){var f=h[d];if(!f){if("mouseenter"==d||"mouseleave"==d){var l=T.body.contains||T.body.compareDocumentPosition?function(a,c){var d=9===a.nodeType?a.documentElement:a,e=c&&c.parentNode;return a===e||!(!e||1!==e.nodeType||!(d.contains?d.contains(e):a.compareDocumentPosition&&16&a.compareDocumentPosition(e)))}:function(a,c){if(c)for(;c=c.parentNode;)if(c===a)return!0;return!1};h[d]=[],a(c,{mouseleave:"mouseout",mouseenter:"mouseover"}[d],function(a){var c=a.relatedTarget;c&&(c===this||l(this,c))||g(a,d)})}else pb(c,d,g),h[d]=[];f=h[d]}f.push(e)})},off:kc,one:function(a,c,d){a=v(a),a.on(c,function f(){a.off(c,d),a.off(c,f)}),a.on(c,d)},replaceWith:function(a,c){var d,e=a.parentNode;Ga(a),r(new N(c),function(c){d?e.insertBefore(c,d.nextSibling):e.replaceChild(c,a),d=c})},children:function(a){var c=[];return r(a.childNodes,function(a){1===a.nodeType&&c.push(a)}),c},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,c){r(new N(c),function(c){1!==a.nodeType&&11!==a.nodeType||a.appendChild(c)})},prepend:function(a,c){if(1===a.nodeType){var d=a.firstChild;r(new N(c),function(c){a.insertBefore(c,d)})}},wrap:function(a,c){c=v(c)[0];var d=a.parentNode;d&&d.replaceChild(c,a),c.appendChild(a)},remove:function(a){Ga(a);var c=a.parentNode;c&&c.removeChild(a)},after:function(a,c){var d=a,e=a.parentNode;r(new N(c),function(a){e.insertBefore(a,d.nextSibling),d=a})},addClass:kb,removeClass:jb,toggleClass:function(a,c,d){c&&r(c.split(" "),function(c){var f=d;D(f)&&(f=!Ib(a,c)),(f?kb:jb)(a,c)})},parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},next:function(a){if(a.nextElementSibling)return a.nextElementSibling;for(a=a.nextSibling;null!=a&&1!==a.nodeType;)a=a.nextSibling;return a},find:function(a,c){return a.getElementsByTagName?a.getElementsByTagName(c):[]},clone:Hb,triggerHandler:function(a,c,d){c=(ja(a,"events")||{})[c],d=d||[];var e=[{preventDefault:z,stopPropagation:z}];r(c,function(c){c.apply(a,e.concat(d))})}},function(a,c){N.prototype[c]=function(c,e,f){for(var h,g=0;g<this.length;g++)D(h)?(h=a(this[g],c,e,f),w(h)&&(h=v(h))):Gb(h,a(this[g],c,e,f));return w(h)?h:this},N.prototype.bind=N.prototype.on,N.prototype.unbind=N.prototype.off}),Va.prototype={put:function(a,c){this[Ha(a)]=c},get:function(a){return this[Ha(a)]},remove:function(a){var c=this[a=Ha(a)];return delete this[a],c}};var te=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,ue=/,/,ve=/^\s*(_?)(\S+?)\1\s*$/,se=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Wa=C("$injector"),Qe=C("$animate"),Sd=["$provide",function(a){this.$$selectors={},this.register=function(c,d){var e=c+"-animation";if(c&&"."!=c.charAt(0))throw Qe("notcsel",c);this.$$selectors[c.substr(1)]=e,a.factory(e,d)},this.classNameFilter=function(a){return 1===arguments.length&&(this.$$classNameFilter=a instanceof RegExp?a:null),this.$$classNameFilter},this.$get=["$timeout","$$asyncCallback",function(a,d){return{enter:function(a,c,h,g){h?h.after(a):(c&&c[0]||(c=h.parent()),c.append(a)),g&&d(g)},leave:function(a,c){a.remove(),c&&d(c)},move:function(a,c,d,g){this.enter(a,c,d,g)},addClass:function(a,c,h){c=A(c)?c:J(c)?c.join(" "):"",r(a,function(a){kb(a,c)}),h&&d(h)},removeClass:function(a,c,h){c=A(c)?c:J(c)?c.join(" "):"",r(a,function(a){jb(a,c)}),h&&d(h)},setClass:function(a,c,h,g){r(a,function(a){kb(a,c),jb(a,h)}),g&&d(g)},enabled:z}}]}],ha=C("$compile");ec.$inject=["$provide","$$sanitizeUriProvider"];var ye=/^(x[\:\-_]|data[\:\-_])/i,xc=C("$interpolate"),Re=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,Be={http:80,https:443,ftp:21},Mb=C("$location");Cc.prototype=Nb.prototype=Bc.prototype={$$html5:!1,$$replace:!1,absUrl:qb("$$absUrl"),url:function(a,c){if(D(a))return this.$$url;var d=Re.exec(a);return d[1]&&this.path(decodeURIComponent(d[1])),(d[2]||d[1])&&this.search(d[3]||""),this.hash(d[5]||"",c),this},protocol:qb("$$protocol"),host:qb("$$host"),port:qb("$$port"),path:Dc("$$path",function(a){return"/"==a.charAt(0)?a:"/"+a}),search:function(a,c){switch(arguments.length){case 0:return this.$$search;case 1:if(A(a))this.$$search=$b(a);else{if(!W(a))throw Mb("isrcharg");this.$$search=a}break;default:D(c)||null===c?delete this.$$search[a]:this.$$search[a]=c}return this.$$compose(),this},hash:Dc("$$hash",Ca),replace:function(){return this.$$replace=!0,this}};var ra,Aa=C("$parse"),Gc={},Ma={null:function(){return null},true:function(){return!0},false:function(){return!1},undefined:z,"+":function(a,c,d,e){return d=d(a,c),e=e(a,c),w(d)?w(e)?d+e:d:w(e)?e:s},"-":function(a,c,d,e){return d=d(a,c),e=e(a,c),(w(d)?d:0)-(w(e)?e:0)},"*":function(a,c,d,e){return d(a,c)*e(a,c)},"/":function(a,c,d,e){return d(a,c)/e(a,c)},"%":function(a,c,d,e){return d(a,c)%e(a,c)},"^":function(a,c,d,e){return d(a,c)^e(a,c)},"=":z,"===":function(a,c,d,e){return d(a,c)===e(a,c)},"!==":function(a,c,d,e){return d(a,c)!==e(a,c)},"==":function(a,c,d,e){return d(a,c)==e(a,c)},"!=":function(a,c,d,e){return d(a,c)!=e(a,c)},"<":function(a,c,d,e){return d(a,c)<e(a,c)},">":function(a,c,d,e){return d(a,c)>e(a,c)},"<=":function(a,c,d,e){return d(a,c)<=e(a,c)},">=":function(a,c,d,e){return d(a,c)>=e(a,c)},"&&":function(a,c,d,e){return d(a,c)&&e(a,c)},"||":function(a,c,d,e){return d(a,c)||e(a,c)},"&":function(a,c,d,e){return d(a,c)&e(a,c)},"|":function(a,c,d,e){return e(a,c)(a,c,d(a,c))},"!":function(a,c,d){return!d(a,c)}},Se={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},Pb=function(a){this.options=a};Pb.prototype={constructor:Pb,lex:function(a){this.text=a,this.index=0,this.ch=s,this.lastCh=":",this.tokens=[];var c;for(a=[];this.index<this.text.length;){if(this.ch=this.text.charAt(this.index),this.is("\"'"))this.readString(this.ch);else if(this.isNumber(this.ch)||this.is(".")&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(this.ch))this.readIdent(),this.was("{,")&&"{"===a[0]&&(c=this.tokens[this.tokens.length-1])&&(c.json=-1===c.text.indexOf("."));else if(this.is("(){}[].,;:?"))this.tokens.push({index:this.index,text:this.ch,json:this.was(":[,")&&this.is("{[")||this.is("}]:,")}),this.is("{[")&&a.unshift(this.ch),this.is("}]")&&a.shift(),this.index++;else{if(this.isWhitespace(this.ch)){this.index++;continue}var d=this.ch+this.peek(),e=d+this.peek(2),f=Ma[this.ch],h=Ma[d],g=Ma[e];g?(this.tokens.push({index:this.index,text:e,fn:g}),this.index+=3):h?(this.tokens.push({index:this.index,text:d,fn:h}),this.index+=2):f?(this.tokens.push({index:this.index,text:this.ch,fn:f,json:this.was("[,:")&&this.is("+-")}),this.index+=1):this.throwError("Unexpected next character ",this.index,this.index+1)}this.lastCh=this.ch}return this.tokens},is:function(a){return-1!==a.indexOf(this.ch)},was:function(a){return-1!==a.indexOf(this.lastCh)},peek:function(a){return a=a||1,this.index+a<this.text.length&&this.text.charAt(this.index+a)},isNumber:function(a){return"0"<=a&&"9">=a},isWhitespace:function(a){return" "===a||"\r"===a||"\t"===a||"\n"===a||"\v"===a||" "===a},isIdent:function(a){return"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"_"===a||"$"===a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,c,d){throw d=d||this.index,c=w(c)?"s "+c+"-"+this.index+" ["+this.text.substring(c,d)+"]":" "+d,Aa("lexerr",a,c,this.text)},readNumber:function(){for(var a="",c=this.index;this.index<this.text.length;){var d=O(this.text.charAt(this.index));if("."==d||this.isNumber(d))a+=d;else{var e=this.peek();if("e"==d&&this.isExpOperator(e))a+=d;else if(this.isExpOperator(d)&&e&&this.isNumber(e)&&"e"==a.charAt(a.length-1))a+=d;else{if(!this.isExpOperator(d)||e&&this.isNumber(e)||"e"!=a.charAt(a.length-1))break;this.throwError("Invalid exponent")}}this.index++}a*=1,this.tokens.push({index:c,text:a,json:!0,fn:function(){return a}})},readIdent:function(){for(var e,f,h,g,a=this,c="",d=this.index;this.index<this.text.length&&("."===(g=this.text.charAt(this.index))||this.isIdent(g)||this.isNumber(g));)"."===g&&(e=this.index),c+=g,this.index++;if(e)for(f=this.index;f<this.text.length;){if("("===(g=this.text.charAt(f))){h=c.substr(e-d+1),c=c.substr(0,e-d),this.index=f;break}if(!this.isWhitespace(g))break;f++}if(d={index:d,text:c},Ma.hasOwnProperty(c))d.fn=Ma[c],d.json=Ma[c];else{var m=Fc(c,this.options,this.text);d.fn=t(function(a,c){return m(a,c)},{assign:function(d,e){return rb(d,c,e,a.text,a.options)}})}this.tokens.push(d),h&&(this.tokens.push({index:e,text:".",json:!1}),this.tokens.push({index:e+1,text:h,json:!1}))},readString:function(a){var c=this.index;this.index++;for(var d="",e=a,f=!1;this.index<this.text.length;){var h=this.text.charAt(this.index),e=e+h;if(f)"u"===h?(h=this.text.substring(this.index+1,this.index+5),h.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+h+"]"),this.index+=4,d+=String.fromCharCode(parseInt(h,16))):d=(f=Se[h])?d+f:d+h,f=!1;else if("\\"===h)f=!0;else{if(h===a)return this.index++,void this.tokens.push({index:c,text:e,string:d,json:!0,fn:function(){return d}});d+=h}this.index++}this.throwError("Unterminated quote",c)}};var $a=function(a,c,d){this.lexer=a,this.$filter=c,this.options=d};$a.ZERO=function(){return 0},$a.prototype={constructor:$a,parse:function(a,c){this.text=a,this.json=c,this.tokens=this.lexer.lex(a),c&&(this.assignment=this.logicalOR,this.functionCall=this.fieldAccess=this.objectIndex=this.filterChain=function(){this.throwError("is not valid json",{text:a,index:0})});var d=c?this.primary():this.statements();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),d.literal=!!d.literal,d.constant=!!d.constant,d},primary:function(){var a;if(this.expect("("))a=this.filterChain(),this.consume(")");else if(this.expect("["))a=this.arrayDeclaration();else if(this.expect("{"))a=this.object();else{var c=this.expect();(a=c.fn)||this.throwError("not a primary expression",c),c.json&&(a.constant=!0,a.literal=!0)}for(var d;c=this.expect("(","[",".");)"("===c.text?(a=this.functionCall(a,d),d=null):"["===c.text?(d=a,a=this.objectIndex(a)):"."===c.text?(d=a,a=this.fieldAccess(a)):this.throwError("IMPOSSIBLE");return a},throwError:function(a,c){throw Aa("syntax",c.text,a,c.index+1,this.text,this.text.substring(c.index))},peekToken:function(){if(0===this.tokens.length)throw Aa("ueoe",this.text);return this.tokens[0]},peek:function(a,c,d,e){if(0<this.tokens.length){var f=this.tokens[0],h=f.text;if(h===a||h===c||h===d||h===e||!(a||c||d||e))return f}return!1},expect:function(a,c,d,e){return!!(a=this.peek(a,c,d,e))&&(this.json&&!a.json&&this.throwError("is not valid json",a),this.tokens.shift(),a)},consume:function(a){this.expect(a)||this.throwError("is unexpected, expecting ["+a+"]",this.peek())},unaryFn:function(a,c){return t(function(d,e){return a(d,e,c)},{constant:c.constant})},ternaryFn:function(a,c,d){return t(function(e,f){return a(e,f)?c(e,f):d(e,f)},{constant:a.constant&&c.constant&&d.constant})},binaryFn:function(a,c,d){return t(function(e,f){return c(e,f,a,d)},{constant:a.constant&&d.constant})},statements:function(){for(var a=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&a.push(this.filterChain()),!this.expect(";"))return 1===a.length?a[0]:function(c,d){for(var e,f=0;f<a.length;f++){var h=a[f];h&&(e=h(c,d))}return e}},filterChain:function(){for(var c,a=this.expression();;){if(!(c=this.expect("|")))return a;a=this.binaryFn(a,c.fn,this.filter())}},filter:function(){for(var a=this.expect(),c=this.$filter(a.text),d=[];;){if(!(a=this.expect(":"))){var e=function(a,e,g){g=[g];for(var m=0;m<d.length;m++)g.push(d[m](a,e));return c.apply(a,g)};return function(){return e}}d.push(this.expression())}},expression:function(){return this.assignment()},assignment:function(){var c,d,a=this.ternary();return(d=this.expect("="))?(a.assign||this.throwError("implies assignment but ["+this.text.substring(0,d.index)+"] can not be assigned to",d),c=this.ternary(),function(d,f){return a.assign(d,c(d,f),f)}):a},ternary:function(){var c,d,a=this.logicalOR();return this.expect("?")?(c=this.ternary(),(d=this.expect(":"))?this.ternaryFn(a,c,this.ternary()):void this.throwError("expected :",d)):a},logicalOR:function(){for(var c,a=this.logicalAND();;){if(!(c=this.expect("||")))return a;a=this.binaryFn(a,c.fn,this.logicalAND())}},logicalAND:function(){var c,a=this.equality();return(c=this.expect("&&"))&&(a=this.binaryFn(a,c.fn,this.logicalAND())),a},equality:function(){var c,a=this.relational();return(c=this.expect("==","!=","===","!=="))&&(a=this.binaryFn(a,c.fn,this.equality())),a},relational:function(){var c,a=this.additive();return(c=this.expect("<",">","<=",">="))&&(a=this.binaryFn(a,c.fn,this.relational())),a},additive:function(){for(var c,a=this.multiplicative();c=this.expect("+","-");)a=this.binaryFn(a,c.fn,this.multiplicative());return a},multiplicative:function(){for(var c,a=this.unary();c=this.expect("*","/","%");)a=this.binaryFn(a,c.fn,this.unary());return a},unary:function(){var a;return this.expect("+")?this.primary():(a=this.expect("-"))?this.binaryFn($a.ZERO,a.fn,this.unary()):(a=this.expect("!"))?this.unaryFn(a.fn,this.unary()):this.primary()},fieldAccess:function(a){var c=this,d=this.expect().text,e=Fc(d,this.options,this.text);return t(function(c,d,g){return e(g||a(c,d))},{assign:function(e,h,g){return rb(a(e,g),d,h,c.text,c.options)}})},objectIndex:function(a){var c=this,d=this.expression();return this.consume("]"),t(function(e,f){var m,h=a(e,f),g=d(e,f);return h?((h=Za(h[g],c.text))&&h.then&&c.options.unwrapPromises&&(m=h,"$$v"in h||(m.$$v=s,m.then(function(a){m.$$v=a})),h=h.$$v),h):s},{assign:function(e,f,h){var g=d(e,h);return Za(a(e,h),c.text)[g]=f}})},functionCall:function(a,c){var d=[];if(")"!==this.peekToken().text)do{d.push(this.expression())}while(this.expect(","));this.consume(")");var e=this;return function(f,h){for(var g=[],m=c?c(f,h):f,k=0;k<d.length;k++)g.push(d[k](f,h));return k=a(f,h,m)||z,Za(m,e.text),Za(k,e.text),g=k.apply?k.apply(m,g):k(g[0],g[1],g[2],g[3],g[4]),Za(g,e.text)}},arrayDeclaration:function(){var a=[],c=!0;if("]"!==this.peekToken().text)do{if(this.peek("]"))break;var d=this.expression();a.push(d),d.constant||(c=!1)}while(this.expect(","));return this.consume("]"),t(function(c,d){for(var h=[],g=0;g<a.length;g++)h.push(a[g](c,d));return h},{literal:!0,constant:c})},object:function(){var a=[],c=!0;if("}"!==this.peekToken().text)do{if(this.peek("}"))break;var d=this.expect(),d=d.string||d.text;this.consume(":");var e=this.expression();a.push({key:d,value:e}),e.constant||(c=!1)}while(this.expect(","));return this.consume("}"),t(function(c,d){for(var e={},m=0;m<a.length;m++){var k=a[m];e[k.key]=k.value(c,d)}return e},{literal:!0,constant:c})}};var Ob={},sa=C("$sce"),ea={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},S=T.createElement("a"),Jc=qa(Q.location.href,!0);ic.$inject=["$provide"],Kc.$inject=["$locale"],Mc.$inject=["$locale"];var Pc=".",Ne={yyyy:X("FullYear",4),yy:X("FullYear",2,0,!0),y:X("FullYear",1),MMMM:tb("Month"),MMM:tb("Month",!0),MM:X("Month",2,1),M:X("Month",1,1),dd:X("Date",2),d:X("Date",1),HH:X("Hours",2),H:X("Hours",1),hh:X("Hours",2,-12),h:X("Hours",1,-12),mm:X("Minutes",2),m:X("Minutes",1),ss:X("Seconds",2),s:X("Seconds",1),sss:X("Milliseconds",3),EEEE:tb("Day"),EEE:tb("Day",!0),a:function(a,c){return 12>a.getHours()?c.AMPMS[0]:c.AMPMS[1]},Z:function(a){return a=-1*a.getTimezoneOffset(),a=(0<=a?"+":"")+(sb(Math[0<a?"floor":"ceil"](a/60),2)+sb(Math.abs(a%60),2))},ww:Rc(2),w:Rc(1)},Me=/((?:[^yMdHhmsaZEw']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|w+))(.*)/,Le=/^\-?\d+$/;Lc.$inject=["$locale"];var Je=Y(O),Ke=Y(Ea);Nc.$inject=["$parse"];var jd=Y({restrict:"E",compile:function(a,c){if(8>=V&&(c.href||c.name||c.$set("href",""),a.append(T.createComment("IE fix"))),!c.href&&!c.xlinkHref&&!c.name)return function(a,c){var f="[object SVGAnimatedString]"===ua.call(c.prop("href"))?"xlink:href":"href";c.on("click",function(a){c.attr(f)||a.preventDefault()})}}}),Db={};r(mb,function(a,c){if("multiple"!=a){var d=ka("ng-"+c);Db[d]=function(){return{priority:100,link:function(a,f,h){a.$watch(h[d],function(a){h.$set(c,!!a)})}}}}}),r(["src","srcset","href"],function(a){var c=ka("ng-"+a);Db[c]=function(){return{priority:99,link:function(d,e,f){var h=a,g=a;"href"===a&&"[object SVGAnimatedString]"===ua.call(e.prop("href"))&&(g="xlinkHref",f.$attr[g]="xlink:href",h=null),f.$observe(c,function(a){a&&(f.$set(g,a),V&&h&&e.prop(h,f[g]))})}}}});var wb={$addControl:z,$removeControl:z,$setValidity:z,$setDirty:z,$setPristine:z};Sc.$inject=["$element","$attrs","$scope","$animate"];var Tc=function(a){return["$timeout",function(c){return{name:"form",restrict:a?"EAC":"E",controller:Sc,compile:function(){return{pre:function(a,e,f,h){if(!f.action){var g=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1};pb(e[0],"submit",g),e.on("$destroy",function(){c(function(){Ta(e[0],"submit",g)},0,!1)})}var m=e.parent().controller("form"),k=f.name||f.ngForm;k&&rb(a,k,h,k),m&&e.on("$destroy",function(){m.$removeControl(h),k&&rb(a,k,s,k),t(h,wb)})}}}}}]},kd=Tc(),xd=Tc(!0),Te=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,Ue=/^[a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9-]+(\.[a-z0-9-]+)*$/i,Ve=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,Uc=/^(\d{4})-(\d{2})-(\d{2})$/,Vc=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)$/,Rb=/^(\d{4})-W(\d\d)$/,Wc=/^(\d{4})-(\d\d)$/,Xc=/^(\d\d):(\d\d)$/,Yc={text:ab,date:bb("date",Uc,yb(Uc,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":bb("datetimelocal",Vc,yb(Vc,["yyyy","MM","dd","HH","mm"]),"yyyy-MM-ddTHH:mm"),time:bb("time",Xc,yb(Xc,["HH","mm"]),"HH:mm"),week:bb("week",Rb,function(a){if(oa(a))return a;if(A(a)){Rb.lastIndex=0;var c=Rb.exec(a);if(c){a=+c[1];var d=+c[2],c=Qc(a),d=7*(d-1);return new Date(a,0,c.getDate()+d)}}return NaN},"yyyy-Www"),month:bb("month",Wc,yb(Wc,["yyyy","MM"]),"yyyy-MM"),number:function(a,c,d,e,f,h){ab(a,c,d,e,f,h),e.$parsers.push(function(a){var c=e.$isEmpty(a);return c||Ve.test(a)?(e.$setValidity("number",!0),""===a?null:c?a:parseFloat(a)):(e.$setValidity("number",!1),s)}),Oe(e,"number",c),e.$formatters.push(function(a){return e.$isEmpty(a)?"":""+a}),d.min&&(a=function(a){var c=parseFloat(d.min);return na(e,"min",e.$isEmpty(a)||a>=c,a)},e.$parsers.push(a),e.$formatters.push(a)),d.max&&(a=function(a){var c=parseFloat(d.max);return na(e,"max",e.$isEmpty(a)||a<=c,a)},e.$parsers.push(a),e.$formatters.push(a)),e.$formatters.push(function(a){return na(e,"number",e.$isEmpty(a)||zb(a),a)})},url:function(a,c,d,e,f,h){ab(a,c,d,e,f,h),a=function(a){return na(e,"url",e.$isEmpty(a)||Te.test(a),a)},e.$formatters.push(a),e.$parsers.push(a)},email:function(a,c,d,e,f,h){ab(a,c,d,e,f,h),a=function(a){return na(e,"email",e.$isEmpty(a)||Ue.test(a),a)},e.$formatters.push(a),e.$parsers.push(a)},radio:function(a,c,d,e){D(d.name)&&c.attr("name",db()),c.on("click",function(){c[0].checked&&a.$apply(function(){e.$setViewValue(d.value)})}),e.$render=function(){c[0].checked=d.value==e.$viewValue},d.$observe("value",e.$render)},checkbox:function(a,c,d,e){var f=d.ngTrueValue,h=d.ngFalseValue;A(f)||(f=!0),A(h)||(h=!1),c.on("click",function(){a.$apply(function(){e.$setViewValue(c[0].checked)})}),e.$render=function(){c[0].checked=e.$viewValue},e.$isEmpty=function(a){return a!==f},e.$formatters.push(function(a){return a===f}),e.$parsers.push(function(a){return a?f:h})},hidden:z,button:z,submit:z,reset:z,file:z},fc=["$browser","$sniffer","$filter",function(a,c,d){return{restrict:"E",require:"?ngModel",link:function(e,f,h,g){g&&(Yc[O(h.type)]||Yc.text)(e,f,h,g,c,a,d)}}}],vb="ng-valid",ub="ng-invalid",La="ng-pristine",xb="ng-dirty",We=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate",function(a,c,d,e,f,h){function g(a,c){c=c?"-"+hb(c,"-"):"",h.removeClass(e,(a?ub:vb)+c),h.addClass(e,(a?vb:ub)+c)}this.$modelValue=this.$viewValue=Number.NaN,this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$name=d.name;var m=f(d.ngModel),k=m.assign;if(!k)throw C("ngModel")("nonassign",d.ngModel,fa(e));this.$render=z,this.$isEmpty=function(a){return D(a)||""===a||null===a||a!==a};var l=e.inheritedData("$formController")||wb,n=0,q=this.$error={};e.addClass(La),g(!0),this.$setValidity=function(a,c){q[a]!==!c&&(c?(q[a]&&n--,n||(g(!0),this.$valid=!0,this.$invalid=!1)):(g(!1),this.$invalid=!0,this.$valid=!1,n++),q[a]=!c,g(c,a),l.$setValidity(a,c,this))},this.$setPristine=function(){this.$dirty=!1,this.$pristine=!0,h.removeClass(e,xb),h.addClass(e,La)},this.$setViewValue=function(d){this.$viewValue=d,this.$pristine&&(this.$dirty=!0,this.$pristine=!1,h.removeClass(e,La),h.addClass(e,xb),l.$setDirty()),r(this.$parsers,function(a){d=a(d)}),this.$modelValue!==d&&(this.$modelValue=d,k(a,d),r(this.$viewChangeListeners,function(a){try{a()}catch(d){c(d)}}))};var p=this;a.$watch(function(){var c=m(a);if(p.$modelValue!==c){var d=p.$formatters,e=d.length;for(p.$modelValue=c;e--;)c=d[e](c);p.$viewValue!==c&&(p.$viewValue=c,p.$render())}return c})}],Md=function(){return{require:["ngModel","^?form"],controller:We,link:function(a,c,d,e){var f=e[0],h=e[1]||wb;h.$addControl(f),a.$on("$destroy",function(){h.$removeControl(f)})}}},Od=Y({require:"ngModel",link:function(a,c,d,e){e.$viewChangeListeners.push(function(){a.$eval(d.ngChange)})}}),gc=function(){return{require:"?ngModel",link:function(a,c,d,e){if(e){d.required=!0;var f=function(a){if(!d.required||!e.$isEmpty(a))return e.$setValidity("required",!0),a;e.$setValidity("required",!1)};e.$formatters.push(f),e.$parsers.unshift(f),d.$observe("required",function(){f(e.$viewValue)})}}}},Nd=function(){return{require:"ngModel",link:function(a,c,d,e){var f=(a=/\/(.*)\//.exec(d.ngList))&&RegExp(a[1])||d.ngList||",";e.$parsers.push(function(a){if(!D(a)){var c=[];return a&&r(a.split(f),function(a){a&&c.push(aa(a))}),c}}),e.$formatters.push(function(a){return J(a)?a.join(", "):s}),e.$isEmpty=function(a){return!a||!a.length}}}},Xe=/^(true|false|\d+)$/,Pd=function(){return{priority:100,compile:function(a,c){return Xe.test(c.ngValue)?function(a,c,f){f.$set("value",a.$eval(f.ngValue))}:function(a,c,f){a.$watch(f.ngValue,function(a){f.$set("value",a)})}}}},pd=ta(function(a,c,d){c.addClass("ng-binding").data("$binding",d.ngBind),a.$watch(d.ngBind,function(a){c.text(a==s?"":a)})}),rd=["$interpolate",function(a){return function(c,d,e){c=a(d.attr(e.$attr.ngBindTemplate)),d.addClass("ng-binding").data("$binding",c),e.$observe("ngBindTemplate",function(a){d.text(a)})}}],qd=["$sce","$parse",function(a,c){return function(d,e,f){e.addClass("ng-binding").data("$binding",f.ngBindHtml);var h=c(f.ngBindHtml);d.$watch(function(){return(h(d)||"").toString()},function(c){e.html(a.getTrustedHtml(h(d))||"")})}}],sd=Qb("",!0),ud=Qb("Odd",0),td=Qb("Even",1),vd=ta({compile:function(a,c){c.$set("ngCloak",s),a.removeClass("ng-cloak")}}),wd=[function(){return{scope:!0,controller:"@",priority:500}}],hc={};r("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(a){var c=ka("ng-"+a);hc[c]=["$parse",function(d){return{compile:function(e,f){var h=d(f[c]);return function(c,d,e){d.on(O(a),function(a){c.$apply(function(){h(c,{$event:a})})})}}}}]});var zd=["$animate",function(a){return{transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,e,f,h){var g,m,k;c.$watch(e.ngIf,function(f){Oa(f)?m||(m=c.$new(),h(m,function(c){c[c.length++]=T.createComment(" end ngIf: "+e.ngIf+" "),g={clone:c},a.enter(c,d.parent(),d)})):(k&&(k.remove(),k=null),m&&(m.$destroy(),m=null),g&&(k=Cb(g.clone),a.leave(k,function(){k=null}),g=null))})}}}],Ad=["$http","$templateCache","$anchorScroll","$animate","$sce",function(a,c,d,e,f){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:Pa.noop,compile:function(h,g){var m=g.ngInclude||g.src,k=g.onload||"",l=g.autoscroll;return function(g,h,p,r,s){var y,v,K,t=0,x=function(){v&&(v.remove(),v=null),y&&(y.$destroy(),y=null),K&&(e.leave(K,function(){v=null}),v=K,K=null)};g.$watch(f.parseAsResourceUrl(m),function(f){var m=function(){!w(l)||l&&!g.$eval(l)||d()},p=++t;f?(a.get(f,{cache:c}).success(function(a){if(p===t){var c=g.$new();r.template=a,a=s(c,function(a){x(),e.enter(a,null,h,m)}),y=c,K=a,y.$emit("$includeContentLoaded"),g.$eval(k)}}).error(function(){p===t&&x()}),g.$emit("$includeContentRequested")):(x(),r.template=null)})}}}}],Qd=["$compile",function(a){return{restrict:"ECA",priority:-400,
require:"ngInclude",link:function(c,d,e,f){d.html(f.template),a(d.contents())(c)}}}],Bd=ta({priority:450,compile:function(){return{pre:function(a,c,d){a.$eval(d.ngInit)}}}}),Cd=ta({terminal:!0,priority:1e3}),Dd=["$locale","$interpolate",function(a,c){var d=/{}/g;return{restrict:"EA",link:function(e,f,h){var g=h.count,m=h.$attr.when&&f.attr(h.$attr.when),k=h.offset||0,l=e.$eval(m)||{},n={},q=c.startSymbol(),p=c.endSymbol(),s=/^when(Minus)?(.+)$/;r(h,function(a,c){s.test(c)&&(l[O(c.replace("when","").replace("Minus","-"))]=f.attr(h.$attr[c]))}),r(l,function(a,e){n[e]=c(a.replace(d,q+g+"-"+k+p))}),e.$watch(function(){var c=parseFloat(e.$eval(g));return isNaN(c)?"":(c in l||(c=a.pluralCat(c-k)),n[c](e,f,!0))},function(a){f.text(a)})}}}],Ed=["$parse","$animate",function(a,c){var d=C("ngRepeat");return{transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,link:function(e,f,h,g,m){var n,q,p,s,t,w,k=h.ngRepeat,l=k.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),y={$id:Ha};if(!l)throw d("iexp",k);if(h=l[1],g=l[2],(l=l[3])?(n=a(l),q=function(a,c,d){return w&&(y[w]=a),y[t]=c,y.$index=d,n(e,y)}):(p=function(a,c){return Ha(c)},s=function(a){return a}),!(l=h.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/)))throw d("iidexp",h);t=l[3]||l[1],w=l[2];var H={};e.$watchCollection(g,function(a){var g,h,n,A,B,z,D,C,L,l=f[0],y={},J=[];if(cb(a))C=a,n=q||p;else{n=q||s,C=[];for(z in a)a.hasOwnProperty(z)&&"$"!=z.charAt(0)&&C.push(z);C.sort()}for(A=C.length,h=J.length=C.length,g=0;g<h;g++)if(z=a===C?g:C[g],D=a[z],D=n(z,D,g),ya(D,"`track by` id"),H.hasOwnProperty(D))L=H[D],delete H[D],y[D]=L,J[g]=L;else{if(y.hasOwnProperty(D))throw r(J,function(a){a&&a.scope&&(H[a.id]=a)}),d("dupes",k,D);J[g]={id:D},y[D]=!1}for(z in H)H.hasOwnProperty(z)&&(L=H[z],g=Cb(L.clone),c.leave(g),r(g,function(a){a.$$NG_REMOVED=!0}),L.scope.$destroy());for(g=0,h=C.length;g<h;g++){if(z=a===C?g:C[g],D=a[z],L=J[g],J[g-1]&&(l=J[g-1].clone[J[g-1].clone.length-1]),L.scope){B=L.scope,n=l;do{n=n.nextSibling}while(n&&n.$$NG_REMOVED);L.clone[0]!=n&&c.move(Cb(L.clone),null,v(l)),l=L.clone[L.clone.length-1]}else B=e.$new();B[t]=D,w&&(B[w]=z),B.$index=g,B.$first=0===g,B.$last=g===A-1,B.$middle=!(B.$first||B.$last),B.$odd=!(B.$even=0==(1&g)),L.scope||m(B,function(a){a[a.length++]=T.createComment(" end ngRepeat: "+k+" "),c.enter(a,null,v(l)),l=a,L.scope=B,L.clone=a,y[L.id]=L})}H=y})}}}],Fd=["$animate",function(a){return function(c,d,e){c.$watch(e.ngShow,function(c){a[Oa(c)?"removeClass":"addClass"](d,"ng-hide")})}}],yd=["$animate",function(a){return function(c,d,e){c.$watch(e.ngHide,function(c){a[Oa(c)?"addClass":"removeClass"](d,"ng-hide")})}}],Gd=ta(function(a,c,d){a.$watch(d.ngStyle,function(a,d){d&&a!==d&&r(d,function(a,d){c.css(d,"")}),a&&c.css(a)},!0)}),Hd=["$animate",function(a){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(c,d,e,f){var h,g,m,k=[];c.$watch(e.ngSwitch||e.on,function(d){var n,q=k.length;if(0<q){if(m){for(n=0;n<q;n++)m[n].remove();m=null}for(m=[],n=0;n<q;n++){var p=g[n];k[n].$destroy(),m[n]=p,a.leave(p,function(){m.splice(n,1),0===m.length&&(m=null)})}}g=[],k=[],(h=f.cases["!"+d]||f.cases["?"])&&(c.$eval(e.change),r(h,function(d){var e=c.$new();k.push(e),d.transclude(e,function(c){var e=d.element;g.push(c),a.enter(c,e.parent(),e)})}))})}}}],Id=ta({transclude:"element",priority:800,require:"^ngSwitch",link:function(a,c,d,e,f){e.cases["!"+d.ngSwitchWhen]=e.cases["!"+d.ngSwitchWhen]||[],e.cases["!"+d.ngSwitchWhen].push({transclude:f,element:c})}}),Jd=ta({transclude:"element",priority:800,require:"^ngSwitch",link:function(a,c,d,e,f){e.cases["?"]=e.cases["?"]||[],e.cases["?"].push({transclude:f,element:c})}}),Ld=ta({link:function(a,c,d,e,f){if(!f)throw C("ngTransclude")("orphan",fa(c));f(function(a){c.empty(),c.append(a)})}}),ld=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(c,d){"text/ng-template"==d.type&&a.put(d.id,c[0].text)}}}],Ye=C("ngOptions"),Kd=Y({terminal:!0}),md=["$compile","$parse",function(a,c){var d=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,e={$setViewValue:z};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(a,c,d){var n,m=this,k={},l=e;m.databound=d.ngModel,m.init=function(a,c,d){l=a,n=d},m.addOption=function(c){ya(c,'"option value"'),k[c]=!0,l.$viewValue==c&&(a.val(c),n.parent()&&n.remove())},m.removeOption=function(a){this.hasOption(a)&&(delete k[a],l.$viewValue==a&&this.renderUnknownOption(a))},m.renderUnknownOption=function(c){c="? "+Ha(c)+" ?",n.val(c),a.prepend(n),a.val(c),n.prop("selected",!0)},m.hasOption=function(a){return k.hasOwnProperty(a)},c.$on("$destroy",function(){m.renderUnknownOption=z})}],link:function(e,h,g,m){if(m[1]){var q=m[0];m=m[1];var C,p=g.multiple,t=g.ngOptions,z=!1,y=v(T.createElement("option")),H=v(T.createElement("optgroup")),A=y.clone();g=0;for(var x=h.children(),F=x.length;g<F;g++)if(""===x[g].value){C=z=x.eq(g);break}q.init(m,z,A),p&&(m.$isEmpty=function(a){return!a||0===a.length}),t?function(e,f,g){function h(){var d,k,s,t,u,a={"":[]},c=[""];t=g.$modelValue,u=x(e)||[];var D,B,E,C=n?Sb(u):u;B={},s=!1;var F,K;if(p)if(v&&J(t))for(s=new Va([]),E=0;E<t.length;E++)B[m]=t[E],s.put(v(e,B),t[E]);else s=new Va(t);for(E=0;D=C.length,E<D;E++){if(k=E,n){if(k=C[E],"$"===k.charAt(0))continue;B[n]=k}B[m]=u[k],d=q(e,B)||"",(k=a[d])||(k=a[d]=[],c.push(d)),p?d=w(s.remove(v?v(e,B):r(e,B))):(v?(d={},d[m]=t,d=v(e,d)===v(e,B)):d=t===r(e,B),s=s||d),F=l(e,B),F=w(F)?F:"",k.push({id:v?v(e,B):n?C[E]:E,label:F,selected:d})}for(p||(z||null===t?a[""].unshift({id:"",label:"",selected:!s}):s||a[""].unshift({id:"?",label:"",selected:!0})),B=0,C=c.length;B<C;B++){for(d=c[B],k=a[d],A.length<=B?(t={element:H.clone().attr("label",d),label:k.label},u=[t],A.push(u),f.append(t.element)):(u=A[B],t=u[0],t.label!=d&&t.element.attr("label",t.label=d)),F=null,E=0,D=k.length;E<D;E++)s=k[E],(d=u[E+1])?(F=d.element,d.label!==s.label&&F.text(d.label=s.label),d.id!==s.id&&F.val(d.id=s.id),d.selected!==s.selected&&F.prop("selected",d.selected=s.selected)):(""===s.id&&z?K=z:(K=y.clone()).val(s.id).attr("selected",s.selected).text(s.label),u.push({element:K,label:s.label,id:s.id,selected:s.selected}),F?F.after(K):t.element.append(K),F=K);for(E++;u.length>E;)u.pop().element.remove()}for(;A.length>B;)A.pop()[0].element.remove()}var k;if(!(k=t.match(d)))throw Ye("iexp",t,fa(f));var l=c(k[2]||k[1]),m=k[4]||k[6],n=k[5],q=c(k[3]||""),r=c(k[2]?k[1]:m),x=c(k[7]),v=k[8]?c(k[8]):null,A=[[{element:f,label:""}]];z&&(a(z)(e),z.removeClass("ng-scope"),z.remove()),f.empty(),f.on("change",function(){e.$apply(function(){var a,h,k,l,q,t,w,u,c=x(e)||[],d={};if(p){for(k=[],q=0,w=A.length;q<w;q++)for(a=A[q],l=1,t=a.length;l<t;l++)if((h=a[l].element)[0].selected){if(h=h.val(),n&&(d[n]=h),v)for(u=0;u<c.length&&(d[m]=c[u],v(e,d)!=h);u++);else d[m]=c[h];k.push(r(e,d))}}else{if("?"==(h=f.val()))k=s;else if(""===h)k=null;else if(v){for(u=0;u<c.length;u++)if(d[m]=c[u],v(e,d)==h){k=r(e,d);break}}else d[m]=c[h],n&&(d[n]=h),k=r(e,d);1<A[0].length&&A[0][1].id!==h&&(A[0][1].selected=!1)}g.$setViewValue(k)})}),g.$render=h,e.$watch(h)}(e,h,m):p?function(a,c,d){var e;d.$render=function(){var a=new Va(d.$viewValue);r(c.find("option"),function(c){c.selected=w(a.get(c.value))})},a.$watch(function(){va(e,d.$viewValue)||(e=$(d.$viewValue),d.$render())}),c.on("change",function(){a.$apply(function(){var a=[];r(c.find("option"),function(c){c.selected&&a.push(c.value)}),d.$setViewValue(a)})})}(e,h,m):function(a,c,d,e){d.$render=function(){var a=d.$viewValue;e.hasOption(a)?(A.parent()&&A.remove(),c.val(a),""===a&&C.prop("selected",!0)):D(a)&&C?c.val(""):e.renderUnknownOption(a)},c.on("change",function(){a.$apply(function(){A.parent()&&A.remove(),d.$setViewValue(c.val())})})}(e,h,m,q)}}}}],od=["$interpolate",function(a){var c={addOption:z,removeOption:z};return{restrict:"E",priority:100,compile:function(d,e){if(D(e.value)){var f=a(d.text(),!0);f||e.$set("value",d.text())}return function(a,d,e){var k=d.parent(),l=k.data("$selectController")||k.parent().data("$selectController");l&&l.databound?d.prop("selected",!1):l=c,f?a.$watch(f,function(a,c){e.$set("value",a),a!==c&&l.removeOption(c),l.addOption(a)}):l.addOption(e.value),d.on("$destroy",function(){l.removeOption(e.value)})}}}}],nd=Y({restrict:"E",terminal:!1});Q.angular.bootstrap?console.log("WARNING: Tried to load angular more than once."):((Fa=Q.jQuery)?(v=Fa,t(Fa.fn,{scope:Ia.scope,isolateScope:Ia.isolateScope,controller:Ia.controller,injector:Ia.injector,inheritedData:Ia.inheritedData}),Eb("remove",!0,!0,!1),Eb("empty",!1,!1,!1),Eb("html",!1,!1,!0)):v=N,Pa.element=v,function(b){t(b,{bootstrap:bc,copy:$,extend:t,equals:va,element:v,forEach:r,injector:cc,noop:z,bind:gb,toJson:pa,fromJson:Yb,identity:Ca,isUndefined:D,isDefined:w,isString:A,isFunction:F,isObject:W,isNumber:zb,isElement:$c,isArray:J,version:gd,isDate:oa,lowercase:O,uppercase:Ea,callbacks:{counter:0},$$minErr:C,$$csp:Xb}),Ra=ed(Q);try{Ra("ngLocale")}catch(a){Ra("ngLocale",[]).provider("$locale",hd)}Ra("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:id}),a.provider("$compile",ec).directive({a:jd,input:fc,textarea:fc,form:kd,script:ld,select:md,style:nd,option:od,ngBind:pd,ngBindHtml:qd,ngBindTemplate:rd,ngClass:sd,ngClassEven:td,ngClassOdd:ud,ngCloak:vd,ngController:wd,ngForm:xd,ngHide:yd,ngIf:zd,ngInclude:Ad,ngInit:Bd,ngNonBindable:Cd,ngPluralize:Dd,ngRepeat:Ed,ngShow:Fd,ngStyle:Gd,ngSwitch:Hd,ngSwitchWhen:Id,ngSwitchDefault:Jd,ngOptions:Kd,ngTransclude:Ld,ngModel:Md,ngList:Nd,ngChange:Od,required:gc,ngRequired:gc,ngValue:Pd}).directive({ngInclude:Qd}).directive(Db).directive(hc),a.provider({$anchorScroll:Rd,$animate:Sd,$browser:Td,$cacheFactory:Ud,$controller:Vd,$document:Wd,$exceptionHandler:Xd,$filter:ic,$interpolate:Yd,$interval:Zd,$http:$d,$httpBackend:ae,$location:be,$log:ce,$parse:de,$rootScope:ee,$q:fe,$sce:ge,$sceDelegate:he,$sniffer:ie,$templateCache:je,$timeout:ke,$window:le,$$rAF:me,$$asyncCallback:ne})}])}(Pa),v(T).ready(function(){cd(T,bc)}))}(window,document),!angular.$$csp()&&angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide{display:none !important;}ng\\:form{display:block;}.ng-animate-block-transitions{transition:0s all!important;-webkit-transition:0s all!important;}</style>');var xmpDirectives=angular.module("xmp.directives",[]);["src","href","class"].forEach(function(inDirective){var directive="xmp-"+inDirective,camelDirective="xmp"+inDirective.substr(0,1).toUpperCase()+inDirective.substr(1);xmpDirectives.directive(camelDirective,["$compile","xmpResource",function($compile,xmpResource){return{restrict:"A",terminal:!0,priority:1e3,compile:function(inElement,inAttributes,inTransclude){return xmpResource.declareRecipientADORsInJQueryElement(inElement),inElement.attr("ng-"+inDirective,inAttributes[camelDirective]),inElement.removeAttr(directive),inElement.removeAttr("data-"+directive),{pre:function(scope,iElement,iAttrs,controller){},post:function(scope,iElement,iAttrs,controller){$compile(iElement)(scope)}}}}}])}),xmpDirectives.directive("xmpShow",["$compile","xmpResource",function($compile,xmpResource){return{restrict:"A",compile:function(inElement,inAttributes){return function(inScope,inElement,inAttributes){inScope.$watch(inAttributes.xmpShow,function(inValue){toBoolean(inValue)?inAttributes.$removeClass("ng-hide"):inAttributes.$addClass("ng-hide")})}}}}]),xmpDirectives.directive("xmpImageAsset",["xmpResource",function(xmpResource){return{restrict:"A",scope:!0,compile:function(element,attrs){return xmpResource.declareRecipientResolvedADORsInExpression(attrs.xmpImageAsset),function(scope,iElement,iAttrs,controller){scope.$watch(attrs.xmpImageAsset,function(value){value&&iAttrs.$set("src",xmpResource.getAssetFetchingURL(value))}),scope.xmpReady(function(){var adorExpression=attrs.xmpImageAsset,adorStatusExpression="xmp.status"+adorExpression.substr(3);if(scope.$eval(adorStatusExpression)==eADORsLoading){createAsyncReplacement(element,attrs);var unregister=scope.$watch(adorStatusExpression,function(value){value!=eADORsLoading&&(destroyAsyncReplacement(element),unregister())})}})}}}}]),xmpDirectives.directive("xmpTextAsset",["xmpResource",function(xmpResource){return{restrict:"A",scope:!0,compile:function(element,attrs){return xmpResource.declareRecipientResolvedADORsInExpression(attrs.xmpTextAsset),function(scope,iElement,iAttrs,controller){scope.$watch(attrs.xmpTextAsset,function(value){value&&xmpResource.fetchAsset(value,{},function(data,status,headers,config){iElement.text(data)})})}}}}]),xmpDirectives.directive("xmpHtmlAsset",["xmpResource",function(xmpResource){return{restrict:"A",scope:!0,compile:function(element,attrs){return xmpResource.declareRecipientResolvedADORsInExpression(attrs.xmpHtmlAsset),function(scope,iElement,iAttrs,controller){scope.$watch(attrs.xmpHtmlAsset,function(value){value&&xmpResource.fetchAsset(value,{},function(data,status,headers,config){iElement.html(data)})})}}}}]),xmpDirectives.directive("xmpRepeat",["$compile","xmpResource",function($compile,xmpResource){return{restrict:"A",terminal:!0,priority:1e3,compile:function(inElement,inAttributes,inTransclude){return xmpResource.declareRecipientADORsInJQueryElement(inElement),inElement.attr("ng-repeat",inAttributes.xmpRepeat),inElement.removeAttr("xmp-repeat"),inElement.removeAttr("data-xmp-repeat"),{pre:function(scope,iElement,iAttrs,controller){},post:function(scope,iElement,iAttrs,controller){$compile(iElement)(scope)}}}}}]),xmpDirectives.directive("xmpUpdate",["$compile","xmpResource",function($compile,xmpResource){return{restrict:"A",terminal:!0,priority:999,scope:!0,compile:function(element,attrs){return xmpResource.declareRecipientADORsInJQueryElement(element),element.attr("ng-submit","updateAdors()"),element.removeAttr("xmp-update"),element.removeAttr("data-xmp-update"),{pre:function(scope,iElement,iAttrs,controller){},post:function(scope,iElement,iAttrs,controller){$compile(iElement)(scope)}}},controller:function($scope,$element){isolateSuccessFailureProperties($scope),$scope.updateAdors=function(){$scope.updateAdorsForFields($scope.defaultAdorsForSet,$scope)}}}}]),xmpDirectives.directive("xmpRegister",["$compile","xmpResource",function($compile,xmpResource){return{restrict:"A",terminal:!0,priority:999,scope:!0,compile:function(element,attrs){return xmpResource.declareRecipientADORsInJQueryElement(element),element.attr("ng-submit","addRecipient()"),element.removeAttr("xmp-register"),element.removeAttr("data-xmp-register"),element.attr("xmp-register-form","true"),{pre:function(scope,iElement,iAttrs,controller){},post:function(scope,iElement,iAttrs,controller){$compile(iElement)(scope)}}},controller:function($scope,$element){isolateSuccessFailureProperties($scope),$scope.hasAutoSignIn=!!$element.attr("xmp-signin-auto"),$scope.addRecipient=function(){var passwordElement=$element.find("[xmp-password]")[0],confirmPasswordElement=$element.find("[xmp-confirm-password]")[0];if(confirmPasswordElement&&passwordElement){var passwordText=passwordElement.value.trim(),confirmPasswordText=confirmPasswordElement.value.trim();if(confirmPasswordText!==passwordText)return $(confirmPasswordElement).addClass("xmp-confirm-error"),void(confirmPasswordElement.getAttribute("xmp-failure-js")&&eval(confirmPasswordElement.getAttribute("xmp-failure-js")))}$scope.addRecipientForFields($scope.defaultAdorsForSet,$scope)}}}}]),xmpDirectives.directive("xmpRefer",["$compile","xmpResource",function($compile,xmpResource){return{restrict:"A",terminal:!0,priority:999,scope:!0,compile:function(element,attrs){return xmpResource.declareRecipientADORsInJQueryElement(element),element.attr("ng-submit","addReferredRecipient()"),element.removeAttr("xmp-refer"),element.removeAttr("data-xmp-refer"),element.attr("xmp-refer-form","true"),{pre:function(scope,iElement,iAttrs,controller){},post:function(scope,iElement,iAttrs,controller){var recipientDict={};scope.referDict={},xmpResource.populateRecipientADORsInJQueryElement(element,recipientDict,scope.referDict,!1,!1,!0),scope.xmpReady(function(){scope.resetXMP()}),$compile(iElement)(scope)}}},controller:function($scope,$element){isolateSuccessFailureProperties($scope),$scope.resetXMP=function(){var xmpCopy={};for(var key in this.xmp)this.xmp.hasOwnProperty(key)&&(xmpCopy[key]=this.xmp[key]);this.xmp=xmpCopy,this.xmp.referredRecipient={};var referReci=this.xmp.referredRecipient={};this.$parent.formDefaultReferredAdors&&$.each(this.$parent.formDefaultReferredAdors,function(key,value){referReci[key]=value})},$scope.addReferredRecipient=function(){var passwordElement=$element.find("[xmp-password]")[0],confirmPasswordElement=$element.find("[xmp-confirm-password]")[0];if(confirmPasswordElement&&passwordElement){var passwordText=passwordElement.value.trim(),confirmPasswordText=confirmPasswordElement.value.trim();if(confirmPasswordText!==passwordText)return $(confirmPasswordElement).addClass("xmp-confirm-error"),void(confirmPasswordElement.getAttribute("xmp-failure-js")&&eval(confirmPasswordElement.getAttribute("xmp-failure-js")))}$scope.addReferredRecipientForFields($scope.defaultAdorsForReferredAdd,$scope,Object.keys($scope.referDict))}}}}]),xmpDirectives.directive("xmpSuccessTriggeredEmail",["xmpResource",function(xmpResource){return{restrict:"A",priority:1e3,compile:function(element,attrs){return xmpResource.declareRecipientADORsInAttributes(attrs),function(scope,iElement,iAttrs,controller){isActionContainer(iElement,iAttrs)?(scope.successEmail={id:iAttrs.xmpSuccessTriggeredEmail,customizations:{}},["xmpSubject","xmpFrom","xmpFromName","xmpReplyTo","xmpTo","xmpToName","xmpCc","xmpCcName","xmpBcc","xmpBccName"].forEach(function(inElement){iAttrs.$observe(inElement,function(value){value&&(scope.successEmail.customizations[inElement]=value)})})):iElement.on("click.xmpSuccessTriggeredEmail",function(){scope.successEmail={id:iAttrs.xmpSuccessTriggeredEmail,customizations:{}},["xmpSubject","xmpFrom","xmpFromName","xmpReplyTo","xmpTo","xmpToName","xmpCc","xmpCcName","xmpBcc","xmpBccName"].forEach(function(inElement){scope.successEmail.customizations[inElement]=iAttrs[inElement]})})}}}}]),xmpDirectives.directive("xmpSuccessUrl",function(){return{restrict:"A",priority:1e3,link:function(scope,iElement,iAttrs,controller){activateScopePropertyForFormOrButton(scope,iElement,iAttrs,"xmpSuccessUrl","successURL")}}}),xmpDirectives.directive("xmpFailureUrl",function(){return{restrict:"A",priority:1e3,link:function(scope,iElement,iAttrs,controller){activateScopePropertyForFormOrButton(scope,iElement,iAttrs,"xmpFailureUrl","failureURL")}}}),xmpDirectives.directive("xmpSuccessTrackAction",function(){return{restrict:"A",priority:1e3,link:function(scope,iElement,iAttrs,controller){activateScopePropertyForFormOrButton(scope,iElement,iAttrs,"xmpSuccessTrackAction","successTrackAction")}}}),xmpDirectives.directive("xmpFailureTrackAction",function(){return{restrict:"A",priority:1e3,link:function(scope,iElement,iAttrs,controller){activateScopePropertyForFormOrButton(scope,iElement,iAttrs,"xmpFailureTrackAction","failureTrackAction")}}}),xmpDirectives.directive("xmpSuccessJs",function(){return{restrict:"A",priority:1e3,link:function(scope,iElement,iAttrs,controller){activateScopePropertyForFormOrButton(scope,iElement,iAttrs,"xmpSuccessJs","successJSAction")}}}),xmpDirectives.directive("xmpSuccessNg",function(){return{restrict:"A",priority:1e3,link:function(scope,iElement,iAttrs,controller){activateScopePropertyForFormOrButton(scope,iElement,iAttrs,"xmpSuccessNg","successNGAction")}}}),xmpDirectives.directive("xmpFailureJs",function(){return{restrict:"A",priority:1e3,link:function(scope,iElement,iAttrs,controller){activateScopePropertyForFormOrButton(scope,iElement,iAttrs,"xmpFailureJs","failureJSAction")}}}),xmpDirectives.directive("xmpFailureNg",function(){return{restrict:"A",priority:1e3,link:function(scope,iElement,iAttrs,controller){activateScopePropertyForFormOrButton(scope,iElement,iAttrs,"xmpFailureNg","failureNGAction")}}}),xmpDirectives.directive("xmpTrueValue",["$compile",function($compile){return{restrict:"A",terminal:!0,priority:1e3,compile:function(inElement,inAttributes,inTransclude){var trueVal=inAttributes.xmpTrueValue;inElement.attr("ng-true-value",trueVal),inElement.removeAttr("xmp-true-value"),inElement.removeAttr("data-xmp-true-value")}}}]),xmpDirectives.directive("xmpFalseValue",["$compile",function($compile){return{restrict:"A",terminal:!0,priority:1e3,compile:function(inElement,inAttributes,inTransclude){var falseVal=inAttributes.xmpFalseValue;inElement.attr("ng-false-value",falseVal),inElement.removeAttr("xmp-false-value"),inElement.removeAttr("data-xmp-false-value")}}}]),xmpDirectives.directive("xmpWriteAdor",["$compile","xmpResource",function($compile,xmpResource){return{restrict:"A",terminal:!0,priority:1e3,require:"?ngModel",compile:function(inElement,inAttributes,inTransclude){var ador=inAttributes.xmpWriteAdor;inElement.attr("ng-model",ador),inElement.removeAttr("xmp-write-ador"),inElement.removeAttr("data-xmp-write-ador");var adorDefaultValue=inAttributes.xmpDefaultValue;return adorDefaultValue&&(inElement.removeAttr("xmp-default-value"),inElement.removeAttr("data-xmp-default-value")),{pre:function(scope,iElement,iAttrs,controller){},post:function(scope,iElement,iAttrs,controller){$compile(iElement)(scope),scope.defaultAdorsForSet||(scope.defaultAdorsForSet={}),scope.defaultAdorsForReferredAdd||(scope.defaultAdorsForReferredAdd={}),scope.$parent.formDefaultAdors||(scope.$parent.formDefaultAdors={}),scope.$parent.formDefaultReferredAdors||(scope.$parent.formDefaultReferredAdors={}),adorDefaultValue&&xmpResource.populateRecipientADORsInExpression(ador,scope.$parent.formDefaultAdors,scope.$parent.formDefaultReferredAdors,!1,!1,adorDefaultValue),xmpResource.populateRecipientADORsInExpression(ador,scope.defaultAdorsForSet,scope.defaultAdorsForReferredAdd),void 0!==iAttrs.value&&scope.xmpReady(function(){"radio"!=iAttrs.type&&iElement.controller("ngModel").$setViewValue(iElement.val())})}}}}}]),xmpDirectives.directive("xmpTrackingPageName",["xmpResource","$window",function(xmpResource,$window){return{restrict:"A",compile:function(inElement,inAttributes,inTransclude){return xmpResource.trackingPageName=inAttributes.xmpTrackingPageName,xmpResource.trackOnPageLoad=!0,function(scope,inElement,inAttributes,controller){function trackLeave(){loadedTime&&(scope.trackingPageName?xmpResource.trackEvent("Page Leave",{sync:!0,recipientID:scope.xmp.recipientID,properties:xmpResource.addDefaultTrackingParameters({PageName:scope.trackingPageName,ActionName:"Page Leave",ActionParams:(((new Date).getTime()-loadedTime)/1e3).toString()})}):xmpResource.error("xmpTrackingPageName, leave: cannot track. tracking page name was not assigned "),loadedTime=null)}var loadedTime=(new Date).getTime();$($window).on("beforeunload",trackLeave),scope.$on("$destory",trackLeave)}}}}]),xmpDirectives.directive("xmpTrackingAction",["xmpResource",function(xmpResource){return{restrict:"A",link:function(scope,iElement,iAttrs,controller){iElement.on(getHTMLEventForTrackingForElement(iElement)+".xmpTrackingAction",function(){var trackingParameters=iAttrs.xmpTrackingAction.split(","),elementTrackingName=trackingParameters.length>0?trackingParameters[0]:getDefaultTrackingElementName(iElement),eventType=trackingParameters.length>1?trackingParameters[1]:getDefaultTrackingEventType(iElement),actionParameters=trackingParameters.length>2?trackingParameters[2]:null,isAnchor="a"==this.tagName.toLowerCase();!actionParameters&&isAnchor&&(actionParameters=iElement[0].href),scope.trackingPageName?xmpResource.trackEvent(eventType,{recipientID:scope.xmp.recipientID,properties:xmpResource.addDefaultTrackingParameters({PageName:scope.trackingPageName,ActionName:elementTrackingName,ActionParams:actionParameters}),sync:isAnchor}):xmpResource.error("xmpTrackingAction: cannot track. tracking page name was not assigned ")})}}}]),xmpDirectives.directive("xmpFacebookShare",["$compile","xmpResource",function($compile,xmpResource){return{restrict:"EA",scope:!0,compile:function(element,attrs){if(xmpResource.declareRecipientADORsInAttributes(attrs),element.is("xmp-facebook-share")){var btn=$(document.createElement("button"));btn.attr("type","button"),element.append(btn),btn.addClass("xmp-facebook-share-btn btn")}return function(inScope,inElement,inAttributes){inElement.on("click.xmpFacebookShare",function(){inScope.postToFacebookFeed()}),["xmpAppid","xmpCaption","xmpDescription","xmpTargetLink","xmpName","xmpThumbnail"].forEach(function(inElement){inAttributes.$observe(inElement,function(value){value&&(inScope[inElement]=value)})}),inScope.$watch(inAttributes.xmpThumbnailAsset,function(value){value&&(inScope.xmpThumbnailAsset=xmpResource.getAssetFetchingURL(value))}),inScope.postToFacebookFeed=function(){var self=this;runFBActionIfInit(this.xmpAppid,function(){xmpResource.debug("xmpFacebookShare,postToFacebookFeed: running facebook ui action with app id =",self.xmpAppid),FB.ui({method:"feed",link:self.xmpTargetLink,name:self.xmpName,caption:self.xmpCaption,description:self.xmpDescription,picture:self.xmpThumbnailAsset?self.xmpThumbnailAsset:self.xmpThumbnail},function(){})})}}}}}]),xmpDirectives.directive("xmpTwitterShare",["$compile","$window","xmpResource",function($compile,$window,xmpResource){return{restrict:"EA",compile:function(element,attrs){xmpResource.declareRecipientADORsInAttributes(attrs);var theElement,isElement=element.is("xmp-twitter-share");return isElement?(theElement=$(document.createElement("a")),theElement.append("Tweet"),element.append(theElement)):theElement=element,theElement.attr("href","https://twitter.com/share"),theElement.attr("data-url",attrs.xmpUrl),theElement.attr("data-text",attrs.xmpSharedText),function(inScope,inElement,inAttributes){[{key:"xmpUrl",value:"data-url"},{key:"xmpSharedText",value:"data-text"}].forEach(function(inObject){inAttributes.$observe(inObject.key,function(value){theElement.attr(inObject.value,value)})}),inScope.xmpReady(function(){$window.setTimeout(function(){theElement.addClass("twitter-share-button"),"undefined"!=typeof twttr&&twttr.widgets.load()},0)}),function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];d.getElementById(id)||(js=d.createElement(s),js.id=id,js.src="https://platform.twitter.com/widgets.js",fjs.parentNode.insertBefore(js,fjs))}(document,"script","twitter-wjs")}}}}]);var eADORsLoading="loading",eADORsLoaded="loaded",eADORsFailed="failed",eJobDone=0,eJobInProgress=1,eJobFailed=2;xmpDirectives.directive("xmpAsync",["xmpResource","$window",function(xmpResource,$window,$injector){return{restrict:"A",scope:!0,link:function(scope,inElement,inAttributes,controller){scope.asyncRecipientADORs={},scope.asyncReferredRecipientADORs={},$.each(inElement[0].attributes,function(i,attrib){xmpResource.populateRecipientADORsInExpression(attrib.value,scope.asyncRecipientADORs,scope.asyncReferredRecipientADORs)}),loadAsync(scope,inElement,inAttributes,controller,xmpResource,$window),scope.$on("xmpRecipientUpdate",function(){loadAsync(scope,inElement,inAttributes,controller,xmpResource,$window)})}}}]),xmpDirectives.directive("xmpLoadAsyncAdor",["xmpResource","$window",function(xmpResource,$window,$injector){return{restrict:"A",scope:!0,link:function(scope,inElement,inAttributes,controller){scope.asyncRecipientADORs={},scope.asyncReferredRecipientADORs={},xmpResource.populateRecipientADORsInExpression(inAttributes.xmpLoadAsyncAdor,scope.asyncRecipientADORs,scope.asyncReferredRecipientADORs),loadAsyncAdor(scope,inElement,inAttributes,controller,xmpResource,$window),scope.$on("xmpRecipientUpdate",function(){loadAsyncAdor(scope,inElement,inAttributes,controller,xmpResource,$window)})}}}]);var kPDFOnDemandStatuses=["initial","completed","in progress","failed"];xmpDirectives.directive("xmppdfondemand",["xmpResource","$window","$compile",function(xmpResource,$window,$compile){return{restrict:"E",scope:!0,compile:function(inElement,inAttributes,inTransclude){return-1==inElement.html().search(/[^\s\\]/)?(inElement.append("<xmpdefaultgenerateview/>"),null):null},controller:function($scope,$element){function documentGenerationJobWait(inRetriesCount){xmpResource.debug("xmppdfondemand,documentGenerationJobWait job",$scope.jobID,"still in progress. retries count =",inRetriesCount),xmpResource.getGenerationJobStatus({jobID:$scope.jobID}).$promise.then(function(result){$scope.status=stringOfStatus(result.status),result.status==eJobInProgress?window.setTimeout(function(){documentGenerationJobWait(inRetriesCount+1)},$scope.asyncWaitTime):documentGenerationJobDone(result)},function(){$scope.status=stringOfStatus(eJobFailed),$scope.downloadURL=null,$scope.errorMessage="xmppdfondemand,generateDocument: request failure",xmpResource.error("xmppdfondemand,generateDocument: request failure")})}function documentGenerationJobDone(inResult){inResult.status==eJobDone?(xmpResource.debug("xmppdfondemand,documentGenerationJobDone succesfuly finished document generation job. file id for download =",inResult.generatedFileID),$scope.downloadURL=xmpResource.getGeneratedFileFetchingURL({fileID:inResult.generatedFileID}),$scope.errorMessage=null):($scope.downloadURL=null,$scope.errorMessage=inResult.errorMessage,xmpResource.error("xmppdfondemand,documentGenerationJobDone failed document generation. message =",inResult.errorMessage))}$scope.status=stringOfStatus(-1),$scope.documentID=$element.attr("xmp-document-ID")||$element.attr("data-xmp-document-ID"),$scope.buttonTitle=$element.attr("xmp-button-title")||$element.attr("data-xmp-button-title"),$scope.generateDocument=function(){$scope.status=stringOfStatus(eJobInProgress),xmpResource.debug("xmppdfondemand,generateDocument: starting document generation job for recipient",$scope.xmp.recipientID,"and document id",$scope.documentID),xmpResource.startGenerationJob($scope.documentID,{recipientID:$scope.xmp.recipientID}).$promise.then(function(result){$scope.status=stringOfStatus(result.status),$scope.jobID=result.jobID,xmpResource.debug("xmppdfondemand,generateDocument: job id is",$scope.jobID),result.status==eJobInProgress?documentGenerationJobWait(0):documentGenerationJobDone(result)},function(){$scope.status=stringOfStatus(eJobFailed),$scope.downloadURL=null,$scope.errorMessage="xmppdfondemand,generateDocument: request failure",xmpResource.error("xmppdfondemand,generateDocument: request failure")})}}}}]),xmpDirectives.directive("xmpdefaultgenerateview",function(){return{replace:!0,restrict:"E",require:"^xmppdfondemand",template:'<div class="xmp-default-generate-view"><span class="xmp-button-on-demand"><button type="button" class="btn" ng-click="generateDocument()" ng-class="{\'xmp-hide\':status==\'in progress\'}">{{buttonTitle}}</button><span class="xmp-busy-on-demand" ng-show="status==\'in progress\'"></span></span><iframe style="display:none" width="1" height="1" frameborder="0" ng-src="{{downloadURL | trustAsResourceUrl}}"></iframe><span ng-show="status==\'failed\'">An error occured, please try again later</span></div>'}}),xmpDirectives.directive("xmpEmail",["xmpResource",function(xmpResource){return{restrict:"E",compile:function(element,attrs){return xmpResource.declareRecipientADORsInAttributes(attrs),function(scope,iElement,iAttrs,controller){var theID=iAttrs.id;xmpResource.emails||(xmpResource.emails={}),xmpResource.emails[theID]={touchpoint:iAttrs.xmpTouchpoint,customizations:{}},["xmpSubject","xmpFrom","xmpFromName","xmpReplyTo","xmpTo","xmpToName","xmpCc","xmpCcName","xmpBcc","xmpBccName"].forEach(function(inElement){iAttrs.$observe(inElement,function(value){value&&(xmpResource.emails[theID].customizations[inElement]=value)})})}}}}]),
xmpDirectives.directive("xmpUnsubscribe",["xmpResource","$parse","$location",function(xmpResource,$parse,$location){return{restrict:"A",link:function(scope,inElement,iAttrs,controller){inElement.on("click.xmpUnsubscribe",function(){xmpResource.changeUnsubscribeStatus(scope,$parse,$location,iAttrs,scope.xmp.recipientID,"false"!=iAttrs.xmpUnsubscribe)})}}}]),xmpDirectives.directive("xmpCloak",function(){return{restrict:"A",priority:1e3,link:function(scope,inElement,iAttrs,controller){scope.xmpReady(function(){inElement.removeAttr("xmp-cloak"),inElement.removeAttr("data-xmp-cloak")})}}}),xmpDirectives.directive("xmpLoadAdorTimeout",["xmpResource",function(xmpResource){return{restrict:"A",compile:function(inElement,inAttributes,inTransclude){xmpResource.timeout=parseInt(inAttributes.xmpLoadAdorTimeout,10)}}}]),xmpDirectives.directive("xmpNoCaching",["xmpResource",function(xmpResource){return{restrict:"A",compile:function(inElement,inAttributes,inTransclude){xmpResource.dontCacheGets=void 0!=inAttributes.xmpNoCaching&&"false"!=inAttributes.xmpNoCaching}}}]),xmpDirectives.directive("xmpClickedTriggeredEmail",["xmpResource",function(xmpResource){return{restrict:"A",compile:function(element,attrs){return xmpResource.declareRecipientADORsInAttributes(attrs),function(scope,iElement,iAttrs,controller){iElement.on("click.xmpClickedTriggeredEmail",function(){var successEmail={id:iAttrs.xmpClickedTriggeredEmail,customizations:{}};["xmpSubject","xmpFrom","xmpFromName","xmpReplyTo","xmpTo","xmpToName","xmpCc","xmpCcName","xmpBcc","xmpBccName"].forEach(function(inElement){successEmail.customizations[inElement]=iAttrs[inElement]}),scope.sendEmailorTriggerToRecipient(successEmail)})}}}}]),xmpDirectives.directive("xmpClickedTrigger",["xmpResource",function(xmpResource){return{restrict:"A",compile:function(element,attrs){return xmpResource.declareRecipientADORsInAttributes(attrs),function(scope,iElement,iAttrs,controller){iElement.on("click.xmpClickedTrigger",function(){var successEmail={id:iAttrs.xmpClickedTrigger,customizations:{}};["xmpSubject","xmpFrom","xmpFromName","xmpReplyTo","xmpTo","xmpToName","xmpCc","xmpCcName","xmpBcc","xmpBccName"].forEach(function(inElement){successEmail.customizations[inElement]=iAttrs[inElement]}),scope.sendEmailorTriggerToRecipient(successEmail)})}}}}]),xmpDirectives.directive("xmpSuccessTrigger",["xmpResource",function(xmpResource){return{restrict:"A",priority:1e3,compile:function(element,attrs){return xmpResource.declareRecipientADORsInAttributes(attrs),function(scope,iElement,iAttrs,controller){isActionContainer(iElement,iAttrs)?(scope.successEmailTrigger={id:iAttrs.xmpSuccessTrigger,customizations:{}},["xmpSubject","xmpFrom","xmpFromName","xmpReplyTo","xmpTo","xmpToName","xmpCc","xmpCcName","xmpBcc","xmpBccName"].forEach(function(inElement){iAttrs.$observe(inElement,function(value){value&&(scope.successEmailTrigger.customizations[inElement]=value)})})):iElement.on("click.xmpSuccessTrigger",function(){scope.successEmailTrigger={id:iAttrs.xmpSuccessTrigger,customizations:{}},["xmpSubject","xmpFrom","xmpFromName","xmpReplyTo","xmpTo","xmpToName","xmpCc","xmpCcName","xmpBcc","xmpBccName"].forEach(function(inElement){scope.successEmailTrigger.customizations[inElement]=iAttrs[inElement]})})}}}}]),xmpDirectives.directive("xmpUpdateOnPageLoad",["xmpResource",function(xmpResource){return{restrict:"E",compile:function(inElement,inAttributes){xmpResource.adorsToSetOnLoad||(xmpResource.adorsToSetOnLoad={});var adorName=getRecipientADORName(xmpResource,inAttributes.xmpAdor);return adorName?(xmpResource.adorsToSetOnLoad[adorName]=inAttributes.xmpValue,function(inScope,inElement,inAttributes){var unregister=inAttributes.$observe("xmpValue",function(value){if(!xmpResource.adorsToSetOnLoad)return void unregister();xmpResource.adorsToSetOnLoad[adorName]=value})}):null}}}]),xmpDirectives.directive("xmpLoadAdor",["xmpResource",function(xmpResource){return{restrict:"A",compile:function(inElement,inAttributes,inTransclude){xmpResource.declareRecipientADORsInExpression(inAttributes.xmpLoadAdor)}}}]),xmpDirectives.directive("xmpTurnOffDefaultError",["xmpResource",function(xmpResource){return{restrict:"A",compile:function(inElement,inAttributes,inTransclude){xmpResource.turnOffDefaultErrorPage=void 0!=inAttributes.xmpTurnOffDefaultError&&"false"!=inAttributes.xmpTurnOffDefaultError}}}]),xmpDirectives.directive("xmpDefaultErrorNode",[function(){return{restrict:"C",template:'<div ng-if="xmp.errorReason" class="xmp-default-error-display"><h1>XMPL error {{hide111}}</h1><p style="color: red;font-size: 18px;">{{xmp.errorReason.data.DisplayMessage.length > 0 ? xmp.errorReason.data.DisplayMessage : xmp.errorReason.data.ExceptionMessage}}</p><h2>Error details</h2><p>{{specificErrorDetails(xmp.errorReason)}}</p><h2>HTTP error data</h2><h3>Source:</h3><ul><li><strong>url:</strong> {{xmp.errorReason.config.url}}</li><li ng-show="xmp.errorReason.config.params"><strong>query string parameters:</strong><pre>{{(xmp.errorReason.config.params)}}</pre></li><li ng-show="xmp.errorReason.config.data"><strong>body:</strong> <code>{{(xmp.errorReason.config.data)}}</code></li></ul><h3>Result:</h3><ul><li><strong>status:</strong> {{xmp.errorReason.status}}</li><li><strong>data:</strong> {{(xmp.errorReason.data)}}</li></ul><h2>HTTP object</h2><p>{{(xmp.errorReason)}}</p><p style="border: 1px solid black; width: 960px; padding: 5px;">An error occurred while performing a call to XMPL Server. <br />This is a generic view that appears during such errors, providing details about the error. <br />If you want it not to appear in case of error add the attribute <code>xmp-turn-off-default-error</code> to the element containing the <code>ng-controller</code> attribute.   </p></div>',link:function($scope,$element,inAttributes){$scope.specificErrorDetails=function(reason){return getSpecificErrorDetails(reason)},$scope.$watch("xmp.errorReason",function(inValue){var controllerElement=$element.parent();$internalMain=$element.children().first(),$internalMain.width(controllerElement.width()),$internalMain.css("min-height",controllerElement.height()),$internalMain.offset(controllerElement.offset())})}}}]),xmpDirectives.directive("xmpRememberRecipient",[function(){return{restrict:"A",link:function(scope,element,attr){attr.ngController&&"XMPAnonymousPage"==attr.ngController&&(scope.xmp.shouldRememberRecipient=!0)}}}]),xmpDirectives.directive("xmpSignin",["$compile","xmpResource","$location",function($compile,xmpResource,$location){return{restrict:"A",terminal:!0,priority:999,scope:!0,compile:function(element,attrs){xmpResource.declareRecipientADORsInJQueryElement(element),element.attr("ng-submit","submitLogin()"),element.removeAttr("xmp-signin"),element.removeAttr("data-xmp-signin");var username=element.find("[xmp-username]");username?username.attr("ng-model","username"):console.error("missing xmp-username directive inside xmp-signin");var password=element.find("[xmp-password]");return password?password.attr("ng-model","password"):console.error("missing xmp-password directive inside xmp-signin"),{pre:function(scope,iElement,iAttrs,controller){},post:function(scope,iElement,iAttrs,controller){scope.username="",scope.password="",$compile(iElement)(scope)}}},controller:function($scope,$element){isolateSuccessFailureProperties($scope);var failureAttrElement=$element.find("[xmp-signin-status-class]");window.xmpSigninOnPage=1,$scope.submitLogin=function(){xmpResource.signin($scope.xmp.recipientID,$scope.username,$scope.password,$scope.successURL,$scope.failureJSAction,failureAttrElement,$location,$scope)}}}}]),xmpDirectives.directive("xmpSignout",["$compile","xmpResource","$location",function($compile,xmpResource,$location){return{restrict:"A",terminal:!0,priority:999,scope:!0,compile:function(element,attrs){return xmpResource.declareRecipientADORsInJQueryElement(element),element.attr("ng-click","submitLogout()"),element.removeAttr("xmp-signout"),element.removeAttr("data-xmp-signout"),{pre:function(scope,iElement,iAttrs,controller){},post:function(scope,iElement,iAttrs,controller){$compile(iElement)(scope)}}},controller:function($scope,$element){isolateSuccessFailureProperties($scope),$scope.submitLogout=function(){xmpResource.signOut($scope.xmp.recipientID,$scope.successURL||$element.attr("xmp-success-url"),$location,$scope)}}}}]),xmpDirectives.directive("xmpClear",function(){return{restrict:"A",terminal:!0,priority:999,scope:!0,link:function(scope,element){element.click(function(){deleteAllXmpCookies()})}}});var deleteAllXmpCookies=function(){deleteCookie("xmpSecurityToken"),deleteCookie("xmpRecipientID"),deleteCookie("xmpServiceToken"),deleteCookie("xmpReferredID")},xmpControllers=angular.module("xmp.controllers",["ngCookies"]);xmpControllers.filter("trustAsResourceUrl",["$sce",function($sce){return function(val){return $sce.trustAsResourceUrl(val)}}]);var eADORsLoading="loading",eADORsLoaded="loaded",eADORsFailed="failed",eJobDone=0,eJobInProgress=1,eJobFailed=2,deleteCookie=function(name){document.cookie=name+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;"};xmpControllers.controller("XMPPersonalizedPage",["$scope","$element","$location","$window","$injector","$cookies","$parse","$compile","xmpResource",function($scope,$element,$location,$window,$injector,$cookies,$parse,$compile,xmpResource){personalizedViewController($scope,$location,$window,$injector,$cookies,$parse,xmpResource,function(){xmpResource.declareRecipientADORsInJQueryElement($element),xmpResource.debug("XMPPersonalizedPage: Scanning ADORs on $element")},function(){createDefaultErrorNode($element,$compile,$scope),xmpResource.debug("XMPPersonalizedPage: creating default error element")})}]),xmpControllers.controller("XMPPersonalizedView",["$scope","$location","$window","$injector","$cookies","$parse","$rootElement","xmpResource",function($scope,$location,$window,$injector,$cookies,$parse,$rootElement,xmpResource){personalizedViewController($scope,$location,$window,$injector,$cookies,$parse,xmpResource,function(){var $ngView=$rootElement.find("[ng-view]");$ngView.length>0?(xmpResource.declareRecipientADORsInJQueryElement($ngView),xmpResource.debug("XMPPersonalizedView: Scanning ADORs on $ngView")):xmpResource.debug("XMPPersonalizedView: $ngView not found, not scanning for ADORs")},function(){})}]),xmpControllers.controller("XMPAnonymousPage",["$scope","$element","$location","$window","$injector","$cookies","$parse","$compile","xmpResource",function($scope,$element,$location,$window,$injector,$cookies,$parse,$compile,xmpResource){anonymousViewController($scope,$location,$window,$injector,$cookies,$parse,xmpResource,function(){xmpResource.declareRecipientADORsInJQueryElement($element),xmpResource.debug("XMPAnonymousPage: Scanning ADORs on $element")},function(){createDefaultErrorNode($element,$compile,$scope),xmpResource.debug("XMPAnonymousPage: creating default error element")})}]),xmpControllers.controller("XMPAnonymousView",["$scope","$location","$window","$injector","$cookies","$parse","$rootElement","xmpResource",function($scope,$location,$window,$injector,$cookies,$parse,$rootElement,xmpResource){anonymousViewController($scope,$location,$window,$injector,$cookies,$parse,xmpResource,function(){var $ngView=$rootElement.find("[ng-view]");$ngView.length>0?(xmpResource.declareRecipientADORsInJQueryElement($ngView),xmpResource.debug("XMPAnonymousView: Scanning ADORs on $ngView")):xmpResource.debug("XMPAnonymousView: $ngView not found, not scanning for ADORs")},function(){})}]),function(){"use strict";function capitalize(string){return string=String(string),string.charAt(0).toUpperCase()+string.slice(1)}function each(object,callback){var index=-1,length=object?object.length:0;if("number"==typeof length&&length>-1&&length<=maxSafeInteger)for(;++index<length;)callback(object[index],index,object);else forOwn(object,callback)}function format(string){return string=trim(string),/^(?:webOS|i(?:OS|P))/.test(string)?string:capitalize(string)}function forOwn(object,callback){for(var key in object)hasOwnProperty.call(object,key)&&callback(object[key],key,object)}function getClassOf(value){return null==value?capitalize(value):toString.call(value).slice(8,-1)}function isHostType(object,property){var type=null!=object?typeof object[property]:"number";return!(/^(?:boolean|number|string|undefined)$/.test(type)||"object"==type&&!object[property])}function qualify(string){return String(string).replace(/([ -])(?!$)/g,"$1?")}function reduce(array,callback){var accumulator=null;return each(array,function(value,index){accumulator=callback(accumulator,value,index,array)}),accumulator}function trim(string){return String(string).replace(/^ +| +$/g,"")}function parse(ua){function getProduct(guesses){return reduce(guesses,function(result,guess){var pattern=guess.pattern||qualify(guess);return!result&&(result=RegExp("\\b"+pattern+" *\\d+[.\\w_]*","i").exec(ua)||RegExp("\\b"+pattern+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(ua))&&((result=String(guess.label&&!RegExp(pattern,"i").test(guess.label)?guess.label:result).split("/"))[1]&&!/[\d.]+/.test(result[0])&&(result[0]+=" "+result[1]),guess=guess.label||guess,result=format(result[0].replace(RegExp(pattern,"i"),guess).replace(RegExp("; *(?:"+guess+"[_-])?","i")," ").replace(RegExp("("+guess+")[-_.]?(\\w)","i"),"$1 $2"))),result})}function toStringPlatform(){return this.description||""}var context=root,isCustomContext=ua&&"object"==typeof ua&&"String"!=getClassOf(ua);isCustomContext&&(context=ua,ua=null);var nav=context.navigator||{},userAgent=nav.userAgent||"";ua||(ua=userAgent);var data,isModuleScope=isCustomContext||thisBinding==oldRoot,likeChrome=isCustomContext?!!nav.likeChrome:/\bChrome\b/.test(ua)&&!/internal|\n/i.test(toString.toString()),airRuntimeClass=isCustomContext?"Object":"ScriptBridgingProxyObject",enviroClass=isCustomContext?"Object":"Environment",javaClass=isCustomContext&&context.java?"JavaPackage":getClassOf(context.java),phantomClass=isCustomContext?"Object":"RuntimeObject",java=/Java/.test(javaClass)&&context.java,rhino=java&&getClassOf(context.environment)==enviroClass,alpha=java?"a":"α",beta=java?"b":"β",doc=context.document||{},opera=context.operamini||context.opera,operaClass=reOpera.test(operaClass=isCustomContext&&opera?opera["[[Class]]"]:getClassOf(opera))?operaClass:opera=null,arch=ua,description=[],prerelease=null,useFeatures=ua==userAgent,version=useFeatures&&opera&&"function"==typeof opera.version&&opera.version(),layout=function(guesses){return reduce(guesses,function(result,guess){return result||RegExp("\\b"+(guess.pattern||qualify(guess))+"\\b","i").exec(ua)&&(guess.label||guess)})}([{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","Trident","KHTML","Gecko"]),name=function(guesses){return reduce(guesses,function(result,guess){return result||RegExp("\\b"+(guess.pattern||qualify(guess))+"\\b","i").exec(ua)&&(guess.label||guess)})}(["Adobe AIR","Arora","Avant Browser","Camino","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel",{label:"SRWare Iron",pattern:"Iron"},"K-Meleon","Konqueror","Lunascape","Maxthon","Midori","Nook Browser","PhantomJS","Raven","Rekonq","RockMelt","SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser","Sunrise","Swiftfox","WebPositive","Opera Mini","Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"IE",pattern:"MSIE"},"Safari"]),product=getProduct([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},"Google TV","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nook","PlayBook","PlayStation 4","PlayStation 3","PlayStation Vita","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),manufacturer=function(guesses){return reduce(guesses,function(result,value,key){return result||(value[product]||value[/^[a-z]+(?: +[a-z]+\b)*/i.exec(product)]||RegExp("\\b"+qualify(key)+"(?:\\b|\\w*\\d)","i").exec(ua))&&key})}({Apple:{iPad:1,iPhone:1,iPod:1},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{"PlayStation 4":1,"PlayStation 3":1,"PlayStation Vita":1}}),os=function(guesses){return reduce(guesses,function(result,guess){var pattern=guess.pattern||qualify(guess);return!result&&(result=RegExp("\\b"+pattern+"(?:/[\\d.]+|[ \\w.]*)","i").exec(ua))&&(data={6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"},/^Win/i.test(result)&&(data=data[/[\d.]+$/.exec(result)])&&(result="Windows "+data),result=format(String(result).replace(RegExp(pattern,"i"),guess.label||guess).replace(/ ce$/i," CE").replace(/hpw/i,"web").replace(/Macintosh/,"Mac OS").replace(/_PowerPC/i," OS").replace(/(OS X) [^ \d]+/i,"$1").replace(/Mac (OS X)/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/x86\.64/gi,"x86_64").split(" on ")[0])),result})}(["Android","CentOS","Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);if(layout&&(layout=[layout]),manufacturer&&!product&&(product=getProduct([manufacturer])),(data=/Google TV/.exec(product))&&(product=data[0]),/\bSimulator\b/i.test(ua)&&(product=(product?product+" ":"")+"Simulator"),/^iP/.test(product)?(name||(name="Safari"),os="iOS"+((data=/ OS ([\d_]+)/i.exec(ua))?" "+data[1].replace(/_/g,"."):"")):"Konqueror"!=name||/buntu/i.test(os)?manufacturer&&"Google"!=manufacturer&&(/Chrome/.test(name)&&!/Mobile Safari/.test(ua)||/Vita/.test(product))?(name="Android Browser",os=/Android/.test(os)?os:"Android"):name&&!(data=!/\bMinefield\b|\(Android;/i.test(ua)&&/Firefox|Safari/.exec(name))||(name&&!product&&/[\/,]|^[^(]+?\)/.test(ua.slice(ua.indexOf(data+"/")+8))&&(name=null),(data=product||manufacturer||os)&&(product||manufacturer||/Android|Symbian OS|Tablet OS|webOS/.test(os))&&(name=/[a-z]+(?: Hat)?/i.exec(/Android/.test(os)?os:data)+" Browser")):os="Kubuntu",(data=/\((Mobile|Tablet).*?Firefox/i.exec(ua))&&data[1]&&(os="Firefox OS",product||(product=data[1])),version||(version=function(patterns){return reduce(patterns,function(result,pattern){return result||(RegExp(pattern+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(ua)||0)[1]||null})}(["(?:Cloud9|CriOS|CrMo|Iron|Opera ?Mini|OPR|Raven|Silk(?!/[\\d.]+$))","Version",qualify(name),"(?:Firefox|Minefield|NetFront)"])),"iCab"==layout&&parseFloat(version)>3?layout=["WebKit"]:(data=/Opera/.test(name)&&(/OPR/.test(ua)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(ua)&&"WebKit"||!layout&&/\bMSIE\b/i.test(ua)&&("Mac OS"==os?"Tasman":"Trident"))?layout=[data]:/PlayStation(?! Vita)/i.test(name)&&"WebKit"==layout&&(layout=["NetFront"]),name||"Trident"!=layout||(name="IE",version=(/\brv:([\d.]+)/.exec(ua)||0)[1]),useFeatures){if(isHostType(context,"global"))if(java&&(data=java.lang.System,arch=data.getProperty("os.arch"),os=os||data.getProperty("os.name")+" "+data.getProperty("os.version")),isHostType(context,"exports"))if(isModuleScope&&isHostType(context,"system")&&(data=[context.system])[0]){os||(os=data[0].os||null);try{data[1]=(data[1]=context.require)&&data[1]("ringo/engine").version,version=data[1].join("."),name="RingoJS"}catch(e){data[0].global.system==context.system&&(name="Narwhal")}}else"object"==typeof context.process&&(data=context.process)?(name="Node.js",arch=data.arch,os=data.platform,version=/[\d.]+/.exec(data.version)[0]):rhino&&(name="Rhino");else rhino&&(name="Rhino");else getClassOf(data=context.runtime)==airRuntimeClass?(name="Adobe AIR",os=data.flash.system.Capabilities.os):getClassOf(data=context.phantom)==phantomClass?(name="PhantomJS",version=(data=data.version||null)&&data.major+"."+data.minor+"."+data.patch):"number"==typeof doc.documentMode&&(data=/\bTrident\/(\d+)/i.exec(ua))&&(version=[version,doc.documentMode],(data=+data[1]+4)!=version[1]&&(description.push("IE "+version[1]+" mode"),layout&&(layout[1]=""),version[1]=data),version="IE"==name?String(version[1].toFixed(1)):version[0]);os=os&&format(os)}version&&(data=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(version)||/(?:alpha|beta)(?: ?\d)?/i.exec(ua+";"+(useFeatures&&nav.appMinorVersion))||/\bMinefield\b/i.test(ua)&&"a")&&(prerelease=/b/i.test(data)?"beta":"alpha",version=version.replace(RegExp(data+"\\+?$"),"")+("beta"==prerelease?beta:alpha)+(/\d+\+?/.exec(data)||"")),"Fennec"==name||"Firefox"==name&&/Android|Firefox OS/.test(os)?name="Firefox Mobile":"Maxthon"==name&&version?version=version.replace(/\.[\d.]+/,".x"):"Silk"==name?(/Mobi/i.test(ua)||(os="Android",description.unshift("desktop mode")),/Accelerated *= *true/i.test(ua)&&description.unshift("accelerated")):"IE"==name&&(data=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(ua)||0)[1])?(name+=" Mobile",os="Windows Phone OS "+data+".x",description.unshift("desktop mode")):/Xbox/i.test(product)?(os=null,"Xbox 360"==product&&/IEMobile/.test(ua)&&description.unshift("mobile mode")):"Chrome"!=name&&"IE"!=name&&(!name||product||/Browser|Mobi/.test(name))||"Windows CE"!=os&&!/Mobi/i.test(ua)?"IE"==name&&useFeatures&&null===context.external?description.unshift("platform preview"):(/BlackBerry/.test(product)||/BB10/.test(ua))&&(data=(RegExp(product.replace(/ +/g," *")+"/([.\\d]+)","i").exec(ua)||0)[1]||version)?(data=[data,/BB10/.test(ua)],os=(data[1]?(product=null,manufacturer="BlackBerry"):"Device Software")+" "+data[0],version=null):this!=forOwn&&"Wii"!=product&&(useFeatures&&opera||/Opera/.test(name)&&/\b(?:MSIE|Firefox)\b/i.test(ua)||"Firefox"==name&&/OS X (?:\d+\.){2,}/.test(os)||"IE"==name&&(os&&!/^Win/.test(os)&&version>5.5||/Windows XP/.test(os)&&version>8||8==version&&!/Trident/.test(ua)))&&!reOpera.test(data=parse.call(forOwn,ua.replace(reOpera,"")+";"))&&data.name&&(data="ing as "+data.name+((data=data.version)?" "+data:""),reOpera.test(name)?(/IE/.test(data)&&"Mac OS"==os&&(os=null),data="identify"+data):(data="mask"+data,name=operaClass?format(operaClass.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/IE/.test(data)&&(os=null),useFeatures||(version=null)),layout=["Presto"],description.push(data)):name+=" Mobile",(data=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(ua)||0)[1])&&(data=[parseFloat(data.replace(/\.(\d)$/,".0$1")),data],"Safari"==name&&"+"==data[1].slice(-1)?(name="WebKit Nightly",prerelease="alpha",version=data[1].slice(0,-1)):version!=data[1]&&version!=(data[2]=(/\bSafari\/([\d.]+\+?)/i.exec(ua)||0)[1])||(version=null),data[1]=(/\bChrome\/([\d.]+)/i.exec(ua)||0)[1],537.36==data[0]&&537.36==data[2]&&parseFloat(data[1])>=28&&(layout=["Blink"]),useFeatures&&(likeChrome||data[1])?(layout&&(layout[1]="like Chrome"),data=data[1]||(data=data[0],data<530?1:data<532?2:data<532.05?3:data<533?4:data<534.03?5:data<534.07?6:data<534.1?7:data<534.13?8:data<534.16?9:data<534.24?10:data<534.3?11:data<535.01?12:data<535.02?"13+":data<535.07?15:data<535.11?16:data<535.19?17:data<536.05?18:data<536.1?19:data<537.01?20:data<537.11?"21+":data<537.13?23:data<537.18?24:data<537.24?25:data<537.36?26:"Blink"!=layout?"27":"28")):(layout&&(layout[1]="like Safari"),data=data[0],data=data<400?1:data<500?2:data<526?3:data<533?4:data<534?"4+":data<535?5:data<537?6:data<538?7:"7"),layout&&(layout[1]+=" "+(data+="number"==typeof data?".x":/[.+]/.test(data)?"":"+")),"Safari"==name&&(!version||parseInt(version)>45)&&(version=data)),"Opera"==name&&(data=/(?:zbov|zvav)$/.exec(os))?(name+=" ",description.unshift("desktop mode"),"zvav"==data?(name+="Mini",version=null):name+="Mobile"):"Safari"==name&&/Chrome/.exec(layout&&layout[1])&&(description.unshift("desktop mode"),name="Chrome Mobile",version=null,/OS X/.test(os)?(manufacturer="Apple",os="iOS 4.3+"):os=null),version&&0==version.indexOf(data=/[\d.]+$/.exec(os))&&ua.indexOf("/"+data+"-")>-1&&(os=trim(os.replace(data,""))),layout&&!/Avant|Nook/.test(name)&&(/Browser|Lunascape|Maxthon/.test(name)||/^(?:Adobe|Arora|Midori|Phantom|Rekonq|Rock|Sleipnir|Web)/.test(name)&&layout[1])&&(data=layout[layout.length-1])&&description.push(data),description.length&&(description=["("+description.join("; ")+")"]),manufacturer&&product&&product.indexOf(manufacturer)<0&&description.push("on "+manufacturer),product&&description.push((/^on /.test(description[description.length-1])?"":"on ")+product),os&&(data=/ ([\d.+]+)$/.exec(os),os={architecture:32,family:data?os.replace(data[0],""):os,version:data?data[1]:null,toString:function(){var version=this.version;return this.family+(version?" "+version:"")+(64==this.architecture?" 64-bit":"")}}),(data=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(arch))&&!/\bi686\b/i.test(arch)&&(os&&(os.architecture=64,os.family=os.family.replace(RegExp(" *"+data),"")),name&&(/WOW64/i.test(ua)||useFeatures&&/\w(?:86|32)$/.test(nav.cpuClass||nav.platform))&&description.unshift("32-bit")),ua||(ua=null);var platform={};return platform.description=ua,platform.layout=layout&&layout[0],platform.manufacturer=manufacturer,platform.name=name,platform.prerelease=prerelease,platform.product=product,platform.ua=ua,platform.version=name&&version,platform.os=os||{architecture:null,family:null,version:null,toString:function(){return"null"}},platform.parse=parse,platform.toString=toStringPlatform,platform.version&&description.unshift(version),platform.name&&description.unshift(name),os&&name&&(os!=String(os).split(" ")[0]||os!=name.split(" ")[0]&&!product)&&description.push(product?"("+os+")":"on "+os),description.length&&(platform.description=description.join(" ")),platform}var objectTypes={function:!0,object:!0},root=objectTypes[typeof window]&&window||this,oldRoot=root,freeExports=objectTypes[typeof exports]&&exports,freeModule=objectTypes[typeof module]&&module&&!module.nodeType&&module,freeGlobal=freeExports&&freeModule&&"object"==typeof global&&global;!freeGlobal||freeGlobal.global!==freeGlobal&&freeGlobal.window!==freeGlobal&&freeGlobal.self!==freeGlobal||(root=freeGlobal);var maxSafeInteger=Math.pow(2,53)-1,reOpera=/Opera/,thisBinding=this,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,toString=objectProto.toString;"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("platform",[],function(){return parse()}):freeExports&&freeModule?forOwn(parse(),function(value,key){freeExports[key]=value}):root.platform=parse()}.call(this),XmpResource.prototype.login=function(inChachedServiceToken,inCachedRID,inWithRIDDeciphering,inOptions,inRunWhenSuccess,inRunWhenFailed){inRunWhenSuccess=inRunWhenSuccess||noOp,inRunWhenFailed=inRunWhenFailed||noOp;var xmpServer=this.$resource(accessURL(this,inOptions)+"/v1/projects/context",null,{login:{method:"POST"}},this.resourceConfig),self=this,options={accessToken:accessToken(this,inOptions),isTest:isTest(this,inOptions),siteURL:inWithRIDDeciphering?this.$location.absUrl():void 0,cached:{serviceToken:inChachedServiceToken,recipientID:inCachedRID}};return xmpServer.login({},options,function(value,responseHeaders){self.access||(self.access={}),self.access.serviceToken=value.serviceToken,self.debug("XmpResource.login: login succeeded with input data = ",options,". returned service token =",value.serviceToken),inRunWhenSuccess&&inRunWhenSuccess(value,responseHeaders)},function(httpResponse){inRunWhenFailed(httpResponse),self.error("XmpResource.login: login failed with input data = ",options),self.error("XmpResource.login: httpResponse = ",httpResponse)})},XmpResource.prototype.getRecipientADORs=function(inRecipientID,inOptions,inRunWhenSuccess,inRunWhenFailed){inRunWhenSuccess=inRunWhenSuccess||noOp,inRunWhenFailed=inRunWhenFailed||noOp;var xmpServer,parameters={rid:inRecipientID,param:inOptions&&inOptions.login?"context":"",accessToken:resourceToken(this,inOptions),adors:inOptions?inOptions.adors:void 0,async:inOptions?inOptions.async:void 0,resolved:inOptions?inOptions.resolved:void 0,idIsIndex:inOptions?inOptions.idIsIndex:void 0,noCache:!!this.dontCacheGets||void 0};xmpServer=inOptions&&inOptions.idIsIndex?this.$resource(accessURL(this,inOptions)+"/resource/:accessToken/recipients/GetByIndex?Authorization="+GetCircleTokenEncrypted(),null,null,this.resourceConfig):this.$resource(accessURL(this,inOptions)+"/v1/projects/:accessToken/adorValues/:param",null,null,this.resourceConfig);var self=this;return addOptionalLogin(this,inOptions?inOptions.login:null,parameters),xmpServer.get(parameters,function(value,responseHeaders){inOptions&&inOptions.login?(self.access||(self.access={}),self.access.serviceToken=value.login.serviceToken,self.debug("XmpResource.getRecipientADORs:+login succeeded with input data = ",parameters,"and service token =",value.login.serviceToken)):self.debug("XmpResource.getRecipientADORs: succeeded with input data = ",parameters),inRunWhenSuccess&&inRunWhenSuccess(value,responseHeaders)},function(httpResponse){inRunWhenFailed(httpResponse),self.error("XmpResource.getRecipientADORs: failed with input data = ",parameters),self.error("XmpResource.getRecipientADORs: httpResponse = ",httpResponse)})},XmpResource.prototype.getRecipientsCount=function(inOptions,inRunWhenSuccess,inRunWhenFailed){inRunWhenSuccess=inRunWhenSuccess||noOp,inRunWhenFailed=inRunWhenFailed||noOp;var self=this;return this.$resource(accessURL(this,inOptions)+"/resource/:resource/recipients?Authorization="+GetCircleTokenEncrypted(),null,null,this.resourceConfig).get({count:!0,resource:resourceToken(this,inOptions)},function(value,responseHeaders){self.debug("XmpResource.getRecipientsCount: succeeded with count = ",value),inRunWhenSuccess(value,responseHeaders)},function(httpResponse){inRunWhenFailed(httpResponse),self.error("XmpResource.getRecipientsCount failed"),self.error("XmpResource.getRecipientsCount: httpResponse = ",httpResponse)})},XmpResource.prototype.getRecipientsIDFromIndex=function(inIndex,inOptions,inRunWhenSuccess,inRunWhenFailed){inRunWhenSuccess=inRunWhenSuccess||noOp,inRunWhenFailed=inRunWhenFailed||noOp;var self=this;return this.$resource(accessURL(this,inOptions)+"/resource/:accessToken/recipients/GetByIndex?Authorization="+GetCircleTokenEncrypted(),null,null,this.resourceConfig).get({index:inIndex,accessToken:resourceToken(this,inOptions)},function(value,responseHeaders){self.debug("XmpResource.getRecipientsIDFromIndex: succeeded for index =",inIndex,"value is =",value),inRunWhenSuccess(value,responseHeaders)},function(httpResponse){inRunWhenFailed(httpResponse),self.error("XmpResource.getRecipientsIDFromIndex failed"),self.error("XmpResource.getRecipientsIDFromIndex: httpResponse = ",httpResponse)})},XmpResource.prototype.getRecipientQueryStatus=function(inOptions,inRunWhenSuccess,inRunWhenFailed){inRunWhenSuccess=inRunWhenSuccess||noOp,inRunWhenFailed=inRunWhenFailed||noOp;var self=this;return this.$resource(accessURL(this,inOptions)+"/v1/projects/:accessToken/asyncquery/:requestID",null,null,this.resourceConfig).get({requestID:inOptions.jobID,accessToken:resourceToken(this,inOptions)},function(value,responseHeaders){self.debug("XmpResource.getRecipientQueryStatus: succeeded with job id = ",inOptions.jobID),inRunWhenSuccess(value,responseHeaders)},function(httpResponse){inRunWhenFailed(httpResponse),self.error("XmpResource.getRecipientQueryStatus: failed with job id = ",inOptions.jobID),self.error("XmpResource.getRecipientQueryStatus: httpResponse = ",httpResponse)})},XmpResource.prototype.getSchema=function(inOptions,inRunWhenSuccess,inRunWhenFailed){inRunWhenSuccess=inRunWhenSuccess||noOp,
inRunWhenFailed=inRunWhenFailed||noOp;var self=this;return this.$resource(accessURL(this,inOptions)+"/resource/:resource/schema?Authorization="+GetCircleTokenEncrypted(),null,null,this.resourceConfig).get({resource:resourceToken(this,inOptions)},function(value,responseHeaders){self.debug("XmpResource.getSchema: succeeded with options = ",inOptions),inRunWhenSuccess(value,responseHeaders)},function(httpResponse){inRunWhenFailed(httpResponse),self.error("XmpResource.getSchema: failed with options = ",inOptions),self.error("XmpResource.getSchema: httpResponse = ",httpResponse)})},XmpResource.prototype.getAssetFetchingURL=function(inAssetName,inOptions){return accessURL(this,inOptions)+"/v1/projects/"+encodeURIComponent(resourceToken(this,inOptions))+"/assets?resolved="+encodeURIComponent(inAssetName)},XmpResource.prototype.fetchAsset=function(inAssetName,inOptions,inRunWhenFetched,inRunWhenFailed){return fetchURL(this,this.getAssetFetchingURL(inAssetName,inOptions),inRunWhenFetched,inRunWhenFailed)},XmpResource.prototype.get=function(url,inRunWhenFetched,inRunWhenFailed){var req=this.$http.get(url);return inRunWhenFetched&&req.success(inRunWhenFetched),inRunWhenFailed&&req.error(inRunWhenFailed),req},XmpResource.prototype.saveRecipientADORs=function(inRecipientID,inAdors,inOptions,inRunWhenSuccess,inRunWhenFailed){inRunWhenSuccess=inRunWhenSuccess||noOp,inRunWhenFailed=inRunWhenFailed||noOp;var self=this;return this.$resource(accessURL(this,inOptions)+"/v1/projects/:accessToken/adorValues",null,{save:{method:"PUT"}},this.resourceConfig).save({rid:inRecipientID,accessToken:resourceToken(this,inOptions),adors:inOptions?inOptions.retrieveADORs:void 0,resolved:inOptions?inOptions.resolvedADORs:void 0},inAdors,function(value,responseHeaders){self.debug("XmpResource.saveRecipientADORs: succeeded with recipient id = ",inRecipientID,"and adors =",inAdors),inRunWhenSuccess(value,responseHeaders)},function(httpResponse){inRunWhenFailed(httpResponse),self.error("XmpResource.saveRecipientADORs: failed with recipient id = ",inRecipientID,"and adors =",inAdors),self.error("XmpResource.saveRecipientADORs: httpResponse = ",httpResponse)})},XmpResource.prototype.signin=function(inRecipientID,username,password,successUrl,failureJs,failureAttrElement,$location,scope,inOptions,inRunWhenSuccess,inRunWhenFailed){inRunWhenSuccess=inRunWhenSuccess||noOp,inRunWhenFailed=inRunWhenFailed||noOp;var self=this,xmpServer=this.$resource(accessURL(this,inOptions)+"/v1/projects/auth/signIn",null,{login:{method:"POST"}},this.resourceConfig);return xmpServer.login({RecipientID:inRecipientID,AccessToken:resourceToken(this,inOptions),Password:password,UserName:username,SiteURL:this.$location.absUrl()},function(value,responseHeaders){console.log(value),setCookie("xmpSecurityToken",value.securityToken,.3),self.debug("XmpResource.signin: succeeded with recipient id = ",inRecipientID),inRunWhenSuccess(value,responseHeaders),successUrl&&changeLocation(scope,$location,successUrl,!0)},function(httpResponse){httpResponse.response&&-1!==httpResponse.response.config.url.indexOf("/projects/auth/signIn")||(inRunWhenFailed(httpResponse),self.error("XmpResource.signin: failed with recipient id = ",inRecipientID),self.error("XmpResource.signin: httpResponse = ",httpResponse.message||httpResponse)),failureAttrElement&&failureAttrElement.addClass(failureAttrElement.attr("xmp-signin-status-class")),failureJs&&eval(failureJs)})},XmpResource.prototype.signOut=function(inRecipientID,successUrl,$location,scope,inOptions,inRunWhenSuccess,inRunWhenFailed){inRunWhenSuccess=inRunWhenSuccess||noOp,inRunWhenFailed=inRunWhenFailed||noOp;var self=this;return this.$resource(accessURL(this,inOptions)+"/v1/projects/auth/signOut",null,{logout:{method:"POST",headers:{accessToken:resourceToken(this,inOptions)}}},this.resourceConfig).logout({RecipientID:inRecipientID},function(value,responseHeaders){deleteCookie("xmpSecurityToken"),self.debug("XmpResource.signOut: succeeded with recipient id = ",inRecipientID),inRunWhenSuccess(value,responseHeaders),successUrl?changeLocation(scope,$location,successUrl,!0):xmpcustom&&xmpcustom.loginUrl&&changeLocation(scope,$location,xmpcustom.loginUrl,!0)},function(httpResponse){inRunWhenFailed(httpResponse),self.error("XmpResource.signOut: failed with recipient id = ",inRecipientID),self.error("XmpResource.signOut: httpResponse = ",httpResponse)})},XmpResource.prototype.addRecipient=function(inOptions,inRunWhenSuccess,inRunWhenFailed){inRunWhenSuccess=inRunWhenSuccess||noOp,inRunWhenFailed=inRunWhenFailed||noOp;var self=this;return this.$resource(accessURL(this,inOptions)+"/v1/projects/:accessToken/adorValues",null,{add:{method:"POST"}},this.resourceConfig).add({accessToken:resourceToken(this,inOptions)},{newRecipientValues:inOptions.adors,newRecipientRetrieveADORs:inOptions.retrieveADORs,newRecipientResolvedADORs:inOptions.resolvedADORs},function(value,responseHeaders){self.debug("XmpResource.addRecipient: succeeded with values = ",inOptions.adors,"and retrieved adors =",inOptions.retrieveADORs),inRunWhenSuccess(value,responseHeaders)},function(httpResponse){inRunWhenFailed(httpResponse),self.error("XmpResource.addRecipient: failed with values = ",inOptions.adors,"and retrieved adors =",inOptions.retrieveADORs),self.error("XmpResource.addRecipient: httpResponse = ",httpResponse)})},XmpResource.prototype.addDefaultTrackingParameters=function(inParametersObject){return inParametersObject.ScreenResolution=screen.width+"x"+screen.height,inParametersObject.Browser=platform.name+" "+platform.version,inParametersObject.Platform=platform.os.family+" "+platform.os.version,inParametersObject.HumanLanguage=navigator.systemLanguage||navigator.language||"Unknown",inParametersObject.PageURI=this.$location.absUrl().substr(0,this.$location.absUrl().length-this.$location.url().length+this.$location.path().length),inParametersObject.ReferringPageURI=document.referrer,inParametersObject.PageParams=this.$location.url().substr(this.$location.path().length+1),inParametersObject.JavaEnabled="true",inParametersObject.ISLandingPage="TBD",inParametersObject.ClientIP="TBD",inParametersObject.UserSession="TBD",inParametersObject},XmpResource.prototype.trackEvent=function(inEventType,inOptions,inRunWhenSuccess,inRunWhenFailed){var parameters={type:inEventType,recipientID:inOptions.recipientID,date:inOptions.date?inOptions.date.toUTCString():(new Date).toUTCString()};if(inOptions&&inOptions.properties)for(var v in inOptions.properties)inOptions.properties.hasOwnProperty(v)&&(parameters[v]=inOptions.properties[v]);inRunWhenSuccess=inRunWhenSuccess||noOp,inRunWhenFailed=inRunWhenFailed||noOp;var runWhenSuccess=function(value,responseHeaders){this.debug("XmpResource.trackEvent: succeeded with parameters = ",parameters),inRunWhenSuccess(value,responseHeaders)}.bind(this),runWhenFailed=function(httpResponse){inRunWhenFailed(),this.$log.error("XmpResource.trackEvent: failed with parameters = ",parameters),this.$log.error("XmpResource.trackEvent: httpResponse = ",httpResponse)}.bind(this);if(!inOptions||!inOptions.sync){return this.$resource(accessURL(this,inOptions)+"/v1/projects/:accessToken/events",null,{add:{method:"POST"}},this.resourceConfig).add({accessToken:resourceToken(this,inOptions)},parameters,runWhenSuccess,runWhenFailed)}var ajaxObj={type:"POST",url:accessURL(this,inOptions)+"/v1/projects/"+encodeURIComponent(resourceToken(this,inOptions))+"/events",data:JSON.stringify(parameters),contentType:"application/json; charset=utf-8",success:runWhenSuccess,async:!1,timeout:this.timeout};getCookie("xmpSecurityToken")&&(ajaxObj.headers={xmpSecurityToken:getCookie("xmpSecurityToken")}),$.ajax(ajaxObj).fail(runWhenFailed)},XmpResource.prototype.sendEmailorTrigger=function(inTouchpointID,inOptions,inRunWhenSuccess,inRunWhenFailed){inRunWhenSuccess=inRunWhenSuccess||noOp,inRunWhenFailed=inRunWhenFailed||noOp;var runWhenSuccess=function(value,responseHeaders){this.debug("XmpResource.sendEmailorTrigger: succeeded with email touchpoint id =",inTouchpointID,"recipient id =",inOptions.recipientID,"customizations =",inOptions.customizations),inRunWhenSuccess(value,responseHeaders)}.bind(this),runWhenFailed=function(httpResponse){inRunWhenFailed(httpResponse),this.$log.error("XmpResource.sendEmailorTrigger: failed with email touchpoint id =",inTouchpointID,"recipient id =",inOptions.recipientID,"customizations =",inOptions.customizations),this.$log.error("XmpResource.sendEmailorTrigger: httpResponse = ",httpResponse)}.bind(this);if(!inOptions||!inOptions.sync){return this.$resource(accessURL(this,inOptions)+"/v1/projects/:accessToken/touchpoints/trigger",null,{send:{method:"POST"}},this.resourceConfig).send({accessToken:resourceToken(this,inOptions)},{touchPointID:inTouchpointID,recipientID:inOptions.recipientID,customizations:inOptions.customizations},runWhenSuccess,runWhenFailed)}var ajaxObj={type:"POST",url:accessURL(this,inOptions)+"/v1/projects/"+encodeURIComponent(resourceToken(this,inOptions))+"/touchpoints/trigger",data:JSON.stringify({touchPointID:inTouchpointID,recipientID:inOptions.recipientID,customizations:inOptions.customizations}),contentType:"application/json; charset=utf-8",success:runWhenSuccess,async:!1};getCookie("xmpSecurityToken")&&(ajaxObj.headers={xmpSecurityToken:getCookie("xmpSecurityToken")}),$.ajax(ajaxObj).fail(runWhenFailed)},XmpResource.prototype.getDocuments=function(inOptions,inRunWhenSuccess,inRunWhenFailed){inRunWhenSuccess=inRunWhenSuccess||noOp;var self=this;return inRunWhenFailed=inRunWhenFailed||noOp,this.$resource(accessURL(this,inOptions)+"/resource/:resource/documents?Authorization="+GetCircleTokenEncrypted(),null,null,this.resourceConfig).get({resource:resourceToken(this,inOptions)},function(value,responseHeaders){self.debug("XmpResource.getDocuments: succeeded with resource = ",resourceToken(self,inOptions)),inRunWhenSuccess(value,responseHeaders)},function(httpResponse){inRunWhenFailed(httpResponse),self.error("XmpResource.getDocuments: failed with resource = ",resourceToken(self,inOptions)),self.error("XmpResource.getDocuments: httpResponse = ",httpResponse)})},XmpResource.prototype.getEmailDocuments=function(inOptions,inRunWhenSuccess,inRunWhenFailed){inRunWhenSuccess=inRunWhenSuccess||noOp;var self=this;return inRunWhenFailed=inRunWhenFailed||noOp,this.$resource(accessURL(this,inOptions)+"/resource/:resource/emaildocuments?Authorization="+GetCircleTokenEncrypted(),null,null,this.resourceConfig).get({resource:resourceToken(this,inOptions)},function(value,responseHeaders){self.debug("XmpResource.getEmailDocuments: succeeded with resource = ",resourceToken(self,inOptions)),inRunWhenSuccess(value,responseHeaders)},function(httpResponse){inRunWhenFailed(httpResponse),self.error("XmpResource.getEmailDocuments: failed with resource = ",resourceToken(self,inOptions)),self.error("XmpResource.getEmailDocuments: httpResponse = ",httpResponse)})},XmpResource.prototype.getEmailTouchpoints=function(inOptions,inRunWhenSuccess,inRunWhenFailed){inRunWhenSuccess=inRunWhenSuccess||noOp,inRunWhenFailed=inRunWhenFailed||noOp;var self=this;return this.$resource(accessURL(this,inOptions)+"/resource/:resource/emailtouchpoints?Authorization="+GetCircleTokenEncrypted(),null,null,this.resourceConfig).get({resource:resourceToken(this,inOptions)},function(value,responseHeaders){self.debug("XmpResource.getEmailTouchpoints: succeeded with resource = ",resourceToken(self,inOptions)),inRunWhenSuccess(value,responseHeaders)},function(httpResponse){inRunWhenFailed(httpResponse),self.error("XmpResource.getEmailTouchpoints: failed with resource = ",resourceToken(self,inOptions)),self.error("XmpResource.getEmailTouchpoints: httpResponse = ",httpResponse)})},XmpResource.prototype.getEmailFooters=function(inOptions,inRunWhenSuccess,inRunWhenFailed){inRunWhenSuccess=inRunWhenSuccess||noOp,inRunWhenFailed=inRunWhenFailed||noOp;var self=this;return this.$resource(accessURL(this,inOptions)+"/resource/:resource/emailfooters?Authorization="+GetCircleTokenEncrypted(),null,null,this.resourceConfig).get({resource:resourceToken(this,inOptions)},function(value,responseHeaders){self.debug("XmpResource.getEmailFooters: succeeded with resource = ",resourceToken(self,inOptions)),inRunWhenSuccess(value,responseHeaders)},function(httpResponse){inRunWhenFailed(httpResponse),self.error("XmpResource.getEmailFooters: failed with resource = ",resourceToken(self,inOptions)),self.error("XmpResource.getEmailFooters: httpResponse = ",httpResponse)})},XmpResource.prototype.startGenerationJob=function(inDocumentID,inOptions,inRunWhenSuccess,inRunWhenFailed){inRunWhenSuccess=inRunWhenSuccess||noOp,inRunWhenFailed=inRunWhenFailed||noOp;var self=this;return this.$resource(accessURL(this,inOptions)+"/resource/:resource/generationjobs?Authorization="+GetCircleTokenEncrypted(),null,{send:{method:"POST"}},this.resourceConfig).send({resource:resourceToken(this,inOptions)},{documentID:inDocumentID,recipientID:inOptions.recipientID},function(value,responseHeaders){self.debug("XmpResource.startGenerationJob: succeeded with document id =",inDocumentID,"and recipient ID =",inOptions.recipientID),inRunWhenSuccess(value,responseHeaders)},function(httpResponse){inRunWhenFailed(httpResponse),self.error("XmpResource.startGenerationJob: failed with document id =",inDocumentID,"and recipient ID =",inOptions.recipientID),self.error("XmpResource.startGenerationJob: httpResponse = ",httpResponse)})},XmpResource.prototype.getGenerationJobStatus=function(inOptions,inRunWhenSuccess,inRunWhenFailed){inRunWhenSuccess=inRunWhenSuccess||noOp,inRunWhenFailed=inRunWhenFailed||noOp;var self=this;return this.$resource(accessURL(this,inOptions)+"/resource/:resource/generationjobs/"+inOptions.jobID+"?Authorization="+GetCircleTokenEncrypted(),null,null,this.resourceConfig).get({resource:resourceToken(this,inOptions)},function(value,responseHeaders){self.debug("XmpResource.getGenerationJobStatus: succeeded with job id = ",inOptions.jobID),inRunWhenSuccess(value,responseHeaders)},function(httpResponse){inRunWhenFailed(httpResponse),self.error("XmpResource.getGenerationJobStatus: failed with job id = ",inOptions.jobID),self.error("XmpResource.getGenerationJobStatus: httpResponse = ",httpResponse)})},XmpResource.prototype.getGeneratedFileFetchingURL=function(inOptions){var fileID="string"==typeof inOptions?inOptions:inOptions.fileID;return accessURL(this,inOptions)+"/resource/"+encodeURIComponent(resourceToken(this,inOptions))+"/generatedfiles/"+encodeURIComponent(fileID)+"?Authorization="+GetCircleTokenEncrypted()},XmpResource.prototype.fetchGeneratedFile=function(inOptions,inRunWhenFetched,inRunWhenFailed){return fetchURL(this,this.getGeneratedFileFetchingURL(inOptions),inRunWhenFetched,inRunWhenFailed)},XmpResource.prototype.changeUnsubscribeStatus=function(scope,$parse,$location,iAttrs,inRecipientID,inUnsubscribe,inOptions,inRunWhenSuccess,inRunWhenFailed){inRunWhenSuccess=inRunWhenSuccess||noOp,inRunWhenFailed=inRunWhenFailed||noOp;var self=this,xmpServer=this.$resource(accessURL(this,inOptions)+"/v1/projects/:accessToken/touchpoints/trigger/unsubscribe",null,{save:{method:"PUT"}},this.resourceConfig);return xmpServer.save({accessToken:resourceToken(this,inOptions)},{status:inUnsubscribe,recipientID:inRecipientID,siteURL:this.$location.absUrl()},function(value,responseHeaders){self.debug("XmpResource.changeUnsubscribeStatus: succeeded with recipient id =",inRecipientID,"and unsubscribe status =",inUnsubscribe),inRunWhenSuccess(value,responseHeaders),iAttrs.xmpSuccessNg&&$parse(iAttrs.xmpSuccessNg)(scope),iAttrs.xmpSuccessJs&&eval(iAttrs.xmpSuccessJs),iAttrs.xmpSuccessUrl&&changeLocation(scope,$location,iAttrs.xmpSuccessUrl,!0)},function(httpResponse){inRunWhenFailed(httpResponse),self.error("XmpResource.changeUnsubscribeStatus: failed with recipient id =",inRecipientID,"and unsubscribe status =",inUnsubscribe),self.error("XmpResource.changeUnsubscribeStatus: httpResponse = ",httpResponse),iAttrs.xmpFailureNg&&$parse(iAttrs.xmpFailureNg)(scope),iAttrs.xmpFailureJs&&eval(iAttrs.xmpFailureJs),iAttrs.xmpFailureUrl&&changeLocation(scope,$location,iAttrs.xmpFailureUrl,!0)})},XmpResource.prototype.populateRecipientADORsInExpression=function(inExpression,inRecipientDictionary,inReferredRecipientDictionary,excludeRefer,excludeRecipient,AdorDefaultVal){var results;excludeRecipient||(results=inExpression.match(/xmp\.r\.[\w]+/g),results&&results.forEach(function(inElement){inRecipientDictionary[inElement.substring(6)]=AdorDefaultVal||!0}),(results=inExpression.match(/xmp\.r\[(\"|\')[^\]]+/g))&&results.forEach(function(inElement){inRecipientDictionary[inElement.substring(7,inElement.length-1)]=AdorDefaultVal||!0})),excludeRefer||(results=inExpression.match(/xmp\.referredRecipient\.[\w]+/g),results&&results.forEach(function(inElement){inReferredRecipientDictionary[inElement.substring(22)]=AdorDefaultVal||!0}),(results=inExpression.match(/xmp\.referredRecipient\[(\"|\')[^\]]+/g))&&results.forEach(function(inElement){inReferredRecipientDictionary[inElement.substring(23,inElement.length-1)]=AdorDefaultVal||!0}))},XmpResource.prototype.declareRecipientADORsInExpression=function(inExpression){this.createDefaultRetrieveDictionaries(),this.populateRecipientADORsInExpression(inExpression,this.defaultAdorsForGet,this.defaultAdorsForReferredGet)},XmpResource.prototype.declareRecipientResolvedADORsInExpression=function(inExpression){this.createDefaultRetrieveDictionaries(),this.populateRecipientADORsInExpression(inExpression,this.defaultAdorsForResolve,this.defaultAdorsForReferredResolve)},XmpResource.prototype.declareRecipientADORsInAttributes=function(inAttributes){this.createDefaultRetrieveDictionaries(),this.populateRecipientADORsInAttributes(inAttributes,this.defaultAdorsForGet,this.defaultAdorsForReferredGet)},XmpResource.prototype.populateRecipientADORsInAttributes=function(inAttributes,inRecipientDictionary,inReferredRecipientDictionary,excludeRefer,excludeRecipient,dontCheckForExclusion){if(!attributesExcludeCollection(inAttributes)){dontCheckForExclusion||(excludeRefer|=shouldExcludeReferredSearch(inAttributes));var self=this;angular.forEach(inAttributes,function(value,key){attributeCanBeCollected(key)&&self.populateRecipientADORsInExpression(value,inRecipientDictionary,inReferredRecipientDictionary,excludeRefer,excludeRecipient)})}},XmpResource.prototype.declareRecipientADORsInJQueryElement=function(inJElement){this.createDefaultRetrieveDictionaries(),this.populateRecipientADORsInJQueryElement(inJElement,this.defaultAdorsForGet,this.defaultAdorsForReferredGet)},XmpResource.prototype.createDefaultRetrieveDictionaries=function(){this.defaultAdorsForGet||(this.defaultAdorsForGet={}),this.defaultAdorsForReferredGet||(this.defaultAdorsForReferredGet={}),this.defaultAdorsForResolve||(this.defaultAdorsForResolve={}),this.defaultAdorsForReferredResolve||(this.defaultAdorsForReferredResolve={})},XmpResource.prototype.populateRecipientADORsInJQueryElement=function(inJElement,inRecipientDictionary,inReferredRecipientDictionary,excludeRefer,excludeRecipient,dontCheckForExclusion){inJElement[0].attributes&&this.populateRecipientADORsInAttributes(htmlAttrsToPlainKeyValue(inJElement[0].attributes),inRecipientDictionary,inReferredRecipientDictionary,excludeRefer,excludeRecipient,dontCheckForExclusion),inJElement[0].attributes&&!dontCheckForExclusion&&(excludeRefer|=shouldExcludeReferredSearch(htmlAttrsToPlainKeyValue(inJElement[0].attributes))),3!=inJElement[0].nodeType&&8!=inJElement[0].nodeType||this.populateRecipientADORsInExpression(inJElement[0].nodeValue,inRecipientDictionary,inReferredRecipientDictionary,excludeRefer,excludeRecipient);var self=this;inJElement.is("iframe")||inJElement.contents().each(function(){self.populateRecipientADORsInJQueryElement($(this),inRecipientDictionary,inReferredRecipientDictionary,excludeRefer,excludeRecipient,dontCheckForExclusion)})},XmpResource.prototype.debug=function(){this.debugEnabled&&(console.debug.apply(console,arguments),canDebugExternal()&&uCreateXMGlobal.logDebugFromExternalLibrary.apply(uCreateXMGlobal,arguments))},XmpResource.prototype.error=function(){this.$log.error.apply(this.$log,arguments),canDebugExternal()&&uCreateXMGlobal.logErrorFromExternalLibrary.apply(uCreateXMGlobal,arguments)};var xmpServices=angular.module("xmp.services",["ngResource"]).config(["$httpProvider",function($httpProvider){$httpProvider.interceptors.push("noCacheInterceptor"),$httpProvider.interceptors.push("xmHttpInterceptor")}]).factory("noCacheInterceptor",function(){return{request:function(config){if("GET"==config.method){var separator=-1===config.url.indexOf("?")?"?":"&";config.url=config.url+separator+"ieNoCache="+(new Date).getTime()}return config}}}).factory("xmHttpInterceptor",["$q","$cookies",function($q,$cookies){return{request:function(config){return getCookie("xmpSecurityToken")&&(config.headers.xmpSecurityToken=getCookie("xmpSecurityToken")),canDebugExternal()&&uCreateXMGlobal.logDebugFromExternalLibrary("xmHttpInterceptor xmp.services - request sent :",config),config},response:function(response){return canDebugExternal()&&uCreateXMGlobal.logDebugFromExternalLibrary("xmHttpInterceptor xmp.services - response returned : ",response),response},responseError:function(response){if(/\/events$/.test(response.config.url)||(window.XMPLLastHttpError=response),400===response.status&&response.data&&9==response.data.ErrorCode){if(null!=response.data.RecipientID&&""!=response.data.RecipientID&&setCookie("xmpRecipientID",response.data.RecipientID,9999),null!=response.data.ServiceToken&&""!=response.data.ServiceToken&&setCookie("xmpServiceToken",response.data.ServiceToken,9999),window.xmpSigninOnPage)return $q.reject({response:response,message:"xmHttpInterceptor xmp.services -  login failed "});if("undefined"!=typeof xmpcustom&&xmpcustom.loginUrl){var params=[{key:"rid",value:response.data.RecipientID},{key:"IID",value:function(){var param=location.search.replace(/^\?/,"").split("&").filter(function(q){return/^iid=/i.test(q)})[0];return param?param.replace(/^iid=/i,""):null}()}].filter(function(p){return!!p.value}).map(function(p){return[p.key,"=",p.value].join("")}).join("&");window.location.href=xmpcustom.loginUrl+(params?"?":"")+params}}return canDebugExternal()&&uCreateXMGlobal.logErrorFromExternalLibrary("xmHttpInterceptor xmp.services - error in response : ",response),$q.reject(response)}}}]);xmpServices.provider("xmpResource",function(){var options=null;this.configure=function(inOptions){options=inOptions},this.$get=["$resource","$http","$location","$log",function($resource,$http,$location,$log){return new XmpResource($resource,$http,$location,$log,options)}]}),function(p,f,n){"use strict";f.module("ngCookies",["ng"]).factory("$cookies",["$rootScope","$browser",function(e,b){var h,c={},g={},k=!1,l=f.copy,m=f.isUndefined;return b.addPollFn(function(){var a=b.cookies();h!=a&&(h=a,l(a,g),l(a,c),k&&e.$apply())})(),k=!0,e.$watch(function(){var a,d,e;for(a in g)m(c[a])&&b.cookies(a,void 0);for(a in c)d=c[a],f.isString(d)||(d=""+d,c[a]=d),d!==g[a]&&(b.cookies(a,d),e=!0);if(e)for(a in d=b.cookies(),c)c[a]!==d[a]&&(m(d[a])?delete c[a]:c[a]=d[a])}),c}]).factory("$cookieStore",["$cookies",function(e){return{get:function(b){return(b=e[b])?f.fromJson(b):b},put:function(b,c){e[b]=f.toJson(c)},remove:function(b){delete e[b]}}}])}(window,window.angular),function(H,a,A){"use strict";function D(p,g){g=g||{},a.forEach(g,function(a,c){delete g[c]});for(var c in p)!p.hasOwnProperty(c)||"$"===c.charAt(0)&&"$"===c.charAt(1)||(g[c]=p[c]);return g}var v=a.$$minErr("$resource"),C=/^(\.[a-zA-Z_$][0-9a-zA-Z_$]*)+$/;a.module("ngResource",["ng"]).factory("$resource",["$http","$q",function(p,g){function c(a,c){this.template=a,this.defaults=c||{},this.urlParams={}}function t(n,w,l){function r(h,d){var e={};return d=x({},w,d),s(d,function(b,d){u(b)&&(b=b());var k;if(b&&b.charAt&&"@"==b.charAt(0)){k=h;var a=b.substr(1);if(null==a||""===a||"hasOwnProperty"===a||!C.test("."+a))throw v("badmember",a);for(var a=a.split("."),f=0,c=a.length;f<c&&k!==A;f++){var g=a[f];k=null!==k?k[g]:A}}else k=b;e[d]=k}),e}function e(a){return a.resource}function f(a){D(a||{},this)}var F=new c(n);return l=x({},B,l),s(l,function(h,d){var c=/^(POST|PUT|PATCH)$/i.test(h.method);f[d]=function(b,d,k,w){var n,l,y,q={};switch(arguments.length){case 4:y=w,l=k;case 3:case 2:if(!u(d)){q=b,n=d,l=k;break}if(u(b)){l=b,y=d;break}l=d,y=k;case 1:u(b)?l=b:c?n=b:q=b;break;case 0:break;default:throw v("badargs",arguments.length)}var t=this instanceof f,m=t?n:h.isArray?[]:new f(n),z={},B=h.interceptor&&h.interceptor.response||e,C=h.interceptor&&h.interceptor.responseError||A;return s(h,function(a,b){"params"!=b&&"isArray"!=b&&"interceptor"!=b&&(z[b]=G(a))}),c&&(z.data=n),F.setUrlParams(z,x({},r(n,h.params||{}),q),h.url),q=p(z).then(function(b){var d=b.data,k=m.$promise;if(d){if(a.isArray(d)!==!!h.isArray)throw v("badcfg",h.isArray?"array":"object",a.isArray(d)?"array":"object");h.isArray?(m.length=0,s(d,function(b){m.push(new f(b))})):(D(d,m),m.$promise=k)}return m.$resolved=!0,b.resource=m,b},function(b){return m.$resolved=!0,(y||E)(b),g.reject(b)}),q=q.then(function(b){var a=B(b);return(l||E)(a,b.headers),a},C),t?q:(m.$promise=q,m.$resolved=!1,m)},f.prototype["$"+d]=function(b,a,k){return u(b)&&(k=a,a=b,b={}),b=f[d].call(this,b,this,a,k),b.$promise||b}}),f.bind=function(a){return t(n,x({},w,a),l)},f}var B={get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},delete:{method:"DELETE"}},E=a.noop,s=a.forEach,x=a.extend,G=a.copy,u=a.isFunction;return c.prototype={setUrlParams:function(c,g,l){var f,p,r=this,e=l||r.template,h=r.urlParams={};s(e.split(/\W/),function(a){if("hasOwnProperty"===a)throw v("badname");!/^\d+$/.test(a)&&a&&RegExp("(^|[^\\\\]):"+a+"(\\W|$)").test(e)&&(h[a]=!0)}),e=e.replace(/\\:/g,":"),g=g||{},s(r.urlParams,function(d,c){f=g.hasOwnProperty(c)?g[c]:r.defaults[c],a.isDefined(f)&&null!==f?(p=encodeURIComponent(f).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"%20").replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+"),e=e.replace(RegExp(":"+c+"(\\W|$)","g"),function(a,c){return p+c})):e=e.replace(RegExp("(/?):"+c+"(\\W|$)","g"),function(a,c,d){return"/"==d.charAt(0)?d:c+d})}),e=e.replace(/\/+$/,"")||"/",e=e.replace(/\/\.(?=\w+($|\?))/,"."),c.url=e.replace(/\/\\\./,"/."),s(g,function(a,e){r.urlParams[e]||(c.params=c.params||{},c.params[e]=a)})}},t}])}(window,window.angular),function(){var deleteAllXmpCookiesRef=deleteAllXmpCookies,xmpClearCookieOnLoad=document.body.getAttribute("xmp-clear-all-cookies-onload");void 0!==xmpClearCookieOnLoad&&null!=xmpClearCookieOnLoad&&deleteAllXmpCookiesRef()}();var xmpApp=angular.module("xmp.app",["xmp.directives","xmp.controllers","xmp.services"]).config(["xmpResourceProvider",function(inProvider){inProvider.configure({access:xmpcfg.access,timeout:xmpcfg.timeout,test:xmpcfg.isTest})}]).value("appConfig",function(){return{asyncAttempts:xmpcfg.asyncAttempts,asyncWaitTime:xmpcfg.asyncWaitTime}}).filter("xmpTrustUrl",function($sce){return function(url){return $sce.trustAsResourceUrl(url)}}),xmpResourceDriverXmpl=function(inInitialization,inDoLogin,inDecipherRecipientID){var self=this;inInitialization&&inInitialization.configuration?(angular.module("xmp.app",inDoLogin?["xmp.services","ngCookies"]:["xmp.services"]).config(["xmpResourceProvider",function(inProvider){inProvider.configure(inInitialization.configuration)}]),angular.element(document).ready(function(){self.injector=angular.bootstrap(document,["xmp.app"]),init(self,inDoLogin,inDecipherRecipientID)})):(inInitialization&&inInitialization.element?self.injector=angular.element(inInitialization.element).injector():inInitialization&&inInitialization.injector?self.injector=inInitialization.injector:self.injector=angular.element(document).injector(),init(self,inDoLogin,inDecipherRecipientID))};xmpResourceDriverXmpl.prototype.ready=function(inCB){if(this.isReady)return inCB.call(this);$(this).one("xmpResourceDriverXMPL::ready",inCB)};var xmpControllerDriverXmpl=function(inJController){this.controller=angular.element(inJController),Object.defineProperty(this,"xmp",{get:function(){return this.controller.scope().xmp},enumerable:!0,configurable:!0}),Object.defineProperty(this,"scope",{get:function(){return this.controller.scope()},enumerable:!0,configurable:!0})};xmpControllerDriverXmpl.prototype.ready=function(inCB){this.scope.xmpReady(inCB)};

/***********************************************************************************/
//Because we place all block in $(document).ready function we needed to expose these global variables outside xmpControllerDriver, xmpResourceDriver
xmpControllerDriver = xmpControllerDriverXmpl;
xmpResourceDriver = xmpResourceDriverXmpl;

//mapOnReady is a variable that will be used by xmp-map directive, will be be fired once angular xmp.app modules are ready
if (typeof mapOnReady != 'undefined')
	mapOnReady();

//angularComponenetsOnReady is a variable that will be used by a user who develop customized script and defined new directive, controller or new angular applicaton on top of xmp.app application
//will be be fired once angular xmp.app modules are ready
if (typeof angularComponentsOnReady != 'undefined')
	angularComponentsOnReady();

//xmplOnReady is a variable that will be defined by a user who develop customized script, the function xmplOnReady will be fired once xmp.app directived and controllers are ready in the browser
angular.element(document).ready(function () {
if (typeof xmplOnReady != 'undefined') 
	xmplOnReady();
});

});//end $(document).ready(function() 

}; //end loadXmplGeneralScript


waitForScriptLoad(1);

